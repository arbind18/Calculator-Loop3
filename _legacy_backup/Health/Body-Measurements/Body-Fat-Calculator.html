<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary Meta Tags -->
    <title>Body Fat Calculator - Calculate Body Fat Percentage | US Navy Method</title>
    <meta name="title" content="Body Fat Calculator - Calculate Body Fat Percentage | US Navy Method">
    <meta name="description" content="Free Body Fat Calculator using US Navy Method. Calculate your body fat percentage accurately with circumference measurements. Get fitness level categories and health recommendations.">
    <meta name="keywords" content="body fat calculator, body fat percentage, US Navy method, body composition, fat percentage, fitness calculator, body fat measurement, obesity calculator, athletic body fat">
    <meta name="author" content="CalculatorLoop">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://calculatorloop.com/Health/Body-Measurements/Body-Fat-Calculator.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://calculatorloop.com/Health/Body-Measurements/Body-Fat-Calculator.html">
    <meta property="og:title" content="Body Fat Calculator - Calculate Body Fat Percentage">
    <meta property="og:description" content="Calculate your body fat percentage using the accurate US Navy Method. Get detailed fitness categories and health recommendations.">
    <meta property="og:image" content="https://calculatorloop.com/assets/images/body-fat-calculator.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://calculatorloop.com/Health/Body-Measurements/Body-Fat-Calculator.html">
    <meta property="twitter:title" content="Body Fat Calculator - Calculate Body Fat Percentage">
    <meta property="twitter:description" content="Calculate your body fat percentage using the accurate US Navy Method.">
    <meta property="twitter:image" content="https://calculatorloop.com/assets/images/body-fat-calculator.jpg">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --bg-gradient-start: #667eea;
    --bg-gradient-end: #764ba2;
    --container-bg: #ffffff;
    --text-primary: #1a1a1a;
    --text-secondary: #666;
    --text-tertiary: #555;
    --border-color: #e0e0e0;
    --input-bg: #ffffff;
    --card-bg: #f8f9fa;
    --shadow: rgba(0,0,0,0.15);
}
body.dark-mode {
    --bg-gradient-start: #1a1a2e;
    --bg-gradient-end: #16213e;
    --container-bg: #0f3460;
    --text-primary: #e8e8e8;
    --text-secondary: #b8b8b8;
    --text-tertiary: #a0a0a0;
    --border-color: #2a4663;
    --input-bg: #1a2942;
    --card-bg: #1a2942;
    --shadow: rgba(0,0,0,0.3);
}
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); 
    min-height: 100vh; 
    padding: 10px; 
    line-height: 1.6; 
    transition: background 0.5s ease;
}
.header-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 1000;
}
.back-btn, .dark-mode-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px var(--shadow);
}
.back-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
}
.back-btn:hover {
    transform: translateY(-3px) rotate(-5deg);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
.dark-mode-toggle {
    background: var(--container-bg);
    color: var(--text-primary);
    animation: float 3s ease-in-out infinite;
}
.dark-mode-toggle:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 6px 25px var(--shadow);
}
.dark-mode-toggle i {
    transition: transform 0.5s ease;
}
.dark-mode .dark-mode-toggle i {
    transform: rotate(180deg);
}
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}
.container { 
    max-width: 680px; 
    margin: 0 auto; 
    background: var(--container-bg); 
    border-radius: 16px; 
    box-shadow: 0 8px 32px var(--shadow); 
    padding: 24px; 
    margin-bottom: 20px;
    transition: all 0.3s ease;
}
h1 { 
    color: var(--text-primary); 
    text-align: center; 
    margin-bottom: 8px; 
    font-size: clamp(1.5rem, 5vw, 2rem); 
    font-weight: 700; 
    line-height: 1.2;
}
h2 {
    color: var(--text-primary);
    transition: color 0.3s ease;
}
h3 {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
.subtitle { 
    text-align: center; 
    color: var(--text-secondary); 
    margin-bottom: 24px; 
    font-size: clamp(0.875rem, 3vw, 1rem); 
}
.input-group { 
    margin-bottom: 20px; 
}
label { 
    display: block; 
    margin-bottom: 8px; 
    color: var(--text-tertiary); 
    font-weight: 600; 
    font-size: clamp(0.875rem, 3vw, 0.95rem);
}
input, select, textarea { 
    width: 100%; 
    padding: 12px 14px; 
    border: 2px solid var(--border-color); 
    border-radius: 8px; 
    font-size: clamp(0.9rem, 3vw, 1rem); 
    transition: all 0.3s; 
    font-family: inherit;
    background: var(--input-bg);
    color: var(--text-primary);
}
input:focus, select:focus, textarea:focus { 
    outline: none; 
    border-color: #667eea; 
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
.btn { 
    width: 100%; 
    padding: 14px; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    color: white; 
    border: none; 
    border-radius: 8px; 
    font-size: clamp(1rem, 3.5vw, 1.1rem); 
    font-weight: 600; 
    cursor: pointer; 
    transition: all 0.3s; 
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}
.btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); 
}
.btn:active { 
    transform: translateY(0); 
}
.result { 
    margin-top: 24px; 
    padding: 24px; 
    background: linear-gradient(135deg, var(--card-bg) 0%, var(--card-bg) 100%); 
    border-radius: 12px; 
    display: none;
    transition: all 0.3s ease;
}
.result-value { 
    font-size: clamp(2rem, 8vw, 3rem); 
    color: #667eea; 
    font-weight: 700; 
    text-align: center; 
    margin: 16px 0; 
    word-break: break-word;
}
.result-card { 
    background: var(--input-bg); 
    padding: 16px; 
    border-radius: 8px; 
    margin: 12px 0; 
    box-shadow: 0 2px 8px var(--shadow);
    transition: all 0.3s ease;
}
.result-card h3 { 
    font-size: clamp(1rem, 4vw, 1.2rem); 
    margin-bottom: 10px; 
    color: var(--text-tertiary);
}
.result-card h4 { 
    font-size: clamp(0.9rem, 3.5vw, 1.05rem); 
    margin: 12px 0 8px 0; 
    color: var(--text-tertiary);
}
.result-card p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-secondary); 
    margin: 8px 0; 
    line-height: 1.6;
}
.result-card strong { 
    color: var(--text-tertiary); 
}
.info-box { 
    background: var(--card-bg); 
    border-left: 4px solid #667eea; 
    padding: 16px; 
    margin: 20px 0; 
    border-radius: 8px;
    transition: all 0.3s ease;
}
.info-box h3 { 
    font-size: clamp(1rem, 4vw, 1.15rem); 
    color: var(--text-tertiary); 
    margin-bottom: 8px;
}
.info-box p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-tertiary); 
    line-height: 1.6;
}
.back-link { 
    display: inline-block; 
    margin-top: 16px; 
    color: #667eea; 
    text-decoration: none; 
    font-weight: 600; 
    font-size: clamp(0.9rem, 3vw, 1rem);
}
.back-link:hover { 
    text-decoration: underline; 
}
article p, article ul li {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
/* FAQ Accordion Styles */
.faq-item {
    margin-bottom: 15px;
    background: var(--card-bg);
    border-left: 4px solid #667eea;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}
.faq-question {
    padding: 18px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    transition: all 0.3s ease;
}
.faq-question:hover {
    background: var(--input-bg);
}
.faq-question h3 {
    font-size: clamp(0.95rem, 3.5vw, 1.05rem);
    color: var(--text-tertiary);
    margin: 0;
    flex: 1;
}
.faq-icon {
    font-size: 1.2rem;
    color: #667eea;
    transition: transform 0.3s ease;
    margin-left: 15px;
}
.faq-item.active .faq-icon {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
    padding: 0 20px;
}
.faq-item.active .faq-answer {
    max-height: 1000px;
    padding: 0 20px 18px 20px;
}
.faq-answer p {
    line-height: 1.8;
    color: var(--text-tertiary);
    margin: 0;
}
@media (max-width: 480px) {
    body { padding: 8px; }
    .container { padding: 20px 16px; border-radius: 12px; }
    h1 { margin-bottom: 6px; }
    .subtitle { margin-bottom: 20px; }
    .input-group { margin-bottom: 16px; }
    .btn { padding: 13px; }
    .result { padding: 20px 16px; margin-top: 20px; }
    .result-card { padding: 14px; }
    .info-box { padding: 14px; }
    .header-controls { top: 10px; right: 10px; gap: 8px; }
    .back-btn, .dark-mode-toggle { width: 45px; height: 45px; font-size: 1.1rem; }
}
@media (min-width: 768px) {
    body { padding: 20px; }
    .container { padding: 40px; }
}
    
/* Chat Widget Styles */
.chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}
.chat-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
    position: relative;
}
.chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.chat-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff4757;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    animation: bounce 1s infinite;
}
@keyframes pulse {
    0%, 100% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4); }
    50% { box-shadow: 0 4px 30px rgba(102, 126, 234, 0.7); }
}
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.chat-window {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 350px;
    height: 500px;
    background: var(--container-bg);
    border-radius: 16px;
    box-shadow: 0 8px 40px var(--shadow);
    display: none;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}
.chat-window.active {
    display: flex;
}
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.chat-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 15px;
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.chat-header h4 {
    margin: 0;
    font-size: 1rem;
    color: white;
}
.chat-close {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}
.chat-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}
.chat-message {
    margin-bottom: 15px;
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.chat-message.bot .message-content {
    background: var(--card-bg);
    padding: 12px;
    border-radius: 12px;
    color: var(--text-tertiary);
}
.chat-message.user .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 12px;
    border-radius: 12px;
    color: white;
    margin-left: auto;
    max-width: 80%;
}
.message-content ul {
    margin: 10px 0 0 20px;
    line-height: 1.8;
}
.chat-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
}
.chat-footer input {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: var(--input-bg);
    color: var(--text-primary);
}
.chat-footer button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}
.chat-footer button:hover {
    transform: scale(1.1);
}

/* Analytics Dashboard Styles */
.analytics-toggle {
    position: fixed;
    bottom: 100px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    z-index: 9998;
    animation: slideInRight 0.5s ease;
}
@keyframes slideInRight {
    from { transform: translateX(100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
.analytics-toggle:hover {
    transform: translateX(-5px);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.analytics-dashboard {
    position: fixed;
    top: 0;
    right: -100%;
    width: 450px;
    height: 100vh;
    background: var(--container-bg);
    box-shadow: -5px 0 30px var(--shadow);
    z-index: 10000;
    overflow-y: auto;
    transition: right 0.4s ease;
}
.analytics-dashboard.active {
    right: 0;
}
.analytics-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 10;
}
.analytics-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: white;
}
.analytics-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s;
}
.analytics-close:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
}
.analytics-content {
    padding: 20px;
}
.analytics-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px var(--shadow);
    animation: fadeInUp 0.5s ease;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.analytics-card h4 {
    color: var(--text-tertiary);
    margin-bottom: 15px;
    font-size: 1.1rem;
}
.stat-row {
    display: flex;
    gap: 15px;
    justify-content: space-between;
}
.stat-item {
    flex: 1;
    text-align: center;
    padding: 15px;
    background: var(--input-bg);
    border-radius: 8px;
}
.stat-value {
    font-size: 2rem;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
}
.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.chart-container {
    position: relative;
    height: 200px;
}
.chart-container canvas {
    max-height: 100%;
}

@media (max-width: 480px) {
    .chat-window {
        width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        height: 450px;
    }
    .analytics-dashboard {
        width: 100%;
    }
    .analytics-toggle {
        bottom: 95px;
        font-size: 0.9rem;
        padding: 10px 16px;
    }
    .chat-button {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
    }
}
    </style>
</head>
<body>
<!-- Enhanced Header with Dark Mode and Back Button -->
<div class="header-controls">
    <a href="javascript:history.back()" class="back-btn" title="Go Back">
        <i class="fas fa-arrow-left"></i>
    </a>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        <i class="fas fa-moon"></i>
    </button>
</div>
    <div class="container">
        <h1><i class="fas fa-percentage"></i> Body Fat Calculator</h1>
        <p class="subtitle">Estimate your body fat percentage using US Navy Method</p>
        
        <div class="input-group">
            <label><i class="fas fa-venus-mars"></i> Gender</label>
            <select id="gender" onchange="toggleHipField()">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-calendar-alt"></i> Age (years)</label>
            <input type="number" id="age" value="30" min="1" max="120">
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-weight"></i> Weight (kg)</label>
            <input type="number" id="weight" value="70" step="0.1" min="1">
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-ruler-vertical"></i> Height (cm)</label>
            <input type="number" id="height" value="170" step="0.1" min="1">
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-ruler"></i> Neck Circumference (cm)</label>
            <input type="number" id="neck" value="37" step="0.1" min="1">
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-ruler"></i> Waist Circumference (cm)</label>
            <input type="number" id="waist" value="85" step="0.1" min="1">
        </div>
        
        <div class="input-group" id="hipGroup">
            <label><i class="fas fa-ruler"></i> Hip Circumference (cm) - For Females</label>
            <input type="number" id="hip" value="95" step="0.1" min="1">
        </div>
        
        <button class="btn" onclick="calculateBodyFat()"><i class="fas fa-calculator"></i> Calculate Body Fat</button>
        
        <div class="result" id="result">
            <h2>Your Body Fat Percentage</h2>
            <div class="result-value" id="bfValue">0</div>
            <div id="category" style="font-size: 1.2rem; margin-top: 10px; font-weight: 600;"></div>
            <div id="description" style="margin-top: 15px; color: #666; line-height: 1.6;"></div>
        </div>
        
        
    </div>
    
    <!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>How to use this calculator</li>
                        <li>Understanding your results</li>
                        <li>Health recommendations</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script>
        function toggleHipField() {
            const gender = document.getElementById('gender').value;
            const hipGroup = document.getElementById('hipGroup');
            hipGroup.style.display = gender === 'female' ? 'block' : 'none';
        }
        
        function calculateBodyFat() {
            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const neck = parseFloat(document.getElementById('neck').value);
            const waist = parseFloat(document.getElementById('waist').value);
            const hip = parseFloat(document.getElementById('hip').value);
            
            if (!age || !weight || !height || !neck || !waist) {
                alert('Please enter all required values');
                return;
            }
            
            if (gender === 'female' && !hip) {
                alert('Please enter hip circumference for females');
                return;
            }
            
            let bodyFat;
            
            // US Navy Method
            if (gender === 'male') {
                bodyFat = 495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(height)) - 450;
            } else {
                bodyFat = 495 / (1.29579 - 0.35004 * Math.log10(waist + hip - neck) + 0.22100 * Math.log10(height)) - 450;
            }
            
            // Determine category based on gender and age
            let category, color, description;
            
            if (gender === 'male') {
                if (bodyFat < 6) {
                    category = 'Essential Fat';
                    color = '#d32f2f';
                    description = 'Very low body fat. May not be sustainable or healthy.';
                } else if (bodyFat < 14) {
                    category = 'Athletic';
                    color = '#388e3c';
                    description = 'Typical for athletes. Excellent fitness level.';
                } else if (bodyFat < 18) {
                    category = 'Fitness';
                    color = '#689f38';
                    description = 'Fit and healthy range. Good overall fitness.';
                } else if (bodyFat < 25) {
                    category = 'Average';
                    color = '#fbc02d';
                    description = 'Average body fat percentage. Room for improvement.';
                } else {
                    category = 'Obese';
                    color = '#e64a19';
                    description = 'High body fat. Consider lifestyle changes and consulting a professional.';
                }
            } else {
                if (bodyFat < 14) {
                    category = 'Essential Fat';
                    color = '#d32f2f';
                    description = 'Very low body fat. May not be sustainable or healthy.';
                } else if (bodyFat < 21) {
                    category = 'Athletic';
                    color = '#388e3c';
                    description = 'Typical for athletes. Excellent fitness level.';
                } else if (bodyFat < 25) {
                    category = 'Fitness';
                    color = '#689f38';
                    description = 'Fit and healthy range. Good overall fitness.';
                } else if (bodyFat < 32) {
                    category = 'Average';
                    color = '#fbc02d';
                    description = 'Average body fat percentage. Room for improvement.';
                } else {
                    category = 'Obese';
                    color = '#e64a19';
                    description = 'High body fat. Consider lifestyle changes and consulting a professional.';
                }
            }
            
            // Display results
            document.getElementById('bfValue').textContent = bodyFat.toFixed(1) + '%';
            document.getElementById('category').textContent = category;
            document.getElementById('category').style.color = color;
            document.getElementById('description').textContent = description;
            
    showActionButtons();
        }
        
        // Initialize on page load
        toggleHipField();
        calculateBodyFat();
    </script>

    <!-- Rich Content Section -->
    <div class="container" style="margin-top: 30px;">
        <article>
            <h2 style="color: #667eea; margin-bottom: 20px;">Understanding Body Fat Percentage: Complete Guide</h2>
            
            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">What is Body Fat Percentage?</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Body fat percentage represents the proportion of your total body weight that consists of fat mass. Unlike BMI, which only considers weight and height, body fat percentage distinguishes between fat mass and lean body mass (muscles, bones, organs, and water). This makes it a more accurate indicator of health and fitness than weight or BMI alone.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    The human body requires a certain amount of essential fat for normal physiological functions, including hormone production, vitamin absorption, and temperature regulation. However, excess body fat, particularly visceral fat around organs, is associated with numerous health risks including cardiovascular disease, type 2 diabetes, and metabolic syndrome.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">The US Navy Method Explained</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Our calculator uses the US Navy Circumference Method, developed by the United States Navy to estimate body fat percentage. This method is based on the principle that body fat distribution affects circumference measurements at specific body sites. It's one of the most accessible and reasonably accurate methods for estimating body fat without expensive equipment.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    The formula uses different measurements for men and women because fat distribution patterns differ by sex. Men typically store more fat in the abdominal area, while women tend to store more fat in the hips and thighs due to hormonal differences and evolutionary adaptations.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Body Fat Categories for Men</h3>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Essential Fat (2-5%):</strong> Minimal fat necessary for basic physical and physiological health. Only competitive bodybuilders achieve this temporarily.</li>
                    <li><strong>Athletes (6-13%):</strong> Typical range for male athletes. Visible abs and vascular definition.</li>
                    <li><strong>Fitness (14-17%):</strong> Fit appearance with some muscle definition. Healthy and sustainable long-term.</li>
                    <li><strong>Average (18-24%):</strong> Typical for average adult males. Some fat visibility but generally healthy.</li>
                    <li><strong>Obese (25%+):</strong> Increased health risks. Medical intervention may be recommended.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Body Fat Categories for Women</h3>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Essential Fat (10-13%):</strong> Minimum fat for basic health. Required for normal hormonal function and reproductive health.</li>
                    <li><strong>Athletes (14-20%):</strong> Common among female athletes. Very fit appearance with good muscle definition.</li>
                    <li><strong>Fitness (21-24%):</strong> Fit and healthy appearance. Generally considered ideal for most women.</li>
                    <li><strong>Average (25-31%):</strong> Typical for average adult females. Acceptable health risk profile.</li>
                    <li><strong>Obese (32%+):</strong> Elevated health risks. Lifestyle modifications recommended.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">How to Take Accurate Measurements</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    For accurate results, follow these measurement guidelines:
                </p>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Neck:</strong> Measure just below the larynx (Adam's apple), perpendicular to the long axis of the neck.</li>
                    <li><strong>Waist (Men):</strong> Measure at the narrowest point, typically at the level of the navel.</li>
                    <li><strong>Waist (Women):</strong> Measure at the smallest point, usually above the navel.</li>
                    <li><strong>Hips (Women):</strong> Measure at the widest part of the buttocks.</li>
                    <li>Take measurements in the morning before eating or after using the bathroom.</li>
                    <li>Stand naturally; don't suck in your stomach or flex muscles.</li>
                    <li>Keep the tape measure snug but not tight against the skin.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Health Implications of Body Fat Levels</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Maintaining healthy body fat levels is crucial for overall health. Excessively low body fat can lead to hormonal imbalances, weakened immune function, bone density loss, and for women, menstrual irregularities and fertility issues. Conversely, high body fat, especially visceral fat, increases risks of heart disease, stroke, type 2 diabetes, certain cancers, sleep apnea, and osteoarthritis. The optimal body fat percentage varies by individual goals, age, and activity level.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">How to Reduce Body Fat Healthily</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Reducing body fat requires a combination of proper nutrition and exercise. Create a moderate calorie deficit (300-500 calories below maintenance), prioritize protein intake (1.6-2.2g per kg body weight), incorporate strength training to preserve muscle mass, add cardiovascular exercise for additional calorie burn, ensure adequate sleep (7-9 hours), manage stress levels, stay hydrated, and be patient—aim for 0.5-1% body fat loss per month for sustainable results.
                </p>
            </section>
        </article>
    </div>

    <!-- FAQ Section -->
    <div class="container" style="margin-top: 30px;">
        <h2 style="color: #667eea; margin-bottom: 25px; text-align: center;">Body Fat Calculator: Frequently Asked Questions</h2>
        
        <div class="faq-item"><div class="faq-question">
            <h3>1. How accurate is the US Navy body fat calculator?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                The US Navy method is typically accurate within 3-4% for most individuals. While not as precise as DEXA scans or hydrostatic weighing, it provides a reliable estimate that's sufficient for tracking progress. Accuracy improves when measurements are taken consistently at the same time of day using proper technique.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>2. What's a healthy body fat percentage?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                For men, healthy body fat typically ranges from 10-20%, with 14-17% considered optimal for fitness. For women, 18-28% is healthy, with 21-24% considered optimal. These ranges provide enough essential fat for normal body functions while minimizing health risks associated with excess fat.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>3. Can I measure body fat at home?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes! The US Navy method only requires a tape measure, making it perfect for home use. Other home methods include bioelectrical impedance scales (less accurate but convenient) and skinfold calipers (requires practice). For most accurate results, use multiple methods and track trends over time rather than focusing on single measurements.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>4. How quickly can I lose body fat?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Safe and sustainable fat loss is typically 0.5-1% of body fat per month. Faster loss often results in muscle loss, metabolic slowdown, and difficulty maintaining results. For example, someone at 25% body fat should aim to reach 20% over 5-10 months, not 5-10 weeks.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>5. Is body fat percentage more important than BMI?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes, body fat percentage is generally a better health indicator than BMI because it distinguishes between fat and lean mass. An athlete might have a high BMI but low body fat, while someone with normal BMI might have high body fat (skinny fat). Body composition matters more than total weight.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>6. Why do women have higher body fat percentages than men?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Women naturally have higher essential fat levels (10-13% vs. 2-5% for men) due to biological requirements for reproduction, hormone production, and childbearing. This is completely normal and healthy. Women also tend to store more subcutaneous fat in the hips and thighs due to estrogen.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>7. Does age affect body fat percentage?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes, body fat typically increases with age due to hormonal changes, decreased activity levels, and natural muscle loss (sarcopenia). However, this increase isn't inevitable—maintaining regular strength training and proper nutrition can help maintain healthy body composition throughout life.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>8. How often should I measure body fat?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Measure body fat every 2-4 weeks when actively trying to change body composition. More frequent measurements aren't useful as body fat changes slowly. Always measure at the same time of day under similar conditions (e.g., morning, before eating) for consistency.
            </p></div></div>
    </div>

    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How accurate is the US Navy body fat calculator?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The US Navy method is typically accurate within 3-4% for most individuals. While not as precise as DEXA scans or hydrostatic weighing, it provides a reliable estimate that's sufficient for tracking progress."
                }
            },
            {
                "@type": "Question",
                "name": "What's a healthy body fat percentage?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "For men, healthy body fat typically ranges from 10-20%, with 14-17% considered optimal for fitness. For women, 18-28% is healthy, with 21-24% considered optimal."
                }
            },
            {
                "@type": "Question",
                "name": "Is body fat percentage more important than BMI?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, body fat percentage is generally a better health indicator than BMI because it distinguishes between fat and lean mass. Body composition matters more than total weight."
                }
            }
        ]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Body Fat Calculator",
        "description": "Free Body Fat Calculator using US Navy Method. Calculate your body fat percentage accurately with circumference measurements.",
        "url": "https://calculatorloop.com/Health/Body-Measurements/Body-Fat-Calculator.html",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>


<!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>How to use this calculator</li>
                        <li>Understanding your results</li>
                        <li>Health recommendations</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>



<script>
// Chat Widget Functions
let chatOpen = false;

function toggleChat() {
    chatOpen = !chatOpen;
    const chatWindow = document.getElementById('chatWindow');
    if (chatOpen) {
        chatWindow.classList.add('active');
    } else {
        chatWindow.classList.remove('active');
    }
}

function getSmartResponse(userMessage) {
    const message = userMessage.toLowerCase();
    
    // Define chatResponses if not already defined (basic fallback)
    const chatResponses = {
        "usage": { keywords: ["how to", "use", "calculate"], response: "Simply enter your details in the form above and click 'Calculate'. The results will appear instantly below." },
        "results": { keywords: ["result", "score", "meaning"], response: "Your results are calculated based on standard medical formulas. Check the 'Understanding Results' section for more details." },
        "health": { keywords: ["health", "advice", "doctor"], response: "While this tool provides estimates, always consult a healthcare professional for medical advice." },
        "download": { keywords: ["download", "pdf", "save"], response: "You can download your results as a PDF using the 'Download Report' button in the results section." }
    };

    for (const [category, data] of Object.entries(chatResponses)) {
        if (data.keywords.some(keyword => message.includes(keyword))) {
            return data.response;
        }
    }
    
    if (message.includes('thank') || message.includes('thanks') || message.includes('धनयवद')) {
        return "You're welcome! Feel free to ask any questions about the calculator or your health results. I'm here to help! ";
    }
    
    if (message.includes('hello') || message.includes('hi') || message.includes('नमसत')) {
        return "Hello!  I'm your health calculator assistant. Ask me about using the calculator, understanding results, downloading reports, or health recommendations.";
    }
    
    return "I can help you with:\n Using this calculator\n Understanding your results\n Downloading PDF reports\n Sharing results\n Health improvement tips\n When to see a doctor\n\nWhat would you like to know?";
}

function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    if (!message) return;
    
    const chatBody = document.querySelector('.chat-body');
    
    const userMsg = document.createElement('div');
    userMsg.className = 'chat-message user';
    userMsg.innerHTML = `<div class="message-content"><p>${message}</p></div>`;
    chatBody.appendChild(userMsg);
    
    input.value = '';
    chatBody.scrollTop = chatBody.scrollHeight;
    
    setTimeout(() => {
        const botResponse = getSmartResponse(message);
        const botMsg = document.createElement('div');
        botMsg.className = 'chat-message bot';
        botMsg.innerHTML = `<div class="message-content"><p>${botResponse}</p></div>`;
        chatBody.appendChild(botMsg);
        chatBody.scrollTop = chatBody.scrollHeight;
    }, 800);
}

document.addEventListener('DOMContentLoaded', () => {
    const chatInput = document.getElementById('chatInput');
    if (chatInput) {
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    }
});

// Analytics Dashboard Functions
let analyticsOpen = false;
function toggleAnalytics() {
    analyticsOpen = !analyticsOpen;
    const dashboard = document.getElementById('analyticsDashboard');
    if (analyticsOpen) {
        dashboard.classList.add('active');
        setTimeout(() => {
            animateStats();
            initCharts();
        }, 300);
    } else {
        dashboard.classList.remove('active');
    }
}

function animateStats() {
    const stats = document.querySelectorAll('.stat-value');
    stats.forEach(stat => {
        const target = parseInt(stat.dataset.target);
        let current = 0;
        const increment = target / 50;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                stat.textContent = target.toLocaleString();
                clearInterval(timer);
            } else {
                stat.textContent = Math.floor(current).toLocaleString();
            }
        }, 30);
    });
}

function initCharts() {
    const pieCanvas = document.getElementById('pieChart');
    if (pieCanvas && !pieCanvas.dataset.initialized) {
        pieCanvas.dataset.initialized = 'true';
        drawPieChart(pieCanvas);
    }
    
    const lineCanvas = document.getElementById('lineChart');
    if (lineCanvas && !lineCanvas.dataset.initialized) {
        lineCanvas.dataset.initialized = 'true';
        drawLineChart(lineCanvas);
    }
    
    const barCanvas = document.getElementById('barChart');
    if (barCanvas && !barCanvas.dataset.initialized) {
        barCanvas.dataset.initialized = 'true';
        drawBarChart(barCanvas);
    }
}

function drawPieChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 300;
    canvas.height = 200;
    
    const data = [
        { label: 'Low Risk', value: 35, color: '#4caf50' },
        { label: 'Moderate', value: 30, color: '#fbc02d' },
        { label: 'High', value: 25, color: '#ff9800' },
        { label: 'Very High', value: 10, color: '#f44336' }
    ];
    
    let currentAngle = -Math.PI / 2;
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 70;
    
    data.forEach((item, index) => {
        setTimeout(() => {
            const sliceAngle = (item.value / 100) * 2 * Math.PI;
            
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
            ctx.closePath();
            ctx.fillStyle = item.color;
            ctx.fill();
            
            const labelAngle = currentAngle + sliceAngle / 2;
            const labelX = centerX + Math.cos(labelAngle) * (radius + 30);
            const labelY = centerY + Math.sin(labelAngle) * (radius + 30);
            
            ctx.fillStyle = item.color;
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(item.value + '%', labelX, labelY);
            
            currentAngle += sliceAngle;
        }, index * 200);
    });
}

function drawLineChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 200;
    
    const data = [120, 145, 132, 168, 155, 180, 142];
    const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
    
    const padding = 30;
    const chartWidth = canvas.width - padding * 2;
    const chartHeight = canvas.height - padding * 2;
    const max = Math.max(...data);
    
    ctx.strokeStyle = '#667eea';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padding, padding);
    ctx.lineTo(padding, canvas.height - padding);
    ctx.lineTo(canvas.width - padding, canvas.height - padding);
    ctx.stroke();
    
    let progress = 0;
    function animate() {
        if (progress >= 1) return;
        progress += 0.02;
        
        ctx.clearRect(padding + 1, 0, chartWidth, canvas.height - padding);
        
        ctx.strokeStyle = '#764ba2';
        ctx.lineWidth = 3;
        ctx.beginPath();
        
        data.forEach((value, index) => {
            const x = padding + (chartWidth / (data.length - 1)) * index;
            const y = canvas.height - padding - (value / max) * chartHeight * progress;
            
            if (index === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
            
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.arc(x, y, 4, 0, Math.PI * 2);
            ctx.fill();
            
            if (progress > 0.9) {
                ctx.fillStyle = '#666';
                ctx.font = '11px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(labels[index], x, canvas.height - padding + 15);
            }
        });
        
        ctx.stroke();
        requestAnimationFrame(animate);
    }
    animate();
}

function drawBarChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 200;
    
    const data = [
        { label: '18-30', value: 45 },
        { label: '31-45', value: 78 },
        { label: '46-60', value: 92 },
        { label: '60+', value: 65 }
    ];
    
    const padding = 30;
    const barWidth = (canvas.width - padding * 2) / data.length - 10;
    const maxValue = Math.max(...data.map(d => d.value));
    
    let progress = 0;
    function animate() {
        if (progress >= 1) return;
        progress += 0.02;
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        data.forEach((item, index) => {
            const x = padding + index * (barWidth + 10);
            const barHeight = ((item.value / maxValue) * (canvas.height - padding * 2)) * progress;
            const y = canvas.height - padding - barHeight;
            
            const gradient = ctx.createLinearGradient(0, y, 0, canvas.height - padding);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(x, y, barWidth, barHeight);
            
            if (progress > 0.9) {
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(item.label, x + barWidth / 2, canvas.height - padding + 15);
                ctx.fillText(item.value, x + barWidth / 2, y - 5);
            }
        });
        
        requestAnimationFrame(animate);
    }
    animate();
}

// Download PDF functionality
function downloadPDF() {
    const resultValue = document.getElementById('resultValue') || document.querySelector('.result-value');
    const resultDetails = document.getElementById('resultDetails') || document.querySelector('.result-card');
    
    if (!resultValue) {
        alert('Please calculate your results first!');
        return;
    }
    
    const calculatorTitle = document.querySelector('h1').textContent;
    const result = resultValue.textContent;
    const details = resultDetails ? resultDetails.innerText : '';
    
    const pdfContent = `
${calculatorTitle}
${'='.repeat(50)}

Result: ${result}

${details}

Generated on: ${new Date().toLocaleDateString()}
Source: CalculatorLoop.com

Note: This is an educational tool. Consult healthcare 
professionals for medical advice.
    `;
    
    const blob = new Blob([pdfContent], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${calculatorTitle.replace(/\s+/g, '-')}-Report.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    
    showToast(' Report downloaded successfully!', 'success');
}

// Share functionality
let shareMenuOpen = false;
function toggleShareMenu() {
    shareMenuOpen = !shareMenuOpen;
    const menu = document.getElementById('shareMenu');
    if (shareMenuOpen) {
        menu.classList.add('active');
    } else {
        menu.classList.remove('active');
    }
}

function shareWhatsApp() {
    const result = document.querySelector('.result-value')?.textContent || 'Check this out!';
    const calculatorTitle = document.querySelector('h1').textContent;
    const text = `${calculatorTitle}\nMy Result: ${result}\n\nCalculate yours: ${window.location.href}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
    toggleShareMenu();
}

function shareTwitter() {
    const calculatorTitle = document.querySelector('h1').textContent;
    const text = `I just used ${calculatorTitle} - Get your health insights now!`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
    toggleShareMenu();
}

function shareFacebook() {
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
    toggleShareMenu();
}

function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        showToast(' Link copied to clipboard!', 'success');
        toggleShareMenu();
    });
}

function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4caf50' : '#667eea'};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        z-index: 10001;
        animation: slideInRight 0.3s ease;
        font-weight: 600;
    `;
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => document.body.removeChild(toast), 300);
    }, 3000);
}

function showActionButtons() {
    const actionBtns = document.getElementById('actionButtons');
    if (actionBtns) {
        actionBtns.style.display = 'flex';
    }
}

document.addEventListener('click', (e) => {
    const shareMenu = document.getElementById('shareMenu');
    const shareBtn = document.querySelector('.share-btn');
    if (shareMenu && shareMenuOpen && !shareMenu.contains(e.target) && !shareBtn.contains(e.target)) {
        toggleShareMenu();
    }
});

// Dark Mode Toggle
function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    const isDark = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDark);
    const icon = document.querySelector('.dark-mode-toggle i');
    if (icon) icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
}
window.addEventListener('DOMContentLoaded', () => {
    if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark-mode');
        const icon = document.querySelector('.dark-mode-toggle i');
        if (icon) icon.className = 'fas fa-sun';
    }
});

// Body Fat Calculator (US Navy Method)
function calculateBodyFat() {
    const gender = document.getElementById('gender').value;
    const height = parseFloat(document.getElementById('height').value);
    const waist = parseFloat(document.getElementById('waist').value);
    const neck = parseFloat(document.getElementById('neck').value);
    
    if (!height || !waist || !neck || height <= 0 || waist <= 0 || neck <= 0) {
        alert('Please enter valid measurements');
        return;
    }
    
    let bodyFatPercentage;
    
    if (gender === 'male') {
        bodyFatPercentage = 495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(height)) - 450;
    } else {
        const hip = parseFloat(document.getElementById('hip').value);
        if (!hip || hip <= 0) {
            alert('Please enter valid hip measurement');
            return;
        }
        bodyFatPercentage = 495 / (1.29579 - 0.35004 * Math.log10(waist + hip - neck) + 0.22100 * Math.log10(height)) - 450;
    }
    
    document.getElementById('result').style.display = 'block';
    document.getElementById('bodyFatValue').textContent = bodyFatPercentage.toFixed(1);
    
    let category, color, description;
    if (gender === 'male') {
        if (bodyFatPercentage < 6) { category = 'Essential Fat'; color = '#d32f2f'; description = 'Dangerously low - health risks'; }
        else if (bodyFatPercentage < 14) { category = 'Athletes'; color = '#388e3c'; description = 'Athletic/fit range'; }
        else if (bodyFatPercentage < 18) { category = 'Fitness'; color = '#4caf50'; description = 'Fitness level'; }
        else if (bodyFatPercentage < 25) { category = 'Average'; color = '#fbc02d'; description = 'Average range'; }
        else { category = 'Obese'; color = '#d32f2f'; description = 'Above healthy range'; }
    } else {
        if (bodyFatPercentage < 14) { category = 'Essential Fat'; color = '#d32f2f'; description = 'Dangerously low - health risks'; }
        else if (bodyFatPercentage < 21) { category = 'Athletes'; color = '#388e3c'; description = 'Athletic/fit range'; }
        else if (bodyFatPercentage < 25) { category = 'Fitness'; color = '#4caf50'; description = 'Fitness level'; }
        else if (bodyFatPercentage < 32) { category = 'Average'; color = '#fbc02d'; description = 'Average range'; }
        else { category = 'Obese'; color = '#d32f2f'; description = 'Above healthy range'; }
    }
    
    const catEl = document.getElementById('category');
    const descEl = document.getElementById('description');
    if (catEl) { catEl.textContent = category; catEl.style.color = color; }
    if (descEl) descEl.textContent = description;
    
    showActionButtons();
}
</script>


</body>
</html>
