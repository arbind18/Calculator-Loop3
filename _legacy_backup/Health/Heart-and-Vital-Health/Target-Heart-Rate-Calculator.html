<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Target Heart Rate Calculator | Free Health Calculator</title>
    <meta name="description" content="Calculate target HR zones using Karvonen formula. Comprehensive health calculator with detailed analysis and recommendations.">
    <link rel="canonical" href="https://calculatorloop.com/Health/Heart-and-Vital-Health/Target-Heart-Rate-Calculator.html">
    <meta property="og:title" content="Target Heart Rate Calculator">
    <meta property="og:description" content="Calculate target HR zones using Karvonen formula">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --bg-gradient-start: #667eea;
    --bg-gradient-end: #764ba2;
    --container-bg: #ffffff;
    --text-primary: #1a1a1a;
    --text-secondary: #666;
    --text-tertiary: #555;
    --border-color: #e0e0e0;
    --input-bg: #ffffff;
    --card-bg: #f8f9fa;
    --shadow: rgba(0,0,0,0.15);
}
body.dark-mode {
    --bg-gradient-start: #1a1a2e;
    --bg-gradient-end: #16213e;
    --container-bg: #0f3460;
    --text-primary: #e8e8e8;
    --text-secondary: #b8b8b8;
    --text-tertiary: #a0a0a0;
    --border-color: #2a4663;
    --input-bg: #1a2942;
    --card-bg: #1a2942;
    --shadow: rgba(0,0,0,0.3);
}
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); 
    min-height: 100vh; 
    padding: 10px; 
    line-height: 1.6; 
    transition: background 0.5s ease;
}
.header-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 1000;
}
.back-btn, .dark-mode-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px var(--shadow);
}
.back-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
}
.back-btn:hover {
    transform: translateY(-3px) rotate(-5deg);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
.dark-mode-toggle {
    background: var(--container-bg);
    color: var(--text-primary);
    animation: float 3s ease-in-out infinite;
}
.dark-mode-toggle:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 6px 25px var(--shadow);
}
.dark-mode-toggle i {
    transition: transform 0.5s ease;
}
.dark-mode .dark-mode-toggle i {
    transform: rotate(180deg);
}
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}
.container { 
    max-width: 680px; 
    margin: 0 auto; 
    background: var(--container-bg); 
    border-radius: 16px; 
    box-shadow: 0 8px 32px var(--shadow); 
    padding: 24px; 
    margin-bottom: 20px;
    transition: all 0.3s ease;
}
h1 { 
    color: var(--text-primary); 
    text-align: center; 
    margin-bottom: 8px; 
    font-size: clamp(1.5rem, 5vw, 2rem); 
    font-weight: 700; 
    line-height: 1.2;
}
h2 {
    color: var(--text-primary);
    transition: color 0.3s ease;
}
h3 {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
.subtitle { 
    text-align: center; 
    color: var(--text-secondary); 
    margin-bottom: 24px; 
    font-size: clamp(0.875rem, 3vw, 1rem); 
}
.input-group { 
    margin-bottom: 20px; 
}
label { 
    display: block; 
    margin-bottom: 8px; 
    color: var(--text-tertiary); 
    font-weight: 600; 
    font-size: clamp(0.875rem, 3vw, 0.95rem);
}
input, select, textarea { 
    width: 100%; 
    padding: 12px 14px; 
    border: 2px solid var(--border-color); 
    border-radius: 8px; 
    font-size: clamp(0.9rem, 3vw, 1rem); 
    transition: all 0.3s; 
    font-family: inherit;
    background: var(--input-bg);
    color: var(--text-primary);
}
input:focus, select:focus, textarea:focus { 
    outline: none; 
    border-color: #667eea; 
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
.btn { 
    width: 100%; 
    padding: 14px; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    color: white; 
    border: none; 
    border-radius: 8px; 
    font-size: clamp(1rem, 3.5vw, 1.1rem); 
    font-weight: 600; 
    cursor: pointer; 
    transition: all 0.3s; 
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}
.btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); 
}
.btn:active { 
    transform: translateY(0); 
}
.result { 
    margin-top: 24px; 
    padding: 24px; 
    background: linear-gradient(135deg, var(--card-bg) 0%, var(--card-bg) 100%); 
    border-radius: 12px; 
    display: none;
    transition: all 0.3s ease;
}
.result-value { 
    font-size: clamp(2rem, 8vw, 3rem); 
    color: #667eea; 
    font-weight: 700; 
    text-align: center; 
    margin: 16px 0; 
    word-break: break-word;
}
.result-card { 
    background: var(--input-bg); 
    padding: 16px; 
    border-radius: 8px; 
    margin: 12px 0; 
    box-shadow: 0 2px 8px var(--shadow);
    transition: all 0.3s ease;
}
.result-card h3 { 
    font-size: clamp(1rem, 4vw, 1.2rem); 
    margin-bottom: 10px; 
    color: var(--text-tertiary);
}
.result-card h4 { 
    font-size: clamp(0.9rem, 3.5vw, 1.05rem); 
    margin: 12px 0 8px 0; 
    color: var(--text-tertiary);
}
.result-card p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-secondary); 
    margin: 8px 0; 
    line-height: 1.6;
}
.result-card strong { 
    color: var(--text-tertiary); 
}
.info-box { 
    background: var(--card-bg); 
    border-left: 4px solid #667eea; 
    padding: 16px; 
    margin: 20px 0; 
    border-radius: 8px;
    transition: all 0.3s ease;
}
.info-box h3 { 
    font-size: clamp(1rem, 4vw, 1.15rem); 
    color: var(--text-tertiary); 
    margin-bottom: 8px;
}
.info-box p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-tertiary); 
    line-height: 1.6;
}
.back-link { 
    display: inline-block; 
    margin-top: 16px; 
    color: #667eea; 
    text-decoration: none; 
    font-weight: 600; 
    font-size: clamp(0.9rem, 3vw, 1rem);
}
.back-link:hover { 
    text-decoration: underline; 
}
article p, article ul li {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
/* FAQ Accordion Styles */
.faq-item {
    margin-bottom: 15px;
    background: var(--card-bg);
    border-left: 4px solid #667eea;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}
.faq-question {
    padding: 18px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    transition: all 0.3s ease;
}
.faq-question:hover {
    background: var(--input-bg);
}
.faq-question h3 {
    font-size: clamp(0.95rem, 3.5vw, 1.05rem);
    color: var(--text-tertiary);
    margin: 0;
    flex: 1;
}
.faq-icon {
    font-size: 1.2rem;
    color: #667eea;
    transition: transform 0.3s ease;
    margin-left: 15px;
}
.faq-item.active .faq-icon {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
    padding: 0 20px;
}
.faq-item.active .faq-answer {
    max-height: 1000px;
    padding: 0 20px 18px 20px;
}
.faq-answer p {
    line-height: 1.8;
    color: var(--text-tertiary);
    margin: 0;
}
@media (max-width: 480px) {
    body { padding: 8px; }
    .container { padding: 20px 16px; border-radius: 12px; }
    h1 { margin-bottom: 6px; }
    .subtitle { margin-bottom: 20px; }
    .input-group { margin-bottom: 16px; }
    .btn { padding: 13px; }
    .result { padding: 20px 16px; margin-top: 20px; }
    .result-card { padding: 14px; }
    .info-box { padding: 14px; }
    .header-controls { top: 10px; right: 10px; gap: 8px; }
    .back-btn, .dark-mode-toggle { width: 45px; height: 45px; font-size: 1.1rem; }
}
@media (min-width: 768px) {
    body { padding: 20px; }
    .container { padding: 40px; }
}
    
/* Chat Widget Styles */
.chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}
.chat-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
    position: relative;
}
.chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.chat-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff4757;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    animation: bounce 1s infinite;
}
@keyframes pulse {
    0%, 100% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4); }
    50% { box-shadow: 0 4px 30px rgba(102, 126, 234, 0.7); }
}
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.chat-window {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 350px;
    height: 500px;
    background: var(--container-bg);
    border-radius: 16px;
    box-shadow: 0 8px 40px var(--shadow);
    display: none;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}
.chat-window.active {
    display: flex;
}
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.chat-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 15px;
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.chat-header h4 {
    margin: 0;
    font-size: 1rem;
    color: white;
}
.chat-close {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}
.chat-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}
.chat-message {
    margin-bottom: 15px;
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.chat-message.bot .message-content {
    background: var(--card-bg);
    padding: 12px;
    border-radius: 12px;
    color: var(--text-tertiary);
}
.chat-message.user .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 12px;
    border-radius: 12px;
    color: white;
    margin-left: auto;
    max-width: 80%;
}
.message-content ul {
    margin: 10px 0 0 20px;
    line-height: 1.8;
}
.chat-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
}
.chat-footer input {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: var(--input-bg);
    color: var(--text-primary);
}
.chat-footer button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}
.chat-footer button:hover {
    transform: scale(1.1);
}

/* Analytics Dashboard Styles */
.analytics-toggle {
    position: fixed;
    bottom: 100px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    z-index: 9998;
    animation: slideInRight 0.5s ease;
}
@keyframes slideInRight {
    from { transform: translateX(100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
.analytics-toggle:hover {
    transform: translateX(-5px);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.analytics-dashboard {
    position: fixed;
    top: 0;
    right: -100%;
    width: 450px;
    height: 100vh;
    background: var(--container-bg);
    box-shadow: -5px 0 30px var(--shadow);
    z-index: 10000;
    overflow-y: auto;
    transition: right 0.4s ease;
}
.analytics-dashboard.active {
    right: 0;
}
.analytics-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 10;
}
.analytics-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: white;
}
.analytics-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s;
}
.analytics-close:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
}
.analytics-content {
    padding: 20px;
}
.analytics-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px var(--shadow);
    animation: fadeInUp 0.5s ease;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.analytics-card h4 {
    color: var(--text-tertiary);
    margin-bottom: 15px;
    font-size: 1.1rem;
}
.stat-row {
    display: flex;
    gap: 15px;
    justify-content: space-between;
}
.stat-item {
    flex: 1;
    text-align: center;
    padding: 15px;
    background: var(--input-bg);
    border-radius: 8px;
}
.stat-value {
    font-size: 2rem;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
}
.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.chart-container {
    position: relative;
    height: 200px;
}
.chart-container canvas {
    max-height: 100%;
}

@media (max-width: 480px) {
    .chat-window {
        width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        height: 450px;
    }
    .analytics-dashboard {
        width: 100%;
    }
    .analytics-toggle {
        bottom: 95px;
        font-size: 0.9rem;
        padding: 10px 16px;
    }
    .chat-button {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
    }
}
    </style>
</head>
<body>
<!-- Enhanced Header with Dark Mode and Back Button -->
<div class="header-controls">
    <a href="javascript:history.back()" class="back-btn" title="Go Back">
        <i class="fas fa-arrow-left"></i>
    </a>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        <i class="fas fa-moon"></i>
    </button>
</div>
    <div class="container">
        <h1><i class="fas fa-heartbeat"></i> Target Heart Rate Calculator</h1>
        <p class="subtitle">Calculate target HR zones using Karvonen formula</p>
        <div class="input-group"><label>Age</label><input type="number" id="age" value="30" min="18" max="100"></div><div class="input-group"><label>Resting Heart Rate (bpm)</label><input type="number" id="rhr" value="60" min="30" max="100"></div><div class="input-group"><label>Intensity Level</label><select id="intensity"><option value="0.5">50% - Very Light</option><option value="0.6">60% - Light</option><option value="0.7">70% - Moderate</option><option value="0.8">80% - Hard</option><option value="0.9">90% - Very Hard</option></select></div>
        <button class="btn" onclick="calculate()"><i class="fas fa-calculator"></i> Calculate</button>
        <div class="result" id="result">
            <div class="result-value" id="resultValue">0</div>
            <div class="result-card" id="resultDetails"></div>
            <div id="actionButtons" style="display: none; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="downloadPDF()" style="flex: 1; background: #4caf50;"><i class="fas fa-file-pdf"></i> Download Report</button>
                <button class="btn share-btn" onclick="toggleShareMenu()" style="flex: 1; background: #2196f3;"><i class="fas fa-share-alt"></i> Share</button>
            </div>
            
            <div class="share-menu" id="shareMenu" style="display: none; position: absolute; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 10px; box-shadow: 0 4px 15px var(--shadow); z-index: 100;">
                <button onclick="shareWhatsApp()" style="display: block; width: 100%; padding: 8px; text-align: left; background: none; border: none; color: var(--text-primary); cursor: pointer;"><i class="fab fa-whatsapp" style="color: #25D366; margin-right: 8px;"></i> WhatsApp</button>
                <button onclick="shareTwitter()" style="display: block; width: 100%; padding: 8px; text-align: left; background: none; border: none; color: var(--text-primary); cursor: pointer;"><i class="fab fa-twitter" style="color: #1DA1F2; margin-right: 8px;"></i> Twitter</button>
                <button onclick="shareFacebook()" style="display: block; width: 100%; padding: 8px; text-align: left; background: none; border: none; color: var(--text-primary); cursor: pointer;"><i class="fab fa-facebook" style="color: #1877F2; margin-right: 8px;"></i> Facebook</button>
                <button onclick="copyLink()" style="display: block; width: 100%; padding: 8px; text-align: left; background: none; border: none; color: var(--text-primary); cursor: pointer;"><i class="fas fa-link" style="color: #666; margin-right: 8px;"></i> Copy Link</button>
            </div>
        </div>
        <div class="info-box"><h3><i class="fas fa-info-circle"></i> About This Calculator</h3><p>Karvonen Formula: Target HR = ((Max HR - Resting HR) * Intensity%) + Resting HR. Provides personalized training zones based on heart rate reserve.</p></div>
        
    </div>

    <!-- Rich Content Section -->
    <div class="container" style="margin-top: 30px;">
        <article>
            <h2 style="color: #667eea; margin-bottom: 20px;">Understanding Target Heart Rate Zones</h2>
            
            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Why Calculate Target Heart Rate?</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Training at the right intensity is crucial for achieving your fitness goals safely and effectively. Your target heart rate zone helps you monitor your exercise intensity. Whether you want to burn fat, improve endurance, or boost athletic performance, staying within your target zone ensures you're working hard enough to see results without overtraining.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">The Karvonen Formula</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    This calculator uses the Karvonen Formula, which is considered more accurate than the standard "220 minus age" method because it takes your resting heart rate into account.
                </p>
                <div style="background: #f8f9fa; padding: 15px; border-left: 4px solid #667eea; margin: 15px 0;">
                    <strong>Formula:</strong><br>
                    Target HR = ((Max HR - Resting HR) Ã— Intensity%) + Resting HR<br>
                    <em>Where Max HR = 220 - Age</em>
                </div>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Heart Rate Training Zones</h3>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>50-60% (Very Light):</strong> Warm-up, recovery, and overall health improvement. Good for beginners.</li>
                    <li><strong>60-70% (Light):</strong> Fat burning zone. Improves basic endurance and muscle tone.</li>
                    <li><strong>70-80% (Moderate):</strong> Aerobic fitness zone. Improves cardiovascular system and respiratory rate.</li>
                    <li><strong>80-90% (Hard):</strong> Anaerobic zone. Increases maximum performance capacity for shorter sessions.</li>
                    <li><strong>90-100% (Maximum):</strong> VO2 Max zone. For athletic interval training. Consult a doctor before training here.</li>
                </ul>
            </section>
        </article>
    </div>

    <!-- FAQ Section -->
    <div class="container" style="margin-top: 30px;">
        <h2 style="color: #667eea; margin-bottom: 25px; text-align: center;">Frequently Asked Questions</h2>
        
        <div class="faq-item"><div class="faq-question">
            <h3>1. How do I measure my heart rate during exercise?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                You can use a heart rate monitor (chest strap or smartwatch) for continuous tracking. Alternatively, stop momentarily, place two fingers on your wrist or neck, count beats for 10 seconds, and multiply by 6.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>2. Which zone is best for weight loss?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                The "Fat Burning Zone" is typically 60-70% of your maximum heart rate. In this zone, a higher percentage of calories burned comes from fat. However, higher intensity zones burn more total calories in the same amount of time.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>3. Should I always train in the same zone?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                No. A balanced fitness program often includes workouts in different zones. For example, long steady runs in the aerobic zone (70-80%) and shorter interval sessions in the anaerobic zone (80-90%).
            </p></div></div>
    </div>

<!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>How to use this calculator</li>
                        <li>Understanding your results</li>
                        <li>Health recommendations</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Zone Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script>
    // Dark Mode Toggle
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDark);
        
        // Update chart colors if charts are initialized
        if (typeof Chart !== 'undefined') {
            updateChartsTheme(isDark);
        }
    }

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark-mode');
    }

    // FAQ Accordion
    document.querySelectorAll('.faq-question').forEach(question => {
        question.addEventListener('click', () => {
            const item = question.parentElement;
            const isActive = item.classList.contains('active');
            
            // Close all other items
            document.querySelectorAll('.faq-item').forEach(otherItem => {
                otherItem.classList.remove('active');
            });
            
            // Toggle current item
            if (!isActive) {
                item.classList.add('active');
            }
        });
    });

    function calculate() {
        const age = parseFloat(document.getElementById('age').value);
        const rhr = parseFloat(document.getElementById('rhr').value);
        const intensity = parseFloat(document.getElementById('intensity').value);
        
        if (!age || !rhr) {
            alert('Please enter valid values for Age and Resting Heart Rate.');
            return;
        }
        
        // Karvonen Formula
        const maxHR = 220 - age;
        const hrReserve = maxHR - rhr;
        const targetHR = Math.round((hrReserve * intensity) + rhr);
        
        // Determine zone name
        let zoneName = '';
        let description = '';
        let color = '';
        
        if (intensity <= 0.5) {
            zoneName = 'Very Light (Warm up)';
            description = 'Good for beginners, warm-up, and recovery.';
            color = '#8bc34a';
        } else if (intensity <= 0.6) {
            zoneName = 'Light (Fat Burn)';
            description = 'Improves basic endurance and fat burning.';
            color = '#ffeb3b';
        } else if (intensity <= 0.7) {
            zoneName = 'Moderate (Aerobic)';
            description = 'Improves cardiovascular fitness.';
            color = '#ff9800';
        } else if (intensity <= 0.8) {
            zoneName = 'Hard (Anaerobic)';
            description = 'Increases maximum performance capacity.';
            color = '#ff5722';
        } else {
            zoneName = 'Maximum (VO2 Max)';
            description = 'For athletic interval training. Use caution.';
            color = '#f44336';
        }
        
        const resultDiv = document.getElementById('result');
        const resultValue = document.getElementById('resultValue');
        const resultDetails = document.getElementById('resultDetails');
        
        resultDiv.style.display = 'block';
        resultValue.textContent = targetHR + ' bpm';
        resultValue.style.color = color;
        
        resultDetails.innerHTML = `
            <h3>Target Zone: <span style="color: ${color}">${zoneName}</span></h3>
            <p>${description}</p>
            <div style="margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                <strong>Max Heart Rate:</strong> ${maxHR} bpm<br>
                <strong>Heart Rate Reserve:</strong> ${hrReserve} bpm
            </div>
        `;
        
        showActionButtons();
        
        // Scroll to result
        resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    // Chat Widget Functions
    let chatOpen = false;

    function toggleChat() {
        chatOpen = !chatOpen;
        const chatWindow = document.getElementById('chatWindow');
        if (chatOpen) {
            chatWindow.classList.add('active');
        } else {
            chatWindow.classList.remove('active');
        }
    }

    function getSmartResponse(userMessage) {
        const message = userMessage.toLowerCase();
        
        const chatResponses = {
            "usage": { keywords: ["how to", "use", "calculate"], response: "Enter your age, resting heart rate, and select an intensity level. Click 'Calculate' to find your target heart rate." },
            "results": { keywords: ["result", "score", "meaning", "zone"], response: "Your target heart rate is the optimal beats per minute for your selected training intensity." },
            "health": { keywords: ["health", "advice", "doctor", "fat burn"], response: "For fat burning, aim for the 60-70% intensity zone. For cardio fitness, aim for 70-80%." },
            "download": { keywords: ["download", "pdf", "save"], response: "You can download your results as a PDF using the 'Download Report' button in the results section." }
        };

        for (const [category, data] of Object.entries(chatResponses)) {
            if (data.keywords.some(keyword => message.includes(keyword))) {
                return data.response;
            }
        }
        
        if (message.includes('thank') || message.includes('thanks')) {
            return "You're welcome! Happy training!";
        }
        
        if (message.includes('hello') || message.includes('hi')) {
            return "Hello! I can help you with your target heart rate zones. What would you like to know?";
        }
        
        return "I can help you with:\n- Using this calculator\n- Understanding HR zones\n- Training advice\n- Downloading reports\n\nWhat's on your mind?";
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;
        
        const chatBody = document.querySelector('.chat-body');
        
        const userMsg = document.createElement('div');
        userMsg.className = 'chat-message user';
        userMsg.innerHTML = `<div class="message-content"><p>${message}</p></div>`;
        chatBody.appendChild(userMsg);
        
        input.value = '';
        chatBody.scrollTop = chatBody.scrollHeight;
        
        setTimeout(() => {
            const botResponse = getSmartResponse(message);
            const botMsg = document.createElement('div');
            botMsg.className = 'chat-message bot';
            botMsg.innerHTML = `<div class="message-content"><p>${botResponse}</p></div>`;
            chatBody.appendChild(botMsg);
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 800);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const chatInput = document.getElementById('chatInput');
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        }
    });

    // Analytics Dashboard Functions
    let analyticsOpen = false;
    function toggleAnalytics() {
        analyticsOpen = !analyticsOpen;
        const dashboard = document.getElementById('analyticsDashboard');
        if (analyticsOpen) {
            dashboard.classList.add('active');
            setTimeout(() => {
                animateStats();
                initCharts();
            }, 300);
        } else {
            dashboard.classList.remove('active');
        }
    }

    function animateStats() {
        const stats = document.querySelectorAll('.stat-value');
        stats.forEach(stat => {
            const target = parseInt(stat.dataset.target);
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    stat.textContent = target.toLocaleString();
                    clearInterval(timer);
                } else {
                    stat.textContent = Math.floor(current).toLocaleString();
                }
            }, 30);
        });
    }

    function initCharts() {
        const pieCanvas = document.getElementById('pieChart');
        if (pieCanvas && !pieCanvas.dataset.initialized) {
            pieCanvas.dataset.initialized = 'true';
            drawPieChart(pieCanvas);
        }
        
        const lineCanvas = document.getElementById('lineChart');
        if (lineCanvas && !lineCanvas.dataset.initialized) {
            lineCanvas.dataset.initialized = 'true';
            drawLineChart(lineCanvas);
        }
        
        const barCanvas = document.getElementById('barChart');
        if (barCanvas && !barCanvas.dataset.initialized) {
            barCanvas.dataset.initialized = 'true';
            drawBarChart(barCanvas);
        }
    }

    function drawPieChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 300;
        canvas.height = 200;
        
        const data = [
            { label: 'Fat Burn', value: 40, color: '#ffeb3b' },
            { label: 'Aerobic', value: 35, color: '#ff9800' },
            { label: 'Anaerobic', value: 15, color: '#ff5722' },
            { label: 'Other', value: 10, color: '#8bc34a' }
        ];
        
        let currentAngle = -Math.PI / 2;
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 70;
        
        data.forEach((item, index) => {
            setTimeout(() => {
                const sliceAngle = (item.value / 100) * 2 * Math.PI;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.closePath();
                ctx.fillStyle = item.color;
                ctx.fill();
                
                const labelAngle = currentAngle + sliceAngle / 2;
                const labelX = centerX + Math.cos(labelAngle) * (radius + 30);
                const labelY = centerY + Math.sin(labelAngle) * (radius + 30);
                
                ctx.fillStyle = item.color;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(item.value + '%', labelX, labelY);
                
                currentAngle += sliceAngle;
            }, index * 200);
        });
    }

    function drawLineChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 200;
        
        const data = [135, 142, 138, 145, 150, 148, 140];
        const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        
        const padding = 30;
        const chartWidth = canvas.width - padding * 2;
        const chartHeight = canvas.height - padding * 2;
        const max = 160;
        const min = 120;
        
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(padding, padding);
        ctx.lineTo(padding, canvas.height - padding);
        ctx.lineTo(canvas.width - padding, canvas.height - padding);
        ctx.stroke();
        
        let progress = 0;
        function animate() {
            if (progress >= 1) return;
            progress += 0.02;
            
            ctx.clearRect(padding + 1, 0, chartWidth, canvas.height - padding);
            
            ctx.strokeStyle = '#764ba2';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            data.forEach((value, index) => {
                const x = padding + (chartWidth / (data.length - 1)) * index;
                const y = canvas.height - padding - ((value - min) / (max - min)) * chartHeight * progress;
                
                if (index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
                
                ctx.fillStyle = '#667eea';
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                if (progress > 0.9) {
                    ctx.fillStyle = '#666';
                    ctx.font = '11px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(labels[index], x, canvas.height - padding + 15);
                }
            });
            
            ctx.stroke();
            requestAnimationFrame(animate);
        }
        animate();
    }

    function drawBarChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 200;
        
        const data = [
            { label: '18-30', value: 155 },
            { label: '31-45', value: 145 },
            { label: '46-60', value: 135 },
            { label: '60+', value: 125 }
        ];
        
        const padding = 30;
        const barWidth = (canvas.width - padding * 2) / data.length - 10;
        const maxValue = 180;
        
        let progress = 0;
        function animate() {
            if (progress >= 1) return;
            progress += 0.02;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            data.forEach((item, index) => {
                const x = padding + index * (barWidth + 10);
                const barHeight = ((item.value / maxValue) * (canvas.height - padding * 2)) * progress;
                const y = canvas.height - padding - barHeight;
                
                const gradient = ctx.createLinearGradient(0, y, 0, canvas.height - padding);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(x, y, barWidth, barHeight);
                
                if (progress > 0.9) {
                    ctx.fillStyle = '#666';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(item.label, x + barWidth / 2, canvas.height - padding + 15);
                    ctx.fillText(item.value, x + barWidth / 2, y - 5);
                }
            });
            
            requestAnimationFrame(animate);
        }
        animate();
    }

    // Download PDF functionality
    function downloadPDF() {
        const resultValue = document.getElementById('resultValue');
        const resultDetails = document.getElementById('resultDetails');
        
        if (!resultValue || resultValue.textContent === '0') {
            alert('Please calculate your results first!');
            return;
        }
        
        const calculatorTitle = document.querySelector('h1').textContent;
        const result = resultValue.textContent;
        const details = resultDetails.innerText;
        
        const pdfContent = `
${calculatorTitle}
${'='.repeat(50)}

Result: ${result}

${details}

Generated on: ${new Date().toLocaleDateString()}
Source: CalculatorLoop.com

Note: This is an educational tool. Consult healthcare 
professionals for medical advice.
        `;
        
        const blob = new Blob([pdfContent], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${calculatorTitle.replace(/\s+/g, '-')}-Report.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        
        showToast(' Report downloaded successfully!', 'success');
    }

    // Share functionality
    let shareMenuOpen = false;
    function toggleShareMenu() {
        shareMenuOpen = !shareMenuOpen;
        const menu = document.getElementById('shareMenu');
        if (shareMenuOpen) {
            menu.style.display = 'block';
        } else {
            menu.style.display = 'none';
        }
    }

    function shareWhatsApp() {
        const result = document.getElementById('resultValue')?.textContent || 'Check this out!';
        const calculatorTitle = document.querySelector('h1').textContent;
        const text = `${calculatorTitle}\nMy Result: ${result}\n\nCalculate yours: ${window.location.href}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        toggleShareMenu();
    }

    function shareTwitter() {
        const calculatorTitle = document.querySelector('h1').textContent;
        const text = `I just used ${calculatorTitle} - Get your health insights now!`;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
        toggleShareMenu();
    }

    function shareFacebook() {
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
        toggleShareMenu();
    }

    function copyLink() {
        navigator.clipboard.writeText(window.location.href).then(() => {
            showToast(' Link copied to clipboard!', 'success');
            toggleShareMenu();
        });
    }

    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#4caf50' : '#667eea'};
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 10001;
            animation: slideInRight 0.3s ease;
            font-weight: 600;
        `;
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
    }

    function showActionButtons() {
        const actionBtns = document.getElementById('actionButtons');
        if (actionBtns) {
            actionBtns.style.display = 'flex';
        }
    }

    document.addEventListener('click', (e) => {
        const shareMenu = document.getElementById('shareMenu');
        const shareBtn = document.querySelector('.share-btn');
        if (shareMenu && shareMenuOpen && !shareMenu.contains(e.target) && !shareBtn.contains(e.target)) {
            toggleShareMenu();
        }
    });
</script>
</body>
</html>

