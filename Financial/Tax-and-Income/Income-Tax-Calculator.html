<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Income Tax Calculator 2025-26 | India Tax Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1600px; width: 100%; background: white; border-radius: 25px; box-shadow: 0 25px 70px rgba(0,0,0,0.3); padding: 50px; margin: 0 auto; }
        h1 { color: #1a1a2e; text-align: center; margin-bottom: 15px; font-size: 2.8rem; font-weight: 800; }
        .subtitle { text-align: center; color: #666; margin-bottom: 40px; font-size: 1.2rem; }
        .regime-selector { display: flex; justify-content: center; gap: 20px; margin-bottom: 40px; }
        .regime-btn { padding: 15px 40px; border: 3px solid #667eea; background: white; color: #667eea; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s; }
        .regime-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .layout { display: grid; grid-template-columns: 480px 1fr; gap: 40px; margin-top: 40px; }
        .input-section { background: #f8f9fa; padding: 35px; border-radius: 20px; height: fit-content; max-height: 85vh; overflow-y: auto; }
        .section-title { color: #1a1a2e; margin: 25px 0 20px 0; font-size: 1.3rem; font-weight: 700; border-bottom: 3px solid #667eea; padding-bottom: 10px; }
        .input-group { margin-bottom: 22px; }
        label { display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.95rem; }
        input, select { width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1rem; transition: all 0.3s; }
        input:focus, select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-size: 1.1rem; cursor: pointer; margin-top: 25px; font-weight: 700; box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5); }
        .results-section { display: flex; flex-direction: column; gap: 30px; }
        .tax-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 50px; border-radius: 25px; color: white; text-align: center; box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4); }
        .tax-amount { font-size: 4.5rem; font-weight: 900; margin: 20px 0; }
        .tax-status { font-size: 1.3rem; padding: 12px 30px; background: rgba(255,255,255,0.2); border-radius: 50px; display: inline-block; margin-top: 15px; }
        .summary-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .summary-card { background: white; padding: 28px; border-radius: 18px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); text-align: center; border-top: 5px solid #667eea; }
        .summary-card h3 { font-size: 0.85rem; color: #666; margin-bottom: 12px; text-transform: uppercase; }
        .summary-value { font-size: 2rem; font-weight: 800; color: #1a1a2e; }
        .chart-section { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .chart-card { background: white; padding: 30px; border-radius: 18px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
        .chart-card h3 { color: #1a1a2e; margin-bottom: 20px; font-size: 1.3rem; font-weight: 700; }
        .chart-wrapper { height: 350px; position: relative; }
        .breakdown-section { background: white; border-radius: 18px; padding: 35px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
        .table-container { border-radius: 12px; border: 2px solid #e9ecef; overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 18px; text-align: left; font-weight: 700; }
        td { padding: 18px; border-bottom: 1px solid #f0f0f0; }
        tr:hover { background: #f8f9fa; }
        .slab-row { font-weight: 600; }
        .total-row { background: #f0f0f0; font-weight: 800; font-size: 1.1rem; }
        .comparison-section { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 35px; border-radius: 18px; border: 3px solid #667eea; }
        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px; }
        .comparison-item { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .comparison-item h4 { color: #667eea; margin-bottom: 15px; font-size: 1.2rem; }
        .comparison-value { font-size: 2.5rem; font-weight: 800; color: #1a1a2e; margin: 15px 0; }
        .savings-badge { background: #10b981; color: white; padding: 8px 20px; border-radius: 50px; font-weight: 700; display: inline-block; margin-top: 10px; }
        .info-box { background: #e7f3ff; border-left: 5px solid #667eea; padding: 20px; margin-top: 25px; border-radius: 12px; }
        .info-box h4 { color: #667eea; margin-bottom: 10px; font-weight: 700; }
        .info-box ul { margin-left: 20px; color: #555; line-height: 1.8; }
        .deduction-item { display: flex; justify-content: space-between; padding: 12px; background: #f8f9fa; margin-bottom: 8px; border-radius: 8px; }
        .back-link { display: inline-block; margin-top: 40px; color: #667eea; text-decoration: none; font-weight: 700; font-size: 1.1rem; }
        @media (max-width: 1400px) { .layout { grid-template-columns: 1fr; } .summary-grid { grid-template-columns: repeat(2, 1fr); } .chart-section { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-file-invoice-dollar"></i> Income Tax Calculator 2025-26</h1>
        <p class="subtitle">Calculate your income tax with new and old regime comparison</p>
        
        <div class="regime-selector">
            <button class="regime-btn active" onclick="selectRegime('new')" id="newRegimeBtn">
                <i class="fas fa-star"></i> New Tax Regime (FY 2025-26)
            </button>
            <button class="regime-btn" onclick="selectRegime('old')" id="oldRegimeBtn">
                <i class="fas fa-history"></i> Old Tax Regime
            </button>
        </div>

        <div class="layout">
            <div class="input-section">
                <h2 class="section-title"><i class="fas fa-user-tie"></i> Personal Details</h2>
                <div class="input-group">
                    <label><i class="fas fa-birthday-cake"></i> Age</label>
                    <select id="ageGroup">
                        <option value="below60">Below 60 years</option>
                        <option value="60to80">60 to 80 years (Senior Citizen)</option>
                        <option value="above80">Above 80 years (Super Senior Citizen)</option>
                    </select>
                </div>

                <h2 class="section-title"><i class="fas fa-rupee-sign"></i> Income Details</h2>
                <div class="input-group">
                    <label>Basic Salary (Annual)</label>
                    <input type="number" id="basicSalary" value="600000" placeholder="600000">
                </div>
                <div class="input-group">
                    <label>HRA Received</label>
                    <input type="number" id="hra" value="100000" placeholder="100000">
                </div>
                <div class="input-group">
                    <label>Other Allowances</label>
                    <input type="number" id="allowances" value="50000" placeholder="50000">
                </div>
                <div class="input-group">
                    <label>Bonus / Incentives</label>
                    <input type="number" id="bonus" value="0" placeholder="0">
                </div>
                <div class="input-group">
                    <label>Income from Other Sources</label>
                    <input type="number" id="otherIncome" value="0" placeholder="0">
                </div>
                <div class="input-group">
                    <label>Interest Income</label>
                    <input type="number" id="interestIncome" value="0" placeholder="0">
                </div>

                <h2 class="section-title"><i class="fas fa-hand-holding-usd"></i> Deductions (Old Regime)</h2>
                <div class="input-group">
                    <label>80C: PPF, ELSS, Life Insurance (Max ₹1.5L)</label>
                    <input type="number" id="section80C" value="150000" placeholder="150000" max="150000">
                </div>
                <div class="input-group">
                    <label>80D: Health Insurance Premium</label>
                    <input type="number" id="section80D" value="25000" placeholder="25000">
                </div>
                <div class="input-group">
                    <label>80CCD(1B): NPS (Max ₹50K)</label>
                    <input type="number" id="nps" value="0" placeholder="50000" max="50000">
                </div>
                <div class="input-group">
                    <label>HRA Exemption</label>
                    <input type="number" id="hraExemption" value="80000" placeholder="80000">
                </div>
                <div class="input-group">
                    <label>Standard Deduction</label>
                    <input type="number" id="standardDeduction" value="50000" readonly>
                </div>
                <div class="input-group">
                    <label>Professional Tax</label>
                    <input type="number" id="professionalTax" value="2400" placeholder="2400">
                </div>
                <div class="input-group">
                    <label>Home Loan Interest (24b)</label>
                    <input type="number" id="homeLoan" value="0" placeholder="200000">
                </div>
                <div class="input-group">
                    <label>Other Deductions</label>
                    <input type="number" id="otherDeductions" value="0" placeholder="0">
                </div>

                <h2 class="section-title"><i class="fas fa-city"></i> Additional Details</h2>
                <div class="input-group">
                    <label>City Type (for HRA calculation)</label>
                    <select id="cityType">
                        <option value="metro">Metro City</option>
                        <option value="nonmetro">Non-Metro City</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Rent Paid (Annual)</label>
                    <input type="number" id="rentPaid" value="0" placeholder="120000">
                </div>

                <button class="btn" onclick="calculateTax()"><i class="fas fa-calculator"></i> Calculate Tax</button>

                <div class="info-box">
                    <h4><i class="fas fa-info-circle"></i> Tax Slabs 2025-26 (New Regime)</h4>
                    <ul>
                        <li>₹0 - ₹3L: NIL</li>
                        <li>₹3L - ₹7L: 5%</li>
                        <li>₹7L - ₹10L: 10%</li>
                        <li>₹10L - ₹12L: 15%</li>
                        <li>₹12L - ₹15L: 20%</li>
                        <li>Above ₹15L: 30%</li>
                    </ul>
                </div>
            </div>

            <div class="results-section">
                <div class="tax-card">
                    <h2><i class="fas fa-calculator"></i> Your Tax Liability</h2>
                    <div class="tax-amount" id="totalTax">₹0</div>
                    <div class="tax-status" id="taxStatus">New Tax Regime</div>
                    <p style="margin-top: 20px; font-size: 1.1rem; opacity: 0.9;">Effective Tax Rate: <strong id="effectiveRate">0%</strong></p>
                </div>

                <div class="summary-grid">
                    <div class="summary-card">
                        <h3><i class="fas fa-wallet"></i> Gross Income</h3>
                        <div class="summary-value" id="grossIncome">₹0</div>
                    </div>
                    <div class="summary-card" style="border-top-color: #10b981;">
                        <h3><i class="fas fa-hand-holding-usd"></i> Total Deductions</h3>
                        <div class="summary-value" id="totalDeductions">₹0</div>
                    </div>
                    <div class="summary-card" style="border-top-color: #f5576c;">
                        <h3><i class="fas fa-money-bill-wave"></i> Taxable Income</h3>
                        <div class="summary-value" id="taxableIncome">₹0</div>
                    </div>
                    <div class="summary-card" style="border-top-color: #ffc107;">
                        <h3><i class="fas fa-percent"></i> Tax + Cess</h3>
                        <div class="summary-value" id="taxWithCess">₹0</div>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-pie"></i> Income Breakdown</h3>
                        <div class="chart-wrapper"><canvas id="incomeChart"></canvas></div>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-bar"></i> Tax Slab Distribution</h3>
                        <div class="chart-wrapper"><canvas id="taxSlabChart"></canvas></div>
                    </div>
                </div>

                <div class="comparison-section">
                    <h2 style="color: #1a1a2e; margin-bottom: 20px;"><i class="fas fa-balance-scale"></i> Regime Comparison</h2>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <h4><i class="fas fa-star"></i> New Tax Regime</h4>
                            <div class="comparison-value" id="newRegimeTax">₹0</div>
                            <p style="color: #666;">Lower rates, no deductions</p>
                        </div>
                        <div class="comparison-item">
                            <h4><i class="fas fa-history"></i> Old Tax Regime</h4>
                            <div class="comparison-value" id="oldRegimeTax">₹0</div>
                            <p style="color: #666;">Higher rates, with deductions</p>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 25px;">
                        <div class="savings-badge" id="savingsBadge">
                            <i class="fas fa-piggy-bank"></i> Calculate to see savings
                        </div>
                    </div>
                </div>

                <div class="breakdown-section">
                    <h3><i class="fas fa-table"></i> Tax Calculation Breakdown</h3>
                    <div class="table-container">
                        <table id="taxBreakdownTable">
                            <thead>
                                <tr>
                                    <th>Tax Slab</th>
                                    <th>Income in Slab</th>
                                    <th>Tax Rate</th>
                                    <th>Tax Amount</th>
                                </tr>
                            </thead>
                            <tbody id="taxBreakdownBody">
                                <tr><td colspan="4" style="text-align: center; padding: 30px;">Calculate to see breakdown</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="breakdown-section">
                    <h3><i class="fas fa-list-ul"></i> Deduction Summary</h3>
                    <div id="deductionSummary"></div>
                </div>
            </div>
        </div>

        <a href="../../Ui.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Calculator Hub</a>
    </div>

    <script>
        let currentRegime = 'new';
        let incomeChart = null;
        let taxSlabChart = null;

        function selectRegime(regime) {
            currentRegime = regime;
            document.getElementById('newRegimeBtn').classList.toggle('active', regime === 'new');
            document.getElementById('oldRegimeBtn').classList.toggle('active', regime === 'old');
            calculateTax();
        }

        function fmt(n) {
            if (n >= 10000000) return '₹' + (n / 10000000).toFixed(2) + ' Cr';
            if (n >= 100000) return '₹' + (n / 100000).toFixed(2) + ' L';
            return '₹' + Math.round(n).toLocaleString('en-IN');
        }

        function calculateTax() {
            const basic = +document.getElementById('basicSalary').value || 0;
            const hra = +document.getElementById('hra').value || 0;
            const allowances = +document.getElementById('allowances').value || 0;
            const bonus = +document.getElementById('bonus').value || 0;
            const otherIncome = +document.getElementById('otherIncome').value || 0;
            const interestIncome = +document.getElementById('interestIncome').value || 0;

            const grossIncome = basic + hra + allowances + bonus + otherIncome + interestIncome;
            document.getElementById('grossIncome').textContent = fmt(grossIncome);

            // Calculate both regimes
            const newTax = calculateNewRegime(grossIncome);
            const oldTax = calculateOldRegime(grossIncome);

            // Display based on selected regime
            const selectedTax = currentRegime === 'new' ? newTax : oldTax;
            
            document.getElementById('totalTax').textContent = fmt(selectedTax.totalTax);
            document.getElementById('taxWithCess').textContent = fmt(selectedTax.totalTax);
            document.getElementById('taxableIncome').textContent = fmt(selectedTax.taxableIncome);
            document.getElementById('totalDeductions').textContent = fmt(selectedTax.totalDeductions);
            document.getElementById('effectiveRate').textContent = ((selectedTax.totalTax / grossIncome) * 100).toFixed(2) + '%';
            document.getElementById('taxStatus').textContent = currentRegime === 'new' ? 'New Tax Regime' : 'Old Tax Regime';

            // Comparison
            document.getElementById('newRegimeTax').textContent = fmt(newTax.totalTax);
            document.getElementById('oldRegimeTax').textContent = fmt(oldTax.totalTax);
            
            const savings = Math.abs(newTax.totalTax - oldTax.totalTax);
            const better = newTax.totalTax < oldTax.totalTax ? 'New' : 'Old';
            document.getElementById('savingsBadge').innerHTML = `<i class="fas fa-piggy-bank"></i> Save ${fmt(savings)} with ${better} Regime`;

            // Update breakdown table
            updateBreakdownTable(selectedTax);
            updateDeductionSummary(selectedTax);
            updateCharts(grossIncome, selectedTax);
        }

        function calculateNewRegime(gross) {
            const standardDed = 75000; // New regime standard deduction
            const taxableIncome = Math.max(0, gross - standardDed);
            
            const slabs = [
                { limit: 300000, rate: 0 },
                { limit: 700000, rate: 0.05 },
                { limit: 1000000, rate: 0.10 },
                { limit: 1200000, rate: 0.15 },
                { limit: 1500000, rate: 0.20 },
                { limit: Infinity, rate: 0.30 }
            ];

            let tax = 0;
            let prevLimit = 0;
            const breakdown = [];

            for (let slab of slabs) {
                const taxableInSlab = Math.min(taxableIncome, slab.limit) - prevLimit;
                if (taxableInSlab > 0) {
                    const taxInSlab = taxableInSlab * slab.rate;
                    tax += taxInSlab;
                    breakdown.push({ slab: `₹${(prevLimit/100000).toFixed(1)}L - ₹${slab.limit === Infinity ? '∞' : (slab.limit/100000).toFixed(1)+'L'}`, income: taxableInSlab, rate: (slab.rate*100).toFixed(0)+'%', tax: taxInSlab });
                }
                if (taxableIncome <= slab.limit) break;
                prevLimit = slab.limit;
            }

            const cess = tax * 0.04;
            const totalTax = tax + cess;

            return { totalTax, taxableIncome, totalDeductions: standardDed, breakdown, deductions: [{ name: 'Standard Deduction', amount: standardDed }] };
        }

        function calculateOldRegime(gross) {
            const c80C = Math.min(+document.getElementById('section80C').value || 0, 150000);
            const c80D = +document.getElementById('section80D').value || 0;
            const nps = Math.min(+document.getElementById('nps').value || 0, 50000);
            const hraEx = +document.getElementById('hraExemption').value || 0;
            const stdDed = +document.getElementById('standardDeduction').value || 50000;
            const profTax = +document.getElementById('professionalTax').value || 0;
            const homeLoan = +document.getElementById('homeLoan').value || 0;
            const other = +document.getElementById('otherDeductions').value || 0;

            const totalDed = c80C + c80D + nps + hraEx + stdDed + profTax + homeLoan + other;
            const taxableIncome = Math.max(0, gross - totalDed);

            const slabs = [
                { limit: 250000, rate: 0 },
                { limit: 500000, rate: 0.05 },
                { limit: 1000000, rate: 0.20 },
                { limit: Infinity, rate: 0.30 }
            ];

            let tax = 0;
            let prevLimit = 0;
            const breakdown = [];

            for (let slab of slabs) {
                const taxableInSlab = Math.min(taxableIncome, slab.limit) - prevLimit;
                if (taxableInSlab > 0) {
                    const taxInSlab = taxableInSlab * slab.rate;
                    tax += taxInSlab;
                    breakdown.push({ slab: `₹${(prevLimit/100000).toFixed(1)}L - ₹${slab.limit === Infinity ? '∞' : (slab.limit/100000).toFixed(1)+'L'}`, income: taxableInSlab, rate: (slab.rate*100).toFixed(0)+'%', tax: taxInSlab });
                }
                if (taxableIncome <= slab.limit) break;
                prevLimit = slab.limit;
            }

            const cess = tax * 0.04;
            const totalTax = tax + cess;

            const deductions = [
                { name: '80C (PPF/ELSS/LIC)', amount: c80C },
                { name: '80D (Health Insurance)', amount: c80D },
                { name: '80CCD(1B) (NPS)', amount: nps },
                { name: 'HRA Exemption', amount: hraEx },
                { name: 'Standard Deduction', amount: stdDed },
                { name: 'Professional Tax', amount: profTax },
                { name: 'Home Loan Interest (24b)', amount: homeLoan },
                { name: 'Other Deductions', amount: other }
            ].filter(d => d.amount > 0);

            return { totalTax, taxableIncome, totalDeductions: totalDed, breakdown, deductions };
        }

        function updateBreakdownTable(result) {
            const tbody = document.getElementById('taxBreakdownBody');
            tbody.innerHTML = '';
            
            let totalTax = 0;
            result.breakdown.forEach(row => {
                const tr = tbody.insertRow();
                tr.className = 'slab-row';
                tr.innerHTML = `
                    <td>${row.slab}</td>
                    <td>${fmt(row.income)}</td>
                    <td>${row.rate}</td>
                    <td style="color: #f5576c; font-weight: 700;">${fmt(row.tax)}</td>
                `;
                totalTax += row.tax;
            });

            const totalRow = tbody.insertRow();
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td colspan="3">Total Tax (before cess)</td>
                <td style="color: #667eea;">${fmt(totalTax)}</td>
            `;

            const cessRow = tbody.insertRow();
            cessRow.innerHTML = `
                <td colspan="3">Health & Education Cess (4%)</td>
                <td style="color: #ffc107;">${fmt(totalTax * 0.04)}</td>
            `;

            const finalRow = tbody.insertRow();
            finalRow.className = 'total-row';
            finalRow.innerHTML = `
                <td colspan="3"><strong>Final Tax Liability</strong></td>
                <td style="color: #f5576c;"><strong>${fmt(result.totalTax)}</strong></td>
            `;
        }

        function updateDeductionSummary(result) {
            const container = document.getElementById('deductionSummary');
            container.innerHTML = result.deductions.map(d => `
                <div class="deduction-item">
                    <span><strong>${d.name}</strong></span>
                    <span style="color: #10b981; font-weight: 700;">${fmt(d.amount)}</span>
                </div>
            `).join('');
        }

        function updateCharts(gross, result) {
            const ctx1 = document.getElementById('incomeChart').getContext('2d');
            if (incomeChart) incomeChart.destroy();
            incomeChart = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['Taxable Income', 'Deductions', 'Tax Liability'],
                    datasets: [{
                        data: [result.taxableIncome, result.totalDeductions, result.totalTax],
                        backgroundColor: ['#667eea', '#10b981', '#f5576c']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });

            const ctx2 = document.getElementById('taxSlabChart').getContext('2d');
            if (taxSlabChart) taxSlabChart.destroy();
            taxSlabChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: result.breakdown.map(b => b.slab),
                    datasets: [{
                        label: 'Tax Amount',
                        data: result.breakdown.map(b => b.tax),
                        backgroundColor: '#667eea'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, ticks: { callback: v => '₹' + (v/1000).toFixed(0) + 'K' } } }
                }
            });
        }

        calculateTax();
    </script>
</body>
</html>

