<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPV Calculator - Net Present Value | Investment Analysis</title>
    <meta name="description" content="Calculate Net Present Value (NPV) of investment projects. Evaluate profitability with discount rate and multiple cash flows analysis.">
    <meta name="keywords" content="npv calculator, net present value, investment analysis, discounted cash flow, dcf calculator">
        <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "NPV Calculator",
        "applicationCategory": "FinanceApplication",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "INR"},
        "aggregateRating": {"@type": "AggregateRating", "ratingValue": "4.8", "ratingCount": "2547"}
    }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-color: #06b6d4;
            --secondary-color: #0891b2;
            --accent-color: #22d3ee;
            --text-color: #1f2937;
            --light-bg: #ecfeff;
            --white: #ffffff;
            --shadow: 0 10px 20px rgba(6, 182, 212, 0.1);
            --gradient: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
        }
        
        [data-theme="dark"] {
            --primary-color: #22d3ee;
            --secondary-color: #06b6d4;
            --text-color: #f3f4f6;
            --light-bg: #1f2937;
            --white: #111827;
            --shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body {
            background-color: #f3f4f6;
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        [data-theme="dark"] body {
            background-color: #0f172a;
        }

        /* Header Styles */
        .main-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        [data-theme="dark"] .main-header {
            background: rgba(17, 24, 39, 0.95);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-self: center;
        }
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-self: end;
        }
        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        .back-btn {
            background: rgba(6, 182, 212, 0.1);
            color: var(--primary-color);
            justify-self: start;
        }
        .back-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        .theme-btn {
            background: var(--light-bg);
            color: var(--text-color);
            width: 45px;
            height: 45px;
            padding: 0;
            justify-content: center;
            border-radius: 50%;
        }
        .theme-btn:hover {
            background: #e2e8f0;
            transform: rotate(15deg);
        }
        [data-theme="dark"] .theme-btn:hover {
            background: #374151;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .input-section, .result-section {
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
        }
        [data-theme="dark"] .subtitle { color: #9ca3af; }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }

        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            background: var(--white);
            color: var(--text-color);
            transition: border-color 0.3s;
        }
        [data-theme="dark"] input {
            border-color: #374151;
            background: #1f2937;
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .cashflows-container {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        [data-theme="dark"] .cashflows-container {
            background: rgba(6, 182, 212, 0.1);
        }

        .cashflow-item {
            display: grid;
            grid-template-columns: 80px 1fr 40px;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .cashflow-item label { margin-bottom: 0; font-size: 0.9rem; }

        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.2);
        }

        .result-card {
            background: var(--gradient);
            padding: 30px;
            border-radius: 15px;
            color: white;
            text-align: center;
            margin-bottom: 25px;
        }

        .npv-amount {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 10px 0;
        }

        .decision {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .metric-card {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }
        [data-theme="dark"] .metric-card {
            background: rgba(6, 182, 212, 0.1);
        }

        .metric-card h3 {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }
        [data-theme="dark"] .metric-card h3 { color: #9ca3af; }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: transform 0.2s;
        }

        .share-btn { background: #3b82f6; color: white; }
        .download-btn { background: #8b5cf6; color: white; }
        .print-btn { background: #64748b; color: white; }

        .action-btn:hover { transform: translateY(-2px); }

        @media (max-width: 768px) {
            .calculator-grid { grid-template-columns: 1fr; }
            .header-container { grid-template-columns: 1fr; gap: 15px; text-align: center; }
            .header-actions { justify-self: center; }
            .logo { justify-self: center; margin-bottom: 10px; }
            .back-btn { justify-self: center; }
        }
        
        /* FAQ Styles */
        .faq-section { margin-top: 40px; }
        .faq-item {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s;
        }
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--text-color);
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            color: #6b7280;
            margin-top: 0;
        }
        [data-theme="dark"] .faq-answer { color: #9ca3af; }
        .faq-item.active .faq-answer {
            max-height: 500px;
            margin-top: 15px;
        }
        .faq-icon { transition: transform 0.3s; }
        .faq-item.active .faq-icon { transform: rotate(180deg); }
    </style>
    <script src="./calc-performance.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <button class="nav-btn back-btn" onclick="window.location.href='../../Ui.html'">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <a href="../../Ui.html" class="logo">
                <i class="fas fa-calculator"></i> CalculatorLoop
            </a>
            <div class="header-actions">
                <button class="nav-btn theme-btn" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <h1><i class="fas fa-funnel-dollar" style="color: var(--primary-color);"></i> NPV Calculator</h1>
        <p class="subtitle">Calculate Net Present Value for investment analysis</p>

        <div class="calculator-grid">
            <div class="input-section">
                <div class="input-group">
                    <label><i class="fas fa-rupee-sign"></i> Initial Investment (?)</label>
                    <input type="number" id="initialInvestment" value="100000" min="0" step="10000">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-percentage"></i> Discount Rate (% per year)</label>
                    <input type="number" id="discountRate" value="10" min="0" max="100" step="0.5">
                </div>
                
                <div class="cashflows-container">
                    <h3 style="color: var(--text-color); margin-bottom: 15px; font-size: 1.1rem;"><i class="fas fa-coins"></i> Cash Flows by Year</h3>
                    <div id="cashflowsList">
                        <div class="cashflow-item">
                            <label>Year 1</label>
                            <input type="number" class="cashflow" value="30000" step="1000">
                            <button class="remove-btn" onclick="removeCashflow(this)"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="cashflow-item">
                            <label>Year 2</label>
                            <input type="number" class="cashflow" value="40000" step="1000">
                            <button class="remove-btn" onclick="removeCashflow(this)"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="cashflow-item">
                            <label>Year 3</label>
                            <input type="number" class="cashflow" value="50000" step="1000">
                            <button class="remove-btn" onclick="removeCashflow(this)"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <button class="add-btn" onclick="addCashflow()"><i class="fas fa-plus"></i> Add Year</button>
                </div>
                
                <button class="btn" onclick="calc()">Calculate NPV</button>
            </div>

            <div class="result-section" id="result">
                <div class="result-card" id="npvCard">
                    <h2>Net Present Value</h2>
                    <div class="npv-amount" id="npvAmount">?0</div>
                </div>
                
                <div class="decision" id="decision"></div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Initial Investment</h3>
                        <div class="metric-value" id="investmentDisplay">?0</div>
                    </div>
                    <div class="metric-card">
                        <h3>Total Cash Flows</h3>
                        <div class="metric-value" id="totalCashflows">?0</div>
                    </div>
                    <div class="metric-card">
                        <h3>Discount Rate</h3>
                        <div class="metric-value" id="rateDisplay">0%</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="npvChart"></canvas>
                </div>

                <div class="action-buttons">
                    <button class="action-btn share-btn" onclick="shareCalc()"><i class="fas fa-share-alt"></i> Share</button>
                    <button class="action-btn download-btn" onclick="downloadCalc()"><i class="fas fa-download"></i> Download</button>
                    <button class="action-btn print-btn" onclick="window.print()"><i class="fas fa-print"></i> Print</button>
                </div>
            </div>
        </div>

        <!-- SEO Content -->
        <div class="input-section faq-section">
            <h2 style="margin-bottom: 20px;">About NPV Calculator</h2>
            <p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;">
                The Net Present Value (NPV) Calculator helps you evaluate the profitability of an investment by calculating the difference between the present value of cash inflows and the present value of cash outflows over a period of time.
            </p>

            <div class="faq-item" onclick="this.classList.toggle('active')">
                <div class="faq-question">
                    What is Net Present Value (NPV)? <i class="fas fa-chevron-down faq-icon"></i>
                </div>
                <div class="faq-answer">
                    NPV is a financial metric used to determine the value of an investment. It calculates the present value of all future cash flows generated by a project, including the initial capital investment. A positive NPV indicates that the projected earnings (in present dollars) exceed the anticipated costs.
                </div>
            </div>

            <div class="faq-item" onclick="this.classList.toggle('active')">
                <div class="faq-question">
                    How do I interpret the result? <i class="fas fa-chevron-down faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <ul>
                        <li><strong>Positive NPV:</strong> The investment is expected to be profitable and should be considered.</li>
                        <li><strong>Negative NPV:</strong> The investment is expected to result in a net loss and should generally be avoided.</li>
                        <li><strong>Zero NPV:</strong> The investment is expected to break even.</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item" onclick="this.classList.toggle('active')">
                <div class="faq-question">
                    What is the Discount Rate? <i class="fas fa-chevron-down faq-icon"></i>
                </div>
                <div class="faq-answer">
                    The discount rate is the rate of return used to discount future cash flows back to their present value. It often represents the minimum return an investor expects to earn or the cost of capital.
                </div>
            </div>
        </div>
    </div>

    <script>
        let cashflowCount = 3;
        let npvChart = null;
        
        function addCashflow() {
            cashflowCount++;
            const item = document.createElement('div');
            item.className = 'cashflow-item';
            item.innerHTML = `
                <label>Year ${cashflowCount}</label>
                <input type="number" class="cashflow" value="0" step="1000">
                <button class="remove-btn" onclick="removeCashflow(this)"><i class="fas fa-times"></i></button>
            `;
            document.getElementById('cashflowsList').appendChild(item);
            updateCashflowLabels();
            
            // Add event listener to new input
            item.querySelector('input').addEventListener('input', calc);
        }
        
        function removeCashflow(btn) {
            if (document.querySelectorAll('.cashflow-item').length > 1) {
                btn.parentElement.remove();
                updateCashflowLabels();
                calc();
            }
        }
        
        function updateCashflowLabels() {
            const items = document.querySelectorAll('.cashflow-item');
            items.forEach((item, index) => {
                item.querySelector('label').textContent = 'Year ' + (index + 1);
            });
            cashflowCount = items.length;
        }
        
        function calc() {
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
            const discountRate = parseFloat(document.getElementById('discountRate').value) / 100;
            const cashflows = Array.from(document.querySelectorAll('.cashflow')).map(input => parseFloat(input.value) || 0);
            
            if (initialInvestment >= 0 && cashflows.length > 0) {
                let npv = -initialInvestment;
                let totalCashflows = 0;
                let cumulativeCashflows = [-initialInvestment];
                
                cashflows.forEach((cashflow, index) => {
                    const year = index + 1;
                    const presentValue = cashflow / Math.pow(1 + discountRate, year);
                    npv += presentValue;
                    totalCashflows += cashflow;
                    cumulativeCashflows.push(npv);
                });
                
                const npvCard = document.getElementById('npvCard');
                const decision = document.getElementById('decision');
                
                document.getElementById('npvAmount').textContent = '?' + npv.toLocaleString('en-IN', {maximumFractionDigits: 2});
                document.getElementById('investmentDisplay').textContent = '?' + initialInvestment.toLocaleString('en-IN');
                document.getElementById('totalCashflows').textContent = '?' + totalCashflows.toLocaleString('en-IN');
                document.getElementById('rateDisplay').textContent = (discountRate * 100).toFixed(1) + '%';
                
                if (npv > 0) {
                    npvCard.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                    decision.style.background = 'rgba(16, 185, 129, 0.1)';
                    decision.style.color = '#059669';
                    decision.innerHTML = '<i class="fas fa-check-circle"></i> ACCEPT - Project is profitable (Positive NPV)';
                } else if (npv < 0) {
                    npvCard.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                    decision.style.background = 'rgba(239, 68, 68, 0.1)';
                    decision.style.color = '#dc2626';
                    decision.innerHTML = '<i class="fas fa-times-circle"></i> REJECT - Project is not profitable (Negative NPV)';
                } else {
                    npvCard.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
                    decision.style.background = 'rgba(245, 158, 11, 0.1)';
                    decision.style.color = '#d97706';
                    decision.innerHTML = '<i class="fas fa-minus-circle"></i> NEUTRAL - Break-even point (Zero NPV)';
                }
                
                updateChart(cumulativeCashflows);
            }
        }

        function updateChart(data) {
            const ctx = document.getElementById('npvChart').getContext('2d');
            
            if (npvChart) {
                npvChart.destroy();
            }

            const isDark = document.body.getAttribute('data-theme') === 'dark';
            const textColor = isDark ? '#f3f4f6' : '#1f2937';
            const gridColor = isDark ? '#374151' : '#e5e7eb';

            const labels = ['Start', ...Array.from({length: data.length - 1}, (_, i) => 'Year ' + (i + 1))];

            npvChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Cumulative NPV',
                        data: data,
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#06b6d4',
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'NPV: ?' + context.raw.toLocaleString('en-IN', {maximumFractionDigits: 0});
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: gridColor },
                            ticks: { color: textColor }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: textColor }
                        }
                    }
                }
            });
        }
        
        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', theme);
            document.querySelector('.theme-btn i').className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            localStorage.setItem('theme', theme);
            calc(); // Redraw chart
        }
        
        // Initialize
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        if (savedTheme === 'dark') document.querySelector('.theme-btn i').className = 'fas fa-sun';
        
        document.getElementById('initialInvestment').addEventListener('input', calc);
        document.getElementById('discountRate').addEventListener('input', calc);
        document.querySelectorAll('.cashflow').forEach(input => {
            input.addEventListener('input', calc);
        });
        
        calc();

        // Share/Download functions
        function shareCalc() {
            if (navigator.share) {
                navigator.share({
                    title: document.title,
                    text: 'Check out my NPV calculation!',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('Link copied to clipboard!');
            }
        }

        function downloadCalc() {
            const element = document.querySelector('.result-section');
            html2canvas(element).then(canvas => {
                const link = document.createElement('a');
                link.download = 'npv-report.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>

