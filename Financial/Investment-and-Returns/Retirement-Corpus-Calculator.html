<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculate the corpus required for a comfortable retirement. Estimate retirement expenses and savings needed. Best retirement corpus calculator India.">
    <meta name="keywords" content="retirement corpus calculator, retirement calculator India, retirement planning, pension calculator">
    <title>Retirement Corpus Calculator | Plan Your Retirement</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-color: #ec4899;
            --secondary-color: #db2777;
            --accent-color: #f472b6;
            --text-color: #1f2937;
            --light-bg: #fdf2f8;
            --white: #ffffff;
            --shadow: 0 10px 20px rgba(236, 72, 153, 0.1);
            --gradient: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        }
        
        [data-theme="dark"] {
            --primary-color: #f472b6;
            --secondary-color: #ec4899;
            --text-color: #f3f4f6;
            --light-bg: #1f2937;
            --white: #111827;
            --shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body {
            background-color: #f3f4f6;
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        [data-theme="dark"] body {
            background-color: #0f172a;
        }

        /* Header Styles */
        .main-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        [data-theme="dark"] .main-header {
            background: rgba(17, 24, 39, 0.95);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-self: center;
        }
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-self: end;
        }
        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        .back-btn {
            background: rgba(236, 72, 153, 0.1);
            color: var(--primary-color);
            justify-self: start;
        }
        .back-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        .theme-btn {
            background: var(--light-bg);
            color: var(--text-color);
            width: 45px;
            height: 45px;
            padding: 0;
            justify-content: center;
            border-radius: 50%;
        }
        .theme-btn:hover {
            background: #e2e8f0;
            transform: rotate(15deg);
        }
        [data-theme="dark"] .theme-btn:hover {
            background: #374151;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .input-section, .result-section {
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
        }
        [data-theme="dark"] .subtitle { color: #9ca3af; }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }

        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            background: var(--white);
            color: var(--text-color);
            transition: border-color 0.3s;
        }
        [data-theme="dark"] input {
            border-color: #374151;
            background: #1f2937;
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(236, 72, 153, 0.2);
        }

        .result-card {
            background: var(--gradient);
            padding: 30px;
            border-radius: 15px;
            color: white;
            text-align: center;
            margin-bottom: 25px;
        }

        .corpus-amount {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 10px 0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .metric-card {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }
        [data-theme="dark"] .metric-card {
            background: rgba(236, 72, 153, 0.1);
        }

        .metric-card h3 {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }
        [data-theme="dark"] .metric-card h3 { color: #9ca3af; }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: transform 0.2s;
        }

        .share-btn { background: #3b82f6; color: white; }
        .download-btn { background: #8b5cf6; color: white; }
        .print-btn { background: #64748b; color: white; }

        .action-btn:hover { transform: translateY(-2px); }

        @media (max-width: 768px) {
            .calculator-grid { grid-template-columns: 1fr; }
            .header-container { grid-template-columns: 1fr; gap: 15px; text-align: center; }
            .header-actions { justify-self: center; }
            .logo { justify-self: center; margin-bottom: 10px; }
            .back-btn { justify-self: center; }
        }
        
        /* FAQ Styles */
        .faq-section { margin-top: 40px; }
        .faq-item {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s;
        }
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--text-color);
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            color: #6b7280;
            margin-top: 0;
        }
        [data-theme="dark"] .faq-answer { color: #9ca3af; }
        .faq-item.active .faq-answer {
            max-height: 500px;
            margin-top: 15px;
        }
        .faq-icon { transition: transform 0.3s; }
        .faq-item.active .faq-icon { transform: rotate(180deg); }
    </style>
    <script src="./calc-performance.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <button class="nav-btn back-btn" onclick="window.location.href='../../Ui.html'">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <a href="../../Ui.html" class="logo">
                <i class="fas fa-piggy-bank"></i> CalculatorLoop
            </a>
            <div class="header-actions">
                <button class="nav-btn theme-btn" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <h1><i class="fas fa-piggy-bank" style="color: var(--primary-color);"></i> Retirement Corpus Calculator</h1>
        <p class="subtitle">Estimate the total corpus you need for a stress-free retirement</p>

        <div class="calculator-grid">
            <div class="input-section">
                <h2 style="margin-bottom: 20px; color: var(--text-color);"><i class="fas fa-sliders-h"></i> Parameters</h2>
                
                <div class="input-group">
                    <label><i class="fas fa-user"></i> Current Age</label>
                    <input type="number" id="currentAge" value="30" min="18" max="60">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-hourglass-half"></i> Retirement Age</label>
                    <input type="number" id="retirementAge" value="60" min="40" max="75">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-rupee-sign"></i> Current Monthly Expense (₹)</label>
                    <input type="number" id="monthlyExpense" value="40000">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-percentage"></i> Inflation Rate (%)</label>
                    <input type="number" id="inflationRate" value="6" step="0.5">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-chart-line"></i> Expected Return Post-Retirement (%)</label>
                    <input type="number" id="returnRate" value="8" step="0.5">
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-heartbeat"></i> Life Expectancy</label>
                    <input type="number" id="lifeExpectancy" value="85" min="60" max="100">
                </div>
                
                <button class="btn" onclick="calc()">Calculate Corpus</button>
            </div>

            <div class="result-section" id="result">
                <div class="result-card">
                    <h2>Required Corpus</h2>
                    <div class="corpus-amount" id="corpusAmount">₹0</div>
                    <p>To sustain <span id="retirementYears">0</span> years of retirement</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Monthly Expense at Retirement</h3>
                        <div class="metric-value" id="futureExpense">₹0</div>
                    </div>
                    <div class="metric-card">
                        <h3>Years to Retirement</h3>
                        <div class="metric-value" id="yearsToRetirement">0</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="corpusChart"></canvas>
                </div>

                <div class="action-buttons">
                    <button class="action-btn share-btn" onclick="shareCalc()"><i class="fas fa-share-alt"></i> Share</button>
                    <button class="action-btn download-btn" onclick="downloadCalc()"><i class="fas fa-download"></i> Download</button>
                    <button class="action-btn print-btn" onclick="window.print()"><i class="fas fa-print"></i> Print</button>
                </div>
            </div>
        </div>

        <!-- SEO Content -->
        <div class="input-section faq-section">
            <h2 style="margin-bottom: 20px;">Understanding Retirement Corpus</h2>
            <p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;">
                Your retirement corpus is the total amount of money you need to have saved by the time you retire to maintain your lifestyle. This calculator takes into account inflation, which increases your expenses over time, and the returns your savings will generate during your retirement years.
            </p>

            <div class="faq-item" onclick="this.classList.toggle('active')">
                <div class="faq-question">
                    What is a good retirement corpus? <i class="fas fa-chevron-down faq-icon"></i>
                </div>
                <div class="faq-answer">
                    A good retirement corpus depends on your lifestyle and expenses. Generally, it should be 20-25 times your annual expenses at the time of retirement.
                </div>
            </div>

            <div class="faq-item" onclick="this.classList.toggle('active')">
                <div class="faq-question">
                    How does inflation affect my corpus? <i class="fas fa-chevron-down faq-icon"></i>
                </div>
                <div class="faq-answer">
                    Inflation increases the cost of living. If inflation is 6%, your expenses will double roughly every 12 years. Your corpus must be large enough to cover these rising costs.
                </div>
            </div>
        </div>
    </div>

    <script>
        let corpusChart = null;

        function calc() {
            const ca = parseFloat(document.getElementById('currentAge').value) || 30;
            const ra = parseFloat(document.getElementById('retirementAge').value) || 60;
            const me = parseFloat(document.getElementById('monthlyExpense').value) || 40000;
            const ir = parseFloat(document.getElementById('inflationRate').value) || 6;
            const rr = parseFloat(document.getElementById('returnRate').value) || 8;
            const le = parseFloat(document.getElementById('lifeExpectancy').value) || 85;

            const ytr = ra - ca;
            const ry = le - ra;

            if (ytr <= 0 || ry <= 0) return;

            // Future Monthly Expense at Retirement
            const fme = me * Math.pow(1 + ir / 100, ytr);
            
            // Real Rate of Return during retirement
            // Formula: (1 + return) / (1 + inflation) - 1
            const rrr = ((1 + rr / 100) / (1 + ir / 100) - 1);
            
            // Corpus Calculation (Present Value of Annuity with Growth)
            // We need a corpus that can provide 'fme' monthly, increasing by inflation
            // Since we use real rate of return, we can treat it as a standard annuity
            
            const monthlyRealRate = Math.pow(1 + rrr, 1/12) - 1;
            const months = ry * 12;
            
            let corpus;
            if (monthlyRealRate === 0) {
                corpus = fme * months;
            } else {
                corpus = fme * ((1 - Math.pow(1 + monthlyRealRate, -months)) / monthlyRealRate);
            }

            // Update UI
            document.getElementById('corpusAmount').textContent = '₹' + Math.round(corpus).toLocaleString('en-IN');
            document.getElementById('retirementYears').textContent = ry;
            document.getElementById('futureExpense').textContent = '₹' + Math.round(fme).toLocaleString('en-IN');
            document.getElementById('yearsToRetirement').textContent = ytr;

            updateChart(corpus, fme, months, monthlyRealRate);
        }

        function updateChart(corpus, monthlyExpense, months, rate) {
            const ctx = document.getElementById('corpusChart').getContext('2d');
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            const textColor = isDark ? '#f3f4f6' : '#1f2937';
            const gridColor = isDark ? '#374151' : '#e5e7eb';

            // Generate depletion data
            const labels = [];
            const data = [];
            let balance = corpus;
            
            // Show yearly points
            for (let m = 0; m <= months; m += 12) {
                labels.push(Math.floor(m/12));
                data.push(balance);
                
                // Simulate a year of withdrawals and growth
                for(let i=0; i<12 && m+i < months; i++) {
                    balance = balance * (1 + rate) - monthlyExpense;
                }
                if (balance < 0) balance = 0;
            }

            if (corpusChart) corpusChart.destroy();
            corpusChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Corpus Depletion',
                        data: data,
                        borderColor: '#ec4899',
                        backgroundColor: 'rgba(236, 72, 153, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: textColor } },
                        title: { display: true, text: 'Corpus Depletion Over Retirement Years', color: textColor }
                    },
                    scales: {
                        y: {
                            grid: { color: gridColor },
                            ticks: { color: textColor, callback: v => '₹' + (v/100000).toFixed(1) + 'L' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: textColor },
                            title: { display: true, text: 'Years in Retirement', color: textColor }
                        }
                    }
                }
            });
        }
        
        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', theme);
            document.querySelector('.theme-btn i').className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            localStorage.setItem('theme', theme);
            calc();
        }
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        if (savedTheme === 'dark') document.querySelector('.theme-btn i').className = 'fas fa-sun';
        
        document.querySelectorAll('input').forEach(el => el.addEventListener('input', calc));
        calc();

        function shareCalc() {
            if (navigator.share) {
                navigator.share({
                    title: document.title,
                    text: 'Check out my Retirement Corpus Plan!',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('Link copied to clipboard!');
            }
        }

        function downloadCalc() {
            const element = document.querySelector('.container');
            html2canvas(element).then(canvas => {
                const link = document.createElement('a');
                link.download = 'retirement-corpus.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
