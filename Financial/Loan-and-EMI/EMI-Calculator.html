<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMI Calculator 2025 - Calculate Home, Car & Personal Loan EMI Online | Free Tool</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free EMI Calculator 2025 with advanced features. Calculate monthly installments for home loan, car loan, personal loan with amortization schedule. Supports 10+ languages & 15 currencies. Get instant results with charts & PDF export.">
    <meta name="keywords" content="EMI calculator, loan calculator, home loan EMI, car loan EMI, personal loan calculator, mortgage calculator, interest calculator, loan amortization, EMI calculation formula, online EMI calculator, free EMI calculator">
    <meta name="author" content="Financial Calculator Pro">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com/emi-calculator">
    <meta property="og:title" content="Advanced EMI Calculator - Calculate Loan EMI Online Free">
    <meta property="og:description" content="Calculate your monthly loan EMI with our advanced calculator. Supports home loans, car loans, personal loans. Get detailed amortization schedule with charts.">
    <meta property="og:image" content="https://yourwebsite.com/emi-calculator-preview.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourwebsite.com/emi-calculator">
    <meta property="twitter:title" content="Advanced EMI Calculator - Calculate Loan EMI Online Free">
    <meta property="twitter:description" content="Calculate your monthly loan EMI with our advanced calculator. Get detailed amortization schedule with charts.">
    <meta property="twitter:image" content="https://yourwebsite.com/emi-calculator-preview.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://yourwebsite.com/emi-calculator">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Advanced EMI Calculator",
      "description": "Free online EMI calculator for home loans, car loans, and personal loans with detailed amortization schedule",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "15420"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What is EMI and how is it calculated?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "EMI (Equated Monthly Installment) is the fixed amount you pay every month towards your loan. It's calculated using the formula: EMI = [P x R x (1+R)^N]/[(1+R)^N-1], where P is the principal loan amount, R is the monthly interest rate, and N is the loan tenure in months."
        }
      },{
        "@type": "Question",
        "name": "How can I reduce my EMI amount?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can reduce your EMI by: 1) Making a larger down payment to reduce principal, 2) Opting for a longer tenure (though this increases total interest), 3) Making prepayments when possible, 4) Negotiating a lower interest rate, or 5) Refinancing your loan at a better rate."
        }
      },{
        "@type": "Question",
        "name": "What is the difference between flat rate and reducing balance?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "In flat rate, interest is calculated on the original principal throughout the loan tenure. In reducing balance (most common), interest is calculated on the outstanding principal, which decreases with each payment. Reducing balance results in lower total interest."
        }
      },{
        "@type": "Question",
        "name": "Can I prepay my loan to save interest?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, prepaying your loan can significantly reduce your interest burden. Most banks allow partial prepayments. Use our calculator's prepayment feature to see how much you can save. Check with your lender about prepayment charges, if any."
        }
      }]
    }
    </script>
    <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,sans-serif;background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);min-height:100vh;padding:20px}.container{max-width:1400px;width:100%;background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);padding:40px;margin:0 auto;position:relative}.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.back-link-top{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:#fff;border:2px solid #f5576c;color:#f5576c;text-decoration:none;border-radius:10px;font-weight:600;transition:all .3s;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.back-link-top:hover{background:#f5576c;color:#fff;transform:translateX(-5px)}.back-link-top:active{transform:scale(0.95)}.settings-group{display:flex;gap:15px;align-items:center}.selector{padding:10px 16px;border:2px solid #e0e0e0;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s;background:#fff;color:#333}.selector:hover{border-color:#f5576c}.selector:focus{outline:0;border-color:#f5576c;box-shadow:0 0 0 3px rgba(245,87,108,.1)}h1{color:#1a1a2e;text-align:center;margin-bottom:10px;font-size:2.5rem;font-weight:700}.subtitle{text-align:center;color:#666;margin-bottom:30px;font-size:1.1rem}.layout{display:grid;grid-template-columns:420px 1fr;gap:30px;margin-top:30px}.input-section{background:#f8f9fa;padding:30px;border-radius:15px;height:fit-content;position:sticky;top:20px}.input-group{margin-bottom:20px}label{display:block;margin-bottom:10px;color:#333;font-weight:600;font-size:.95rem}input,select{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:10px;font-size:1rem;transition:all .3s}input:focus,select:focus{outline:0;border-color:#f5576c;box-shadow:0 0 0 3px rgba(245,87,108,.1)}input[type=range]{width:100%;accent-color:#f5576c;height:8px;cursor:pointer}.custom-tenure{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}.custom-input{padding:10px;border:2px solid #e0e0e0;border-radius:8px;text-align:center;font-size:.9rem}.btn{width:100%;padding:16px;background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff;border:none;border-radius:12px;font-size:1.1rem;cursor:pointer;margin-top:15px;font-weight:700;transition:transform .2s;box-shadow:0 4px 15px rgba(245,87,108,.3)}.btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(245,87,108,.4)}.action-btns{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:15px}.action-btn{padding:12px;background:#fff;border:2px solid #f5576c;color:#f5576c;border-radius:10px;cursor:pointer;font-weight:600;transition:all .3s;font-size:.95rem;display:flex;align-items:center;justify-content:center;gap:8px;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.action-btn:hover{background:#f5576c;color:#fff}.action-btn:active{transform:scale(0.96)}.results-section{display:flex;flex-direction:column;gap:30px}.emi-card{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);padding:40px;border-radius:20px;color:#fff;text-align:center;box-shadow:0 10px 30px rgba(245,87,108,.3)}.emi-card h2{font-size:1.2rem;opacity:.9;margin-bottom:15px}.emi-amount{font-size:3.5rem;font-weight:800;margin-bottom:10px}.emi-subtext{font-size:1rem;opacity:.85}.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.stat-card{background:#fff;padding:25px;border-radius:15px;box-shadow:0 4px 12px rgba(0,0,0,.08);text-align:center;border-left:4px solid #f5576c}.stat-card h3{color:#666;font-size:.85rem;font-weight:600;margin-bottom:10px;text-transform:uppercase}.stat-value{font-size:2rem;font-weight:700;color:#1a1a2e}.stat-label{font-size:.9rem;color:#999;margin-top:5px}.charts-container{display:grid;grid-template-columns:1fr 1fr;gap:20px}.chart-card{background:#fff;padding:25px;border-radius:15px;box-shadow:0 4px 12px rgba(0,0,0,.08)}.chart-card h3{color:#1a1a2e;margin-bottom:20px;font-size:1.2rem}.chart-wrapper{height:300px;position:relative}.amortization-section{background:#fff;border-radius:15px;padding:30px;box-shadow:0 4px 12px rgba(0,0,0,.08)}.amortization-section h3{color:#1a1a2e;margin-bottom:20px;font-size:1.4rem}.table-container{max-height:500px;overflow-y:auto;overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:10px;border:1px solid #e0e0e0}table{width:100%;border-collapse:collapse;min-width:600px}th{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff;padding:15px;text-align:left;font-weight:600;position:sticky;top:0;z-index:10;white-space:nowrap}td{padding:15px;border-bottom:1px solid #f0f0f0;white-space:nowrap}tr:hover{background:#fef5f8}.highlight{background:#fff3f5;font-weight:600}.info-box{background:#fff3f5;border-left:4px solid #f5576c;padding:15px;margin-top:15px;border-radius:8px}.info-box h4{color:#f5576c;margin-bottom:8px;font-size:.95rem}.info-box p{color:#666;font-size:.85rem;line-height:1.6}@media print{body{background:#fff;padding:0}.top-bar,.action-btns,.info-box{display:none!important}.container{box-shadow:none;max-width:100%}}@media (max-width:1200px){.layout{grid-template-columns:1fr;gap:20px}.input-section{position:relative;top:0;width:100%}.results-section{width:100%}.stats-grid{grid-template-columns:1fr}.charts-container{grid-template-columns:1fr}h1{font-size:2rem}.emi-amount{font-size:2.5rem}.top-bar{flex-direction:column;gap:15px}.settings-group{flex-direction:column;width:100%}.selector{width:100%;max-width:100%}}

/* SEO Content & FAQ Styles */
.seo-content{background:#fff;padding:40px 0;margin-top:40px;border-top:3px solid #f5576c}.content-section{margin-bottom:40px}.content-section h2{color:#1a1a2e;font-size:2rem;margin-bottom:20px;display:flex;align-items:center;gap:12px}.content-section h2 i{color:#f5576c;font-size:1.8rem}.content-section h3{color:#2d2d44;font-size:1.5rem;margin:30px 0 15px;display:flex;align-items:center;gap:10px}.content-section h3 i{color:#f5576c;font-size:1.3rem}.content-section h4{color:#3d3d5c;font-size:1.2rem;margin:20px 0 10px}.content-section p{color:#555;font-size:1rem;line-height:1.8;margin-bottom:15px}.content-section ul,.content-section ol{color:#555;margin:15px 0 15px 25px;line-height:1.8}.content-section li{margin-bottom:10px}.content-section strong{color:#1a1a2e;font-weight:600}

.feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:30px 0}.feature-item{background:linear-gradient(135deg,#fef5f8 0%,#fff 100%);padding:25px;border-radius:12px;border:2px solid #ffe0e9;transition:all .3s}.feature-item:hover{transform:translateY(-5px);border-color:#f5576c;box-shadow:0 10px 30px rgba(245,87,108,.15)}.feature-item i{font-size:2.5rem;color:#f5576c;margin-bottom:15px;display:block}.feature-item h4{color:#1a1a2e;font-size:1.1rem;margin-bottom:10px}.feature-item p{color:#666;font-size:.9rem;line-height:1.6;margin:0}

.steps-list{background:#f8f9fa;padding:25px 25px 25px 50px;border-radius:12px;border-left:4px solid #f5576c;margin:20px 0}.steps-list li{font-size:1rem;color:#444;margin-bottom:15px;line-height:1.7}.steps-list strong{color:#f5576c}

.formula-box{background:linear-gradient(135deg,#1a1a2e 0%,#2d2d44 100%);color:#fff;padding:30px;border-radius:12px;margin:25px 0;text-align:center}.formula-box strong{font-size:1.5rem;display:block;margin-bottom:20px;letter-spacing:1px}.formula-legend{background:rgba(255,255,255,.1);padding:20px;border-radius:8px;margin-top:20px;text-align:left}.formula-legend p{color:#fff;margin-bottom:10px}.formula-legend ul{list-style:none;margin:0;padding:0}.formula-legend li{color:#ffe0e9;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.1)}.formula-legend li:last-child{border:none}

.loan-types{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin:25px 0}.loan-card{background:#fff;border:2px solid #ffe0e9;border-radius:12px;padding:25px;text-align:center;transition:all .3s}.loan-card:hover{border-color:#f5576c;transform:translateY(-5px);box-shadow:0 10px 25px rgba(245,87,108,.15)}.loan-card i{font-size:3rem;color:#f5576c;margin-bottom:15px}.loan-card h4{color:#1a1a2e;font-size:1.15rem;margin-bottom:12px}.loan-card p{color:#666;font-size:.9rem;line-height:1.6}

.features-list{background:#f8f9fa;padding:25px;border-radius:12px;margin:20px 0}.features-list li{display:flex;align-items:flex-start;gap:12px;padding:12px 0;border-bottom:1px solid #e0e0e0}.features-list li:last-child{border:none}.features-list i{color:#28a745;font-size:1.2rem;margin-top:3px;flex-shrink:0}.features-list strong{color:#1a1a2e}

.tips-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:25px 0}.tip-card{background:linear-gradient(135deg,#fff3f5 0%,#fff 100%);border:2px solid #ffe0e9;border-radius:12px;padding:25px;transition:all .3s}.tip-card:hover{border-color:#f5576c;transform:translateY(-3px)}.tip-card i{font-size:2.5rem;color:#f5576c;margin-bottom:15px;display:block}.tip-card h4{color:#1a1a2e;font-size:1.1rem;margin-bottom:12px}.tip-card p{color:#555;font-size:.9rem;line-height:1.6;margin:0}

.benefits-list{columns:2;column-gap:30px;margin:20px 0}.benefits-list li{color:#555;font-size:1rem;margin-bottom:12px;line-height:1.7;break-inside:avoid}

.faq-section{background:linear-gradient(135deg,#f8f9fa 0%,#fff 100%);padding:40px;border-radius:20px;margin:40px 0 0;border:2px solid #e0e0e0}.faq-section h2{color:#1a1a2e;font-size:2rem;margin-bottom:30px;display:flex;align-items:center;gap:12px;justify-content:center}.faq-section h2 i{color:#f5576c;font-size:1.8rem}

.faq-container{max-width:900px;margin:0 auto}.faq-item{background:#fff;border:2px solid #ffe0e9;border-radius:12px;margin-bottom:15px;overflow:hidden;transition:all .3s}.faq-item:hover{border-color:#f5576c}

.faq-question{width:100%;background:linear-gradient(135deg,#fff 0%,#fef5f8 100%);border:none;padding:20px 25px;text-align:left;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.faq-question:hover{background:linear-gradient(135deg,#fef5f8 0%,#ffe0e9 100%)}.faq-question:active{transform:scale(0.98)}.faq-question h3{color:#1a1a2e;font-size:1.1rem;font-weight:600;margin:0;flex:1;line-height:1.5}.faq-question i{color:#f5576c;font-size:1.2rem;transition:transform .3s;flex-shrink:0;margin-left:10px}.faq-question.active i{transform:rotate(180deg)}

.faq-answer{max-height:0;overflow:hidden;transition:max-height .4s ease,padding .4s ease;background:#fff}.faq-answer.show{max-height:800px;padding:20px 25px;border-top:2px solid #ffe0e9}.faq-answer p{color:#555;font-size:.95rem;line-height:1.8;margin-bottom:12px}.faq-answer ul{margin:12px 0 12px 20px;color:#555}.faq-answer li{margin-bottom:8px;line-height:1.7}.faq-answer strong{color:#1a1a2e}

@media (max-width:768px){
    /* Content Sections Mobile */
    .seo-content{padding:20px 0}
    .content-section{margin-bottom:30px}
    .content-section h2{font-size:1.4rem;gap:8px}
    .content-section h2 i{font-size:1.3rem}
    .content-section h3{font-size:1.1rem;gap:8px}
    .content-section h3 i{font-size:1rem}
    .content-section h4{font-size:1rem}
    .content-section p,.content-section li{font-size:.9rem;line-height:1.7}
    
    /* Feature Grid Mobile */
    .feature-grid,.loan-types,.tips-section{grid-template-columns:1fr;gap:15px}
    .feature-item,.loan-card,.tip-card{padding:20px}
    .feature-item i,.loan-card i,.tip-card i{font-size:2rem}
    .feature-item h4,.loan-card h4,.tip-card h4{font-size:1rem}
    .feature-item p,.loan-card p,.tip-card p{font-size:.85rem}
    
    /* Lists Mobile */
    .steps-list{padding:20px 20px 20px 40px}
    .steps-list li{font-size:.9rem;margin-bottom:12px}
    .benefits-list{columns:1}
    .benefits-list li{font-size:.9rem}
    .features-list{padding:20px}
    .features-list li{font-size:.9rem;padding:10px 0}
    
    /* Formula Box Mobile */
    .formula-box{padding:20px}
    .formula-box strong{font-size:1.1rem}
    .formula-legend{padding:15px}
    .formula-legend p{font-size:.9rem}
    .formula-legend li{font-size:.85rem;padding:6px 0}
    
    /* FAQ Mobile */
    .faq-section{padding:25px 20px;margin:30px 0 0}
    .faq-section h2{font-size:1.5rem;gap:8px}
    .faq-section h2 i{font-size:1.4rem}
    .faq-container{padding:0}
    .faq-item{margin-bottom:12px}
    .faq-question{padding:15px 18px}
    .faq-question h3{font-size:.95rem}
    .faq-question i{font-size:1rem}
    .faq-answer{font-size:.9rem}
    .faq-answer.show{max-height:1000px;padding:15px 18px}
    .faq-answer p{font-size:.88rem;margin-bottom:10px}
    .faq-answer ul{margin:10px 0 10px 18px}
    .faq-answer li{font-size:.88rem;margin-bottom:6px}
    
    /* Container Mobile */
    .container{padding:20px 12px;border-radius:15px;overflow-x:hidden}
    body{padding:15px 10px}
    
    /* Input Section Mobile */
    .input-section{padding:15px 10px}
    .input-section h2{font-size:1.3rem;margin-bottom:20px}
    .input-group{margin-bottom:18px}
    .input-group label{font-size:.9rem;margin-bottom:8px}
    input[type="number"],select{font-size:.9rem;padding:10px;width:100%;box-sizing:border-box}
    input[type="range"]{height:6px;margin-top:8px;width:100%}
    
    /* Info Box Mobile */
    .info-box{padding:12px;margin-top:12px;margin-left:0;margin-right:0}
    .info-box h4{font-size:.85rem;margin-bottom:6px}
    .info-box p{font-size:.8rem;line-height:1.5}
    
    /* Results Section Mobile */
    .results-section{gap:20px;overflow:hidden}
    .results-section h2{font-size:1.3rem}
    .emi-card{padding:20px 15px;margin:0}
    .emi-label{font-size:.9rem}
    .emi-amount{font-size:2rem;word-break:break-word}
    .stats-grid{grid-template-columns:1fr;gap:12px}
    .stat-card{padding:15px 12px}
    .stat-label{font-size:.85rem}
    .stat-value{font-size:1.3rem;word-break:break-word}
    
    /* Charts Mobile */
    .charts-container{grid-template-columns:1fr;gap:15px;overflow:hidden}
    .chart-card{padding:15px 10px;margin:0}
    .chart-card h3{font-size:1rem}
    .chart-wrapper{height:250px;width:100%;overflow:hidden}
    
    /* Action Buttons Mobile */
    .action-btns{grid-template-columns:repeat(2,1fr);gap:8px;padding:0}
    .action-btn{padding:10px 12px;font-size:.8rem;gap:6px;word-wrap:break-word}
    .action-btn i{font-size:.9rem}
    
    /* Amortization Table Mobile */
    .amortization-section{padding:15px 8px;overflow-x:auto;-webkit-overflow-scrolling:touch}
    .amortization-section h2,.amortization-section h3{font-size:1.1rem;padding:0 5px}
    .table-container{overflow-x:auto;-webkit-overflow-scrolling:touch;margin:10px 0}
    table{font-size:.75rem;min-width:550px}
    th,td{padding:8px 5px}
    th{font-size:.7rem;white-space:nowrap}
    
    /* Top Bar Mobile */
    h1{font-size:1.5rem}
    h1 i{font-size:1.3rem}
    .subtitle{font-size:.85rem}
    
    /* Calculate Button Mobile */
    .calc-btn{padding:12px;font-size:.95rem}
    
    /* Custom Tenure Mobile */
    .custom-tenure{gap:8px}
    .custom-input{padding:8px;font-size:.85rem}
}

@media (max-width:480px){
    /* Extra Small Devices */
    body{padding:8px 5px}
    .container{padding:12px 8px;border-radius:12px;overflow-x:hidden;max-width:100%}
    
    .content-section h2{font-size:1.2rem}
    .content-section h3{font-size:1rem}
    .content-section p,.content-section li{font-size:.85rem}
    
    .feature-item,.loan-card,.tip-card{padding:15px}
    .feature-item i,.loan-card i,.tip-card i{font-size:1.8rem;margin-bottom:10px}
    
    .faq-section{padding:20px 15px}
    .faq-section h2{font-size:1.3rem}
    .faq-question{padding:12px 15px}
    .faq-question h3{font-size:.9rem}
    .faq-answer.show{padding:12px 15px}
    .faq-answer p,.faq-answer li{font-size:.82rem}
    
    h1{font-size:1.3rem}
    .subtitle{font-size:.8rem}
    .emi-amount{font-size:1.8rem}
    .stat-value{font-size:1.2rem}
    
    .action-btns{grid-template-columns:1fr;gap:8px;width:100%}
    .action-btn{padding:10px;font-size:.85rem;justify-content:center;width:100%;box-sizing:border-box}
    
    .table-container{margin:10px -8px;padding:0 8px}
    table{font-size:.7rem;min-width:500px}
    th,td{padding:6px 4px;font-size:.7rem}
}

@media (max-width:360px){
    /* Very Small Devices */
    .container{padding:10px 6px;max-width:100%;overflow-x:hidden}
    .content-section h2{font-size:1.1rem}
    .faq-question h3{font-size:.85rem}
    h1{font-size:1.2rem}
    .emi-amount{font-size:1.5rem;word-break:break-all}
    .stat-value{font-size:1.1rem;word-break:break-all}
    .action-btn{font-size:.8rem;padding:8px}
}

/* Global Mobile Fixes */
@media (max-width:768px){
    *{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}
    img{max-width:100%;height:auto}
    canvas{max-width:100%!important;height:auto!important}
}

/* Top Bar Layout Improvements */
.top-bar-left{flex:0 0 auto}
.top-bar-right{flex:1;display:flex;flex-direction:column;gap:10px;align-items:flex-end}
.settings-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.action-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}

/* Enhanced Selector Styling */
.selector{min-width:180px;max-width:250px;padding:10px 16px;border:2px solid #e0e0e0!important;border-radius:10px!important;font-size:.9rem!important;font-weight:600!important;cursor:pointer!important;transition:all .3s!important;background:#fff!important;color:#333!important;min-height:44px;box-shadow:0 2px 6px rgba(0,0,0,.05)!important}.selector:hover{border-color:#f5576c!important;background:#fef5f8!important;transform:translateY(-1px)!important;box-shadow:0 4px 10px rgba(245,87,108,.15)!important}.selector:focus{outline:0!important;border-color:#f5576c!important;box-shadow:0 0 0 3px rgba(245,87,108,.15)!important}

/* Privacy Mode & History Styles */
.privacy-toggle,.history-btn{padding:10px 18px;border:2px solid #ffe0e9;border-radius:10px;background:#fff;color:#1a1a2e;font-weight:600;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;gap:8px;font-size:.9rem;-webkit-tap-highlight-color:transparent;white-space:nowrap;min-height:44px}.privacy-toggle:hover,.history-btn:hover{border-color:#f5576c;background:#fef5f8;transform:translateY(-2px);box-shadow:0 4px 12px rgba(245,87,108,.2)}.privacy-toggle.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border-color:#667eea;box-shadow:0 4px 15px rgba(102,126,234,.3)}.privacy-toggle.active i{color:#fff}.privacy-toggle i{color:#667eea;font-size:1.1rem}.history-btn{position:relative}.history-btn i{font-size:1.1rem;color:#f5576c}.history-count{background:#f5576c;color:#fff;border-radius:50%;min-width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;padding:0 6px;box-shadow:0 2px 6px rgba(245,87,108,.3)}

.privacy-indicator{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:12px 20px;border-radius:10px;margin:15px 0;display:flex;align-items:center;gap:10px;font-size:.9rem;animation:slideDown .3s ease}.privacy-indicator i{font-size:1.2rem}

@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}

/* Modal Styles */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:1000;overflow-y:auto;animation:fadeIn .3s ease}.modal.show{display:flex;align-items:center;justify-content:center;padding:20px}

.modal-content{background:#fff;border-radius:20px;max-width:900px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.3);animation:slideUp .3s ease}.modal-large{max-width:1200px}

.modal-header{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff;padding:20px 30px;border-radius:20px 20px 0 0;display:flex;justify-content:space-between;align-items:center}.modal-header h2{margin:0;font-size:1.5rem;display:flex;align-items:center;gap:10px}.modal-close{background:rgba(255,255,255,.2);border:none;color:#fff;font-size:2rem;cursor:pointer;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:all .3s}.modal-close:hover{background:rgba(255,255,255,.3);transform:rotate(90deg)}

.modal-body{padding:30px}

@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}

/* History List Styles */
.history-controls{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}.compare-btn,.clear-btn{padding:10px 20px;border:none;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:8px;font-size:.95rem}.compare-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.compare-btn:disabled{background:#ccc;cursor:not-allowed;opacity:.6}.compare-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px rgba(102,126,234,.4)}.clear-btn{background:#fff;border:2px solid #f5576c;color:#f5576c}.clear-btn:hover{background:#f5576c;color:#fff}

.history-list{display:flex;flex-direction:column;gap:15px;max-height:500px;overflow-y:auto}.history-item{background:#fff;border:2px solid #ffe0e9;border-radius:12px;padding:20px;transition:all .3s;position:relative}.history-item:hover{border-color:#f5576c;box-shadow:0 5px 15px rgba(245,87,108,.15)}.history-item.selected{border-color:#667eea;background:#f8f9ff}

.history-checkbox{position:absolute;top:15px;right:15px;width:24px;height:24px;cursor:pointer;accent-color:#667eea}

.history-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;padding-right:35px}.history-date{color:#999;font-size:.85rem}.history-delete{background:#fff;border:2px solid #f5576c;color:#f5576c;padding:6px 12px;border-radius:8px;cursor:pointer;font-size:.85rem;transition:all .3s}.history-delete:hover{background:#f5576c;color:#fff}

.history-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin-top:15px}.history-detail{background:#f8f9fa;padding:10px;border-radius:8px;border-left:3px solid #f5576c}.history-detail-label{color:#666;font-size:.8rem;font-weight:600;text-transform:uppercase;margin-bottom:5px}.history-detail-value{color:#1a1a2e;font-size:1.1rem;font-weight:700}

/* Compare View Styles */
.compare-view{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.compare-card{background:#fff;border:2px solid #ffe0e9;border-radius:12px;padding:20px}.compare-card h3{color:#1a1a2e;margin-bottom:15px;display:flex;align-items:center;gap:8px}.compare-card h3 i{color:#f5576c}

.compare-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0}.compare-row:last-child{border:none}.compare-label{color:#666;font-weight:600}.compare-value{color:#1a1a2e;font-weight:700}.compare-difference{margin-top:20px;padding:15px;background:linear-gradient(135deg,#fef5f8 0%,#fff 100%);border-radius:10px;border-left:4px solid #f5576c}.compare-difference h4{color:#f5576c;margin-bottom:10px;font-size:1rem}.compare-diff-item{display:flex;justify-content:space-between;padding:8px 0;font-size:.9rem}.compare-diff-label{color:#666}.compare-diff-value{font-weight:700;color:#1a1a2e}.compare-diff-value.positive{color:#28a745}.compare-diff-value.negative{color:#f5576c}

.empty-history{text-align:center;padding:60px 20px;color:#999}.empty-history i{font-size:4rem;color:#e0e0e0;margin-bottom:20px}.empty-history h3{color:#666;margin-bottom:10px}.empty-history p{color:#999;font-size:.9rem}

/* Mobile Responsive for Modals */
@media (max-width:768px){
    .modal-content{border-radius:15px;max-height:85vh}.modal-header{padding:15px 20px}.modal-header h2{font-size:1.2rem}.modal-close{width:35px;height:35px;font-size:1.5rem}.modal-body{padding:20px}
    .history-controls{flex-direction:column}.compare-btn,.clear-btn{width:100%;justify-content:center}
    .history-item{padding:15px}.history-details{grid-template-columns:1fr}.compare-view{grid-template-columns:1fr}
    
    /* Top Bar Mobile */
    .top-bar{flex-direction:column;align-items:stretch;gap:12px}
    .top-bar-left{width:100%}
    .top-bar-right{width:100%;align-items:stretch}
    .settings-row{justify-content:stretch;width:100%}
    .action-row{justify-content:stretch;width:100%}
    .selector{width:100%;flex:1}
    .privacy-toggle,.history-btn{flex:1;justify-content:center;padding:12px 16px}
    .privacy-toggle .privacy-text{display:inline}
    .back-link-top{width:100%;justify-content:center}
}</style>
</head>
<body>
<div class="container">
<div class="top-bar">
<div class="top-bar-left">
<a href="../../Ui.html" class="back-link-top">
<i class="fas fa-arrow-left"></i>
<span data-lang="backHub">Back to Hub</span>
</a>
</div>
        <div class="top-bar-right">
<div class="settings-row">
<select id="languageSelector" class="selector" onchange="switchLang(this.value)">
<!-- Languages loaded from config.js -->
</select>
<select id="currencySelector" class="selector" onchange="changeCurrency(this.value)">
<!-- Currencies loaded from config.js -->
</select>
</div>
<div class="action-row">
<button class="privacy-toggle" id="privacyToggle" onclick="togglePrivacyMode()" title="Privacy Mode">
<i class="fas fa-shield-alt"></i>
<span class="privacy-text">Privacy</span>
</button>
<button class="history-btn" id="historyBtn" onclick="openHistory()" title="View History">
<i class="fas fa-history"></i>
<span class="history-count" id="historyCount">0</span>
</button>
</div>
</div>
</div>

<!-- Privacy Mode Indicator -->
<div class="privacy-indicator" id="privacyIndicator" style="display:none">
<i class="fas fa-lock"></i>
<span>?? Privacy Mode ON - Your data is processed locally. Nothing is uploaded or saved.</span>
</div>
<h1><i class="fas fa-hand-holding-usd"></i> <span data-lang="title">Advanced EMI Calculator</span></h1>
<p class="subtitle" data-lang="subtitle">Calculate your loan EMI with detailed amortization schedule</p>
<div class="layout">
<div class="input-section">
<h2 style="margin-bottom:25px;color:#1a1a2e"><i class="fas fa-calculator"></i> <span data-lang="loanDetails">Loan Details</span></h2>
<div class="input-group">
<label for="loanAmount"><i class="fas fa-money-bill-wave"></i> <span data-lang="loanAmount">Loan Amount</span> (<span id="currencySymbol">?</span>)</label>
<input type="number" id="loanAmount" value="500000">
<input type="range" id="loanAmountRange" min="50000" max="10000000" value="500000" step="10000" style="margin-top:10px">
</div>
<div class="input-group">
<label for="interest"><i class="fas fa-percentage"></i> <span data-lang="interestRate">Interest Rate (% per annum)</span></label>
<input type="number" id="interest" value="10" step="0.1" min="1" max="30">
<input type="range" id="interestRange" min="1" max="30" value="10" step="0.1" style="margin-top:10px">
</div>
<div class="input-group">
<label for="tenure"><i class="fas fa-clock"></i> <span data-lang="loanTenure">Loan Tenure</span></label>
<input type="number" id="tenure" value="10" min="1" max="30">
<input type="range" id="tenureRange" min="1" max="30" value="10" style="margin-top:10px">
<select id="tenureType" style="margin-top:10px" onchange="toggleCustomTenure()">
<option value="years" selected data-lang-opt="years">Years</option>
<option value="months" data-lang-opt="months">Months</option>
<option value="weeks" data-lang-opt="weeks">Weeks</option>
<option value="days" data-lang-opt="days">Days</option>
<option value="custom" data-lang-opt="custom">Custom</option>
</select>
<div id="customTenure" class="custom-tenure" style="display:none">
<div>
<label style="font-size:.85rem" data-lang="years">Years</label>
<input type="number" id="customYears" class="custom-input" value="0" min="0">
</div>
<div>
<label style="font-size:.85rem" data-lang="weeks">Weeks</label>
<input type="number" id="customWeeks" class="custom-input" value="0" min="0">
</div>
<div>
<label style="font-size:.85rem" data-lang="days">Days</label>
<input type="number" id="customDays" class="custom-input" value="0" min="0">
</div>
</div>
</div>
<div class="input-group">
<label for="paymentFreq"><i class="fas fa-calendar-check"></i> <span data-lang="paymentFreq">Payment Frequency</span></label>
<select id="paymentFreq">
<option value="monthly" selected data-lang-opt="monthly">Monthly</option>
<option value="weekly" data-lang-opt="weekly">Weekly</option>
<option value="daily" data-lang-opt="daily">Daily</option>
</select>
</div>
<div class="input-group">
<label for="prepayment"><i class="fas fa-hand-holding-usd"></i> <span data-lang="prepayment">One-time Prepayment</span> (<span id="currencySymbol2">?</span>)</label>
<input type="number" id="prepayment" value="0">
</div>
<div class="input-group">
<label for="prepaymentMonth"><i class="fas fa-calendar-alt"></i> <span data-lang="prepaymentPeriod">Prepayment Period</span></label>
<input type="number" id="prepaymentMonth" value="12" min="1">
</div>
<button class="btn" onclick="calc()"><i class="fas fa-calculator"></i> <span data-lang="calculate">Calculate EMI</span></button>
<div class="action-btns">
<button class="action-btn" onclick="printResults()"><i class="fas fa-print"></i> <span data-lang="print">Print</span></button>
<button class="action-btn" onclick="downloadPDF()"><i class="fas fa-file-pdf"></i> <span data-lang="pdf">PDF</span></button>
<button class="action-btn" onclick="shareResults()"><i class="fas fa-share-alt"></i> <span data-lang="share">Share</span></button>
<button class="action-btn" onclick="exportData()"><i class="fas fa-download"></i> <span data-lang="export">Export</span></button>
</div>
<div class="info-box">
<h4><i class="fas fa-lightbulb"></i> <span data-lang="smartTip">Smart Tip</span></h4>
<p data-lang="tipText">Making prepayments can significantly reduce your interest burden and loan tenure.</p>
</div>
</div>
<div class="results-section">
<div class="emi-card">
<h2><i class="fas fa-credit-card"></i> <span data-lang="yourEMI">Your Payment</span></h2>
<div class="emi-amount" id="emiAmount">?0</div>
<div class="emi-subtext"><span data-lang="for">for</span> <span id="emiTenure">0</span> <span id="emiPeriodLabel" data-lang="periods">periods</span></div>
</div>
<div class="stats-grid">
<div class="stat-card">
<h3><i class="fas fa-money-bill"></i> <span data-lang="principal">Principal</span></h3>
<div class="stat-value" id="principalAmount">?0</div>
<div class="stat-label" data-lang="loanAmt">Loan Amount</div>
</div>
<div class="stat-card" style="border-left-color:#f5576c">
<h3><i class="fas fa-chart-line"></i> <span data-lang="totalInt">Total Interest</span></h3>
<div class="stat-value" id="totalInterest">?0</div>
<div class="stat-label" data-lang="intPayable">Interest Payable</div>
</div>
<div class="stat-card" style="border-left-color:#f093fb">
<h3><i class="fas fa-wallet"></i> <span data-lang="totalPay">Total Payment</span></h3>
<div class="stat-value" id="totalPayment">?0</div>
<div class="stat-label" data-lang="principalInt">Principal + Interest</div>
</div>
</div>
<div class="charts-container">
<div class="chart-card">
<h3><i class="fas fa-chart-pie"></i> <span data-lang="breakdown">Payment Breakdown</span></h3>
<div class="chart-wrapper"><canvas id="pieChart"></canvas></div>
</div>
<div class="chart-card">
<h3><i class="fas fa-chart-area"></i> <span data-lang="paymentTime">Payment Over Time</span></h3>
<div class="chart-wrapper"><canvas id="lineChart"></canvas></div>
</div>
</div>
<div class="amortization-section">
<h3><i class="fas fa-table"></i> <span data-lang="schedule">Amortization Schedule</span></h3>
<p style="color:#666;margin-bottom:20px" data-lang="scheduleDesc">Period-by-period payment breakdown</p>
<div class="table-container">
<table id="scheduleTable">
<thead><tr><th data-lang="period">Period</th><th data-lang="payment">Payment</th><th data-lang="principal">Principal</th><th data-lang="interest">Interest</th><th data-lang="balance">Balance</th></tr></thead>
<tbody id="amortizationBody"><tr><td colspan="5" style="text-align:center;color:#999;padding:30px" data-lang="clickCalc">Click Calculate</td></tr></tbody>
</table>
</div>
</div>
</div>
</div>

<!-- SEO Content Section -->
<div class="seo-content">
<article class="content-section">
<h2><i class="fas fa-info-circle"></i> Complete Guide to EMI Calculator 2025</h2>
<p>Welcome to the most advanced and user-friendly <strong>EMI Calculator</strong> available online. Whether you're planning to buy your dream home, purchase a new car, or need a personal loan, our comprehensive calculator helps you make informed financial decisions with accurate monthly installment calculations.</p>

<h3><i class="fas fa-calculator"></i> What is an EMI Calculator?</h3>
<p>An <strong>EMI (Equated Monthly Installment) Calculator</strong> is a powerful financial tool that helps you calculate the monthly payment amount you need to make towards your loan. It considers three key factors: the principal loan amount, the interest rate, and the loan tenure. Our calculator provides instant results with detailed breakdowns, making loan planning simple and transparent.</p>

<div class="feature-grid">
<div class="feature-item">
<i class="fas fa-bolt"></i>
<h4>Instant Calculations</h4>
<p>Get immediate results with real-time calculations as you adjust loan parameters</p>
</div>
<div class="feature-item">
<i class="fas fa-chart-pie"></i>
<h4>Visual Analytics</h4>
<p>Interactive charts showing principal vs interest breakdown and payment trends</p>
</div>
<div class="feature-item">
<i class="fas fa-globe"></i>
<h4>Multi-Language</h4>
<p>Available in 10+ languages including English, Hindi, Spanish, French, German, Arabic, Chinese, and more</p>
</div>
<div class="feature-item">
<i class="fas fa-money-bill"></i>
<h4>15+ Currencies</h4>
<p>Calculate in your preferred currency - INR, USD, EUR, GBP, JPY, AUD, CAD, and more</p>
</div>
</div>

<h3><i class="fas fa-graduation-cap"></i> How to Use This EMI Calculator</h3>
<ol class="steps-list">
<li><strong>Enter Loan Amount:</strong> Input the total amount you wish to borrow (principal amount)</li>
<li><strong>Set Interest Rate:</strong> Enter the annual interest rate offered by your lender</li>
<li><strong>Choose Tenure:</strong> Select your loan repayment period in years, months, weeks, or days</li>
<li><strong>Select Payment Frequency:</strong> Choose monthly, weekly, or daily payment schedule</li>
<li><strong>Add Prepayment (Optional):</strong> Include any one-time prepayment to see interest savings</li>
<li><strong>Click Calculate:</strong> Get instant results with detailed amortization schedule</li>
</ol>

<h3><i class="fas fa-formula"></i> EMI Calculation Formula Explained</h3>
<p>Our calculator uses the standard reducing balance method with the formula:</p>
<div class="formula-box">
<strong>EMI = [P × R × (1+R)^N] / [(1+R)^N-1]</strong>
<div class="formula-legend">
<p><strong>Where:</strong></p>
<ul>
<li>P = Principal loan amount</li>
<li>R = Monthly interest rate (Annual rate/12/100)</li>
<li>N = Loan tenure in months</li>
</ul>
</div>
</div>

<h3><i class="fas fa-home"></i> Types of Loans You Can Calculate</h3>
<div class="loan-types">
<div class="loan-card">
<i class="fas fa-home"></i>
<h4>Home Loan EMI</h4>
<p>Calculate monthly installments for housing loans, mortgage, home construction, or plot purchase with tenures up to 30 years.</p>
</div>
<div class="loan-card">
<i class="fas fa-car"></i>
<h4>Car Loan EMI</h4>
<p>Determine affordable car financing options with accurate EMI calculations for new or used vehicle purchases.</p>
</div>
<div class="loan-card">
<i class="fas fa-user"></i>
<h4>Personal Loan EMI</h4>
<p>Plan your personal expenses with EMI calculations for education, medical, wedding, or any personal need.</p>
</div>
<div class="loan-card">
<i class="fas fa-building"></i>
<h4>Business Loan EMI</h4>
<p>Calculate EMIs for business expansion, equipment purchase, or working capital with flexible tenure options.</p>
</div>
</div>

<h3><i class="fas fa-star"></i> Advanced Features</h3>
<ul class="features-list">
<li><i class="fas fa-check"></i> <strong>Detailed Amortization Schedule:</strong> Period-by-period breakdown of principal and interest payments</li>
<li><i class="fas fa-check"></i> <strong>Interactive Charts:</strong> Visual representation with pie and line charts powered by Chart.js</li>
<li><i class="fas fa-check"></i> <strong>Prepayment Calculator:</strong> See how one-time prepayments reduce your total interest burden</li>
<li><i class="fas fa-check"></i> <strong>Multiple Payment Frequencies:</strong> Calculate for monthly, weekly, or daily payment schedules</li>
<li><i class="fas fa-check"></i> <strong>Custom Tenure Options:</strong> Mix years, weeks, and days for precise loan period calculation</li>
<li><i class="fas fa-check"></i> <strong>Export Options:</strong> Download as PDF, print, share, or export to CSV</li>
<li><i class="fas fa-check"></i> <strong>Mobile Responsive:</strong> Works perfectly on all devices - desktop, tablet, and mobile</li>
<li><i class="fas fa-check"></i> <strong>Real-time Calculations:</strong> Instant updates as you adjust loan parameters</li>
</ul>

<h3><i class="fas fa-lightbulb"></i> Smart Tips to Reduce Your EMI</h3>
<div class="tips-section">
<div class="tip-card">
<i class="fas fa-piggy-bank"></i>
<h4>Increase Down Payment</h4>
<p>Making a larger down payment reduces your principal loan amount, directly lowering your monthly EMI and total interest paid.</p>
</div>
<div class="tip-card">
<i class="fas fa-clock"></i>
<h4>Choose Right Tenure</h4>
<p>Longer tenure means lower EMI but higher total interest. Find the optimal balance based on your repayment capacity.</p>
</div>
<div class="tip-card">
<i class="fas fa-percentage"></i>
<h4>Negotiate Interest Rates</h4>
<p>Compare offers from multiple lenders. Even 0.5% difference in interest rate can save thousands over loan tenure.</p>
</div>
<div class="tip-card">
<i class="fas fa-hand-holding-usd"></i>
<h4>Make Prepayments</h4>
<p>Partial prepayments reduce your outstanding principal, significantly cutting down interest burden and loan tenure.</p>
</div>
</div>

<h3><i class="fas fa-balance-scale"></i> Understanding Flat vs Reducing Interest Rate</h3>
<p><strong>Flat Interest Rate:</strong> Interest calculated on the original principal throughout the loan tenure. Though it appears lower, you end up paying more.</p>
<p><strong>Reducing Balance Method:</strong> Interest calculated only on the outstanding principal balance. As you repay, the principal reduces, lowering the interest component. This is the most common and borrower-friendly method used by our calculator.</p>

<h3><i class="fas fa-shield-alt"></i> Why Choose Our EMI Calculator?</h3>
<ul class="benefits-list">
<li><strong>100% Free:</strong> No hidden charges, no registration required</li>
<li><strong>Accurate Results:</strong> Uses industry-standard calculation methods</li>
<li><strong>Privacy Protected:</strong> All calculations happen in your browser, no data stored</li>
<li><strong>Regularly Updated:</strong> Latest features and improvements added continuously</li>
<li><strong>Expert Developed:</strong> Created by financial calculation experts</li>
<li><strong>No Ads Distraction:</strong> Clean, professional interface focused on results</li>
</ul>

<h3><i class="fas fa-users"></i> Who Should Use This Calculator?</h3>
<p>Our EMI Calculator is designed for:</p>
<ul>
<li><strong>Home Buyers:</strong> Planning to purchase property with housing loan</li>
<li><strong>Car Buyers:</strong> Looking to finance vehicle purchase</li>
<li><strong>Personal Loan Seekers:</strong> Need funds for education, medical, wedding, or personal expenses</li>
<li><strong>Business Owners:</strong> Planning business expansion or equipment purchase</li>
<li><strong>Financial Advisors:</strong> Helping clients with loan planning</li>
<li><strong>Students:</strong> Understanding loan concepts and EMI calculations</li>
<li><strong>Anyone:</strong> Wanting to understand loan affordability before applying</li>
</ul>
</div>
</div>

<!-- FAQ Section -->
<div class="faq-section">
<h2><i class="fas fa-question-circle"></i> Frequently Asked Questions (FAQ)</h2>

<div class="faq-container">
<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>What is EMI and how is it calculated?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p><strong>EMI (Equated Monthly Installment)</strong> is the fixed amount you pay every month to your lender towards your loan repayment. It includes both principal and interest components.</p>
<p>The EMI is calculated using the formula: <strong>EMI = [P × R × (1+R)^N] / [(1+R)^N-1]</strong></p>
<p>Where P = Principal loan amount, R = Monthly interest rate, N = Loan tenure in months</p>
<p>Our calculator uses this standard formula with the reducing balance method, which means interest is calculated only on the outstanding principal balance, making it borrower-friendly.</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>How can I reduce my EMI amount?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p>There are several strategies to reduce your EMI:</p>
<ul>
<li><strong>Increase Down Payment:</strong> Pay more upfront to reduce the principal loan amount</li>
<li><strong>Opt for Longer Tenure:</strong> Spreading payments over more time reduces monthly EMI (but increases total interest)</li>
<li><strong>Negotiate Lower Interest Rate:</strong> Compare offers from multiple lenders and negotiate for better rates</li>
<li><strong>Make Prepayments:</strong> Regular partial prepayments reduce outstanding principal and can lower future EMIs</li>
<li><strong>Improve Credit Score:</strong> Better credit score helps you qualify for lower interest rates</li>
<li><strong>Refinance Your Loan:</strong> If market rates drop, consider refinancing at a lower rate</li>
</ul>
<p>Use our prepayment feature to see exactly how much you can save!</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>What is the difference between flat rate and reducing balance?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p><strong>Flat Rate Method:</strong></p>
<ul>
<li>Interest is calculated on the original principal amount throughout the loan tenure</li>
<li>EMI remains constant, but you pay more total interest</li>
<li>Less common and more expensive for borrowers</li>
<li>Example: On ?10 lakh at 10% for 5 years, you pay ?5 lakh interest</li>
</ul>
<p><strong>Reducing Balance Method (Used by our calculator):</strong></p>
<ul>
<li>Interest calculated only on the outstanding principal balance</li>
<li>As you repay, principal reduces, so interest component decreases</li>
<li>Most common method used by banks and financial institutions</li>
<li>More borrower-friendly with lower total interest</li>
<li>Example: On same ?10 lakh, you pay around ?2.75 lakh interest</li>
</ul>
<p>Our calculator uses the reducing balance method for accurate, real-world calculations.</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>Can I prepay my loan to save on interest?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p>Yes! Loan prepayment is one of the most effective ways to save on interest. Here's what you need to know:</p>
<p><strong>Benefits of Prepayment:</strong></p>
<ul>
<li>Reduces outstanding principal amount</li>
<li>Significantly lowers total interest paid</li>
<li>Can reduce loan tenure or monthly EMI</li>
<li>Helps you become debt-free faster</li>
</ul>
<p><strong>Types of Prepayment:</strong></p>
<ul>
<li><strong>Part Payment:</strong> Pay lump sum towards principal while continuing EMIs</li>
<li><strong>Full Prepayment:</strong> Close the loan completely before tenure ends</li>
</ul>
<p><strong>Important Points:</strong></p>
<ul>
<li>Check with your lender about prepayment charges (usually 2-5% of outstanding)</li>
<li>Many banks offer zero prepayment charges for floating rate home loans</li>
<li>Fixed rate loans may have higher prepayment penalties</li>
<li>Use our calculator's prepayment feature to see potential savings</li>
</ul>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>What is an amortization schedule?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p>An <strong>amortization schedule</strong> is a detailed table showing the breakdown of each EMI payment throughout your loan tenure.</p>
<p><strong>What it includes:</strong></p>
<ul>
<li><strong>Payment Number:</strong> Month or period of payment</li>
<li><strong>EMI Amount:</strong> Total installment paid</li>
<li><strong>Principal Component:</strong> Amount going towards repaying the loan</li>
<li><strong>Interest Component:</strong> Amount paid as interest to lender</li>
<li><strong>Outstanding Balance:</strong> Remaining loan amount after each payment</li>
</ul>
<p><strong>Key Insights:</strong></p>
<ul>
<li>In early years, interest component is higher</li>
<li>As loan progresses, principal component increases</li>
<li>Helps you understand where your money goes each month</li>
<li>Useful for tax planning (interest is often tax-deductible)</li>
</ul>
<p>Our calculator generates a complete amortization schedule with visual charts for easy understanding.</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>How much loan EMI can I afford?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p>Financial experts recommend the following guidelines for affordable EMI:</p>
<p><strong>The 50-30-20 Rule:</strong></p>
<ul>
<li>50% of income for needs (including EMI)</li>
<li>30% for wants</li>
<li>20% for savings and investments</li>
</ul>
<p><strong>EMI-to-Income Ratio:</strong></p>
<ul>
<li><strong>Ideal:</strong> Your total EMI should not exceed 40-50% of your monthly income</li>
<li><strong>Safe Zone:</strong> Keep EMI below 35% for comfortable repayment</li>
<li><strong>Warning:</strong> EMI above 50% may strain your finances</li>
</ul>
<p><strong>Example Calculation:</strong></p>
<ul>
<li>Monthly Income: ?50,000</li>
<li>Recommended Maximum EMI: ?20,000 (40%)</li>
<li>Safe EMI Range: ?15,000-17,500 (30-35%)</li>
</ul>
<p><strong>Other Factors to Consider:</strong></p>
<ul>
<li>Existing loans and EMIs</li>
<li>Monthly expenses and obligations</li>
<li>Emergency fund requirements</li>
<li>Future financial goals</li>
<li>Job stability and income growth prospects</li>
</ul>
<p>Use our calculator to find the loan amount that fits your budget!</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>Is this EMI calculator accurate and free to use?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p><strong>Yes, absolutely!</strong> Our EMI calculator is 100% free to use with no hidden charges, registration, or data collection.</p>
<p><strong>Accuracy Guarantee:</strong></p>
<ul>
<li>Uses industry-standard EMI calculation formula</li>
<li>Implements reducing balance method used by banks</li>
<li>Validated against real loan calculations</li>
<li>Results match bank EMI calculators</li>
<li>Regularly tested and updated</li>
</ul>
<p><strong>Privacy & Security:</strong></p>
<ul>
<li>All calculations happen in your browser</li>
<li>No data sent to servers</li>
<li>No personal information required</li>
<li>No cookies or tracking</li>
<li>Complete privacy guaranteed</li>
</ul>
<p><strong>Features Included:</strong></p>
<ul>
<li>Unlimited calculations</li>
<li>Advanced amortization schedule</li>
<li>Interactive charts and graphs</li>
<li>PDF export and sharing</li>
<li>Multiple languages and currencies</li>
<li>Mobile-friendly interface</li>
</ul>
<p>Use it as many times as you need, completely free!</p>
</div>
</div>

<div class="faq-item">
<div class="faq-question" onclick="toggleFAQ(this)">
<h3>What documents are needed to apply for a loan?</h3>
<i class="fas fa-chevron-down"></i>
</div>
<div class="faq-answer">
<p>While our calculator helps you plan, here are typical documents required for loan application:</p>
<p><strong>Identity Proof:</strong></p>
<ul>
<li>Aadhaar Card</li>
<li>PAN Card (mandatory)</li>
<li>Passport</li>
<li>Voter ID</li>
<li>Driving License</li>
</ul>
<p><strong>Address Proof:</strong></p>
<ul>
<li>Aadhaar Card</li>
<li>Utility bills (electricity, water, gas)</li>
<li>Bank statements</li>
<li>Rent agreement</li>
</ul>
<p><strong>Income Proof:</strong></p>
<ul>
<li><strong>Salaried:</strong> Last 3-6 months salary slips, Form 16, bank statements</li>
<li><strong>Self-employed:</strong> ITR of last 2-3 years, profit & loss statement, balance sheet</li>
<li><strong>Business:</strong> Business registration, GST returns, bank statements</li>
</ul>
<p><strong>For Home Loan - Additional:</strong></p>
<ul>
<li>Property documents</li>
<li>Sale agreement</li>
<li>Allotment letter</li>
<li>No Objection Certificate (NOC)</li>
</ul>
<p><strong>For Car Loan - Additional:</strong></p>
<ul>
<li>Proforma invoice from dealer</li>
<li>Vehicle registration details</li>
</ul>
<p>Note: Requirements vary by lender and loan type. Check with your specific bank or financial institution.</p>
</div>
</div>
</div>
</div>

<!-- History Modal -->
<div class="modal" id="historyModal">
<div class="modal-content">
<div class="modal-header">
<h2><i class="fas fa-history"></i> Calculation History</h2>
<button class="modal-close" onclick="closeHistory()">&times;</button>
</div>
<div class="modal-body">
<div class="history-controls">
<button class="compare-btn" id="compareBtn" onclick="compareSelected()" disabled>
<i class="fas fa-exchange-alt"></i> Compare Selected
</button>
<button class="clear-btn" onclick="clearAllHistory()">
<i class="fas fa-trash"></i> Clear All
</button>
</div>
<div id="historyList" class="history-list">
<!-- History items loaded by JavaScript -->
</div>
</div>
</div>
</div>

<!-- Compare Modal -->
<div class="modal" id="compareModal">
<div class="modal-content modal-large">
<div class="modal-header">
<h2><i class="fas fa-exchange-alt"></i> Compare Calculations</h2>
<button class="modal-close" onclick="closeCompare()">&times;</button>
</div>
<div class="modal-body">
<div id="compareView" class="compare-view">
<!-- Comparison content loaded by JavaScript -->
</div>
<canvas id="compareChart" style="max-height:300px;margin-top:20px"></canvas>
</div>
</div>
</div>

</div>
<script>
// ========================================
// EMI CALCULATOR CONFIGURATION
// ========================================

const EMIConfig = {
    currencies: {
        INR: { symbol: '?', name: 'INR (Rupee)', flag: '????' },
        USD: { symbol: '$', name: 'USD (Dollar)', flag: '????' },
        EUR: { symbol: '', name: 'EUR (Euro)', flag: '????' },
        GBP: { symbol: '£', name: 'GBP (Pound)', flag: '????' },
        JPY: { symbol: '¥', name: 'JPY (Yen)', flag: '????' },
        AUD: { symbol: '$', name: 'AUD (Dollar)', flag: '????' },
        CAD: { symbol: '$', name: 'CAD (Dollar)', flag: '????' },
        AED: { symbol: '?.?', name: 'AED (Dirham)', flag: '????' },
        SAR: { symbol: '?', name: 'SAR (Riyal)', flag: '????' },
        CNY: { symbol: '¥', name: 'CNY (Yuan)', flag: '????' },
        CHF: { symbol: 'Fr', name: 'CHF (Franc)', flag: '????' },
        KRW: { symbol: '?', name: 'KRW (Won)', flag: '????' },
        BRL: { symbol: 'R$', name: 'BRL (Real)', flag: '????' },
        RUB: { symbol: '?', name: 'RUB (Ruble)', flag: '????' },
        MXN: { symbol: '$', name: 'MXN (Peso)', flag: '????' }
    },
    translations: {
        en: {
            name: 'English', flag: '????',
            strings: {
                title: "Advanced EMI Calculator", subtitle: "Calculate your loan EMI with detailed amortization schedule",
                loanDetails: "Loan Details", loanAmount: "Loan Amount", interestRate: "Interest Rate (% per annum)",
                loanTenure: "Loan Tenure", years: "Years", months: "Months", weeks: "Weeks", days: "Days", custom: "Custom",
                paymentFreq: "Payment Frequency", monthly: "Monthly", weekly: "Weekly", daily: "Daily",
                prepayment: "One-time Prepayment", prepaymentPeriod: "Prepayment Period", calculate: "Calculate EMI",
                print: "Print", pdf: "PDF", share: "Share", export: "Export", smartTip: "Smart Tip",
                tipText: "Making prepayments can significantly reduce your interest burden and loan tenure.",
                yourEMI: "Your Payment", for: "for", periods: "periods", principal: "Principal", loanAmt: "Loan Amount",
                totalInt: "Total Interest", intPayable: "Interest Payable", totalPay: "Total Payment",
                principalInt: "Principal + Interest", breakdown: "Payment Breakdown", paymentTime: "Payment Over Time",
                schedule: "Amortization Schedule", scheduleDesc: "Period-by-period payment breakdown",
                period: "Period", payment: "Payment", interest: "Interest", balance: "Balance",
                clickCalc: "Click Calculate", backHub: "Back to Hub"
            }
        },
        hi: {
            name: '??????', flag: '????',
            strings: {
                title: "????? ????? ?????????", subtitle: "??????? ??????? ??????? ?? ??? ???? ?? ????? ?? ???? ????",
                loanDetails: "?? ?????", loanAmount: "?? ????", interestRate: "????? ?? (% ????? ????)",
                loanTenure: "?? ????", years: "????", months: "?????", weeks: "??????", days: "???", custom: "?????",
                paymentFreq: "?????? ???????", monthly: "?????", weekly: "?????????", daily: "?????",
                prepayment: "??????? ????? ??????", prepaymentPeriod: "????? ?????? ????", calculate: "????? ?? ???? ????",
                print: "??????", pdf: "??????", share: "????", export: "???????", smartTip: "??????? ???",
                tipText: "????? ?????? ???? ?? ???? ????? ??? ?? ?? ???? ??? ???? ??? ? ???? ???",
                yourEMI: "???? ??????", for: "?? ???", periods: "????", principal: "?????", loanAmt: "?? ????",
                totalInt: "??? ?????", intPayable: "??? ?????", totalPay: "??? ??????",
                principalInt: "????? + ?????", breakdown: "?????? ?????", paymentTime: "??? ?? ??? ??????",
                schedule: "??????? ???????", scheduleDesc: "????-??-???? ?????? ?????",
                period: "????", payment: "??????", interest: "?????", balance: "??? ????",
                clickCalc: "???? ???? ?? ????? ????", backHub: "?? ?? ???? ????"
            }
        }
    },
    defaults: {
        language: 'en', currency: 'INR', loanAmount: 500000, interestRate: 10,
        tenure: 10, tenureType: 'years', paymentFreq: 'monthly', prepayment: 0, prepaymentPeriod: 12
    }
};

// ========================================
// OPTIMIZED EMI CALCULATOR
// ========================================

let pieChart=null,lineChart=null,compareChart=null,currentLang=EMIConfig.defaults.language,currentCurrency=EMIConfig.defaults.currency;

// ========================================
// PRIVACY MODE & HISTORY SYSTEM
// ========================================

let privacyMode = false;
let calculationHistory = [];
const HISTORY_KEY = 'emiCalculatorHistory';
const PRIVACY_KEY = 'emiPrivacyMode';

// Load privacy mode state
function loadPrivacyMode() {
    const saved = localStorage.getItem(PRIVACY_KEY);
    if (saved === 'true') {
        privacyMode = true;
        document.getElementById('privacyToggle').classList.add('active');
        document.getElementById('privacyIndicator').style.display = 'flex';
    }
}

// Toggle Privacy Mode
function togglePrivacyMode() {
    privacyMode = !privacyMode;
    const toggle = document.getElementById('privacyToggle');
    const indicator = document.getElementById('privacyIndicator');
    
    if (privacyMode) {
        // Enable Privacy Mode
        toggle.classList.add('active');
        indicator.style.display = 'flex';
        localStorage.setItem(PRIVACY_KEY, 'true');
        
        // Clear all history
        localStorage.removeItem(HISTORY_KEY);
        calculationHistory = [];
        updateHistoryCount();
        
        alert('?? Privacy Mode Enabled\n\nAll calculation history has been cleared.\nNew calculations will NOT be saved.\nYour data stays completely private!');
    } else {
        // Disable Privacy Mode
        toggle.classList.remove('active');
        indicator.style.display = 'none';
        localStorage.setItem(PRIVACY_KEY, 'false');
        
        alert('Privacy Mode Disabled\n\nCalculations will now be saved to history for your convenience.');
    }
}

// Load History from localStorage
function loadHistory() {
    if (privacyMode) return;
    
    const saved = localStorage.getItem(HISTORY_KEY);
    if (saved) {
        try {
            calculationHistory = JSON.parse(saved);
        } catch (e) {
            calculationHistory = [];
        }
    }
    updateHistoryCount();
}

// Save Calculation to History
function saveToHistory(data) {
    if (privacyMode) return; // Don't save in privacy mode
    
    const historyItem = {
        id: Date.now(),
        timestamp: new Date().toISOString(),
        ...data
    };
    
    calculationHistory.unshift(historyItem); // Add to beginning
    
    // Keep only last 50 calculations
    if (calculationHistory.length > 50) {
        calculationHistory = calculationHistory.slice(0, 50);
    }
    
    localStorage.setItem(HISTORY_KEY, JSON.stringify(calculationHistory));
    updateHistoryCount();
}

// Update History Count Badge
function updateHistoryCount() {
    const count = calculationHistory.length;
    document.getElementById('historyCount').textContent = count;
}

// Open History Modal
function openHistory() {
    const modal = document.getElementById('historyModal');
    const historyList = document.getElementById('historyList');
    
    if (calculationHistory.length === 0) {
        historyList.innerHTML = `
            <div class="empty-history">
                <i class="fas fa-history"></i>
                <h3>No History Yet</h3>
                <p>Your calculation history will appear here.<br>Start calculating to build your history!</p>
            </div>
        `;
    } else {
        historyList.innerHTML = calculationHistory.map(item => {
            const date = new Date(item.timestamp);
            const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            
            return `
                <div class="history-item" data-id="${item.id}">
                    <input type="checkbox" class="history-checkbox" onchange="toggleHistorySelection(this, ${item.id})">
                    <div class="history-header">
                        <div>
                            <h3 style="color:#1a1a2e;margin-bottom:5px;font-size:1.1rem">
                                <i class="fas fa-calculator"></i> EMI Calculation
                            </h3>
                            <span class="history-date">${dateStr}</span>
                        </div>
                        <button class="history-delete" onclick="deleteHistory(${item.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    <div class="history-details">
                        <div class="history-detail">
                            <div class="history-detail-label">Loan Amount</div>
                            <div class="history-detail-value">${item.currency}${item.loanAmount.toLocaleString()}</div>
                        </div>
                        <div class="history-detail">
                            <div class="history-detail-label">Interest Rate</div>
                            <div class="history-detail-value">${item.interestRate}%</div>
                        </div>
                        <div class="history-detail">
                            <div class="history-detail-label">Tenure</div>
                            <div class="history-detail-value">${item.tenure} ${item.tenureType}</div>
                        </div>
                        <div class="history-detail">
                            <div class="history-detail-label">EMI Amount</div>
                            <div class="history-detail-value">${item.currency}${Math.round(item.emiAmount).toLocaleString()}</div>
                        </div>
                        <div class="history-detail">
                            <div class="history-detail-label">Total Interest</div>
                            <div class="history-detail-value">${item.currency}${Math.round(item.totalInterest).toLocaleString()}</div>
                        </div>
                        <div class="history-detail">
                            <div class="history-detail-label">Total Payment</div>
                            <div class="history-detail-value">${item.currency}${Math.round(item.totalPayment).toLocaleString()}</div>
                        </div>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
}

// Close History Modal
function closeHistory() {
    document.getElementById('historyModal').classList.remove('show');
    document.body.style.overflow = 'auto';
}

// Delete Single History Item
function deleteHistory(id) {
    if (confirm('Are you sure you want to delete this calculation?')) {
        calculationHistory = calculationHistory.filter(item => item.id !== id);
        localStorage.setItem(HISTORY_KEY, JSON.stringify(calculationHistory));
        updateHistoryCount();
        openHistory(); // Refresh view
    }
}

// Clear All History
function clearAllHistory() {
    if (confirm('Are you sure you want to clear all history?\n\nThis action cannot be undone.')) {
        calculationHistory = [];
        localStorage.removeItem(HISTORY_KEY);
        updateHistoryCount();
        openHistory(); // Refresh view
    }
}

// Toggle History Item Selection
let selectedHistory = [];
function toggleHistorySelection(checkbox, id) {
    if (checkbox.checked) {
        selectedHistory.push(id);
        checkbox.parentElement.classList.add('selected');
    } else {
        selectedHistory = selectedHistory.filter(itemId => itemId !== id);
        checkbox.parentElement.classList.remove('selected');
    }
    
    // Enable/disable compare button
    const compareBtn = document.getElementById('compareBtn');
    compareBtn.disabled = selectedHistory.length < 2;
}

// Compare Selected Calculations
function compareSelected() {
    if (selectedHistory.length < 2) {
        alert('Please select at least 2 calculations to compare.');
        return;
    }
    
    const itemsToCompare = calculationHistory.filter(item => 
        selectedHistory.includes(item.id)
    ).slice(0, 4); // Max 4 comparisons
    
    displayComparison(itemsToCompare);
}

// Display Comparison View
function displayComparison(items) {
    const compareView = document.getElementById('compareView');
    
    compareView.innerHTML = items.map((item, index) => {
        const date = new Date(item.timestamp).toLocaleDateString();
        
        return `
            <div class="compare-card">
                <h3><i class="fas fa-chart-bar"></i> Calculation ${index + 1} (${date})</h3>
                <div class="compare-row">
                    <span class="compare-label">Loan Amount:</span>
                    <span class="compare-value">${item.currency}${item.loanAmount.toLocaleString()}</span>
                </div>
                <div class="compare-row">
                    <span class="compare-label">Interest Rate:</span>
                    <span class="compare-value">${item.interestRate}%</span>
                </div>
                <div class="compare-row">
                    <span class="compare-label">Tenure:</span>
                    <span class="compare-value">${item.tenure} ${item.tenureType}</span>
                </div>
                <div class="compare-row">
                    <span class="compare-label">EMI:</span>
                    <span class="compare-value">${item.currency}${Math.round(item.emiAmount).toLocaleString()}</span>
                </div>
                <div class="compare-row">
                    <span class="compare-label">Total Interest:</span>
                    <span class="compare-value">${item.currency}${Math.round(item.totalInterest).toLocaleString()}</span>
                </div>
                <div class="compare-row">
                    <span class="compare-label">Total Payment:</span>
                    <span class="compare-value">${item.currency}${Math.round(item.totalPayment).toLocaleString()}</span>
                </div>
            </div>
        `;
    }).join('');
    
    // Add comparison summary
    if (items.length >= 2) {
        const diff1 = items[0];
        const diff2 = items[1];
        
        const emiDiff = diff1.emiAmount - diff2.emiAmount;
        const interestDiff = diff1.totalInterest - diff2.totalInterest;
        const totalDiff = diff1.totalPayment - diff2.totalPayment;
        
        compareView.innerHTML += `
            <div class="compare-difference">
                <h4><i class="fas fa-calculator"></i> Comparison: Option 1 vs Option 2</h4>
                <div class="compare-diff-item">
                    <span class="compare-diff-label">EMI Difference:</span>
                    <span class="compare-diff-value ${emiDiff > 0 ? 'negative' : 'positive'}">
                        ${emiDiff > 0 ? '+' : ''}${Math.round(emiDiff).toLocaleString()}
                    </span>
                </div>
                <div class="compare-diff-item">
                    <span class="compare-diff-label">Interest Difference:</span>
                    <span class="compare-diff-value ${interestDiff > 0 ? 'negative' : 'positive'}">
                        ${interestDiff > 0 ? '+' : ''}${Math.round(interestDiff).toLocaleString()}
                    </span>
                </div>
                <div class="compare-diff-item">
                    <span class="compare-diff-label">Total Payment Difference:</span>
                    <span class="compare-diff-value ${totalDiff > 0 ? 'negative' : 'positive'}">
                        ${totalDiff > 0 ? '+' : ''}${Math.round(totalDiff).toLocaleString()}
                    </span>
                </div>
                <p style="margin-top:10px;font-size:.85rem;color:#666">
                    <strong>?? Tip:</strong> ${interestDiff > 0 ? 'Option 2 saves you more interest!' : 'Option 1 saves you more interest!'}
                </p>
            </div>
        `;
    }
    
    // Create comparison chart
    createComparisonChart(items);
    
    // Open compare modal
    document.getElementById('compareModal').classList.add('show');
    document.body.style.overflow = 'hidden';
}

// Create Comparison Chart
function createComparisonChart(items) {
    const ctx = document.getElementById('compareChart').getContext('2d');
    
    if (compareChart) compareChart.destroy();
    
    const labels = items.map((item, i) => `Option ${i + 1}`);
    const emiData = items.map(item => item.emiAmount);
    const principalData = items.map(item => item.loanAmount);
    const interestData = items.map(item => item.totalInterest);
    
    compareChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'EMI Amount',
                data: emiData,
                backgroundColor: '#667eea',
                borderRadius: 8
            }, {
                label: 'Principal',
                data: principalData,
                backgroundColor: '#f093fb',
                borderRadius: 8
            }, {
                label: 'Total Interest',
                data: interestData,
                backgroundColor: '#f5576c',
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    position: 'top'
                },
                tooltip: {
                    callbacks: {
                        label: (context) => {
                            return context.dataset.label + ': ' + 
                                   EMIConfig.currencies[currentCurrency].symbol + 
                                   Math.round(context.parsed.y).toLocaleString();
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: (value) => EMIConfig.currencies[currentCurrency].symbol + 
                                           (value / 1000).toFixed(0) + 'K'
                    }
                }
            }
        }
    });
}

// Close Compare Modal
function closeCompare() {
    document.getElementById('compareModal').classList.remove('show');
    document.body.style.overflow = 'auto';
    selectedHistory = [];
}

// Close modals on outside click
window.onclick = function(event) {
    const historyModal = document.getElementById('historyModal');
    const compareModal = document.getElementById('compareModal');
    
    if (event.target === historyModal) {
        closeHistory();
    }
    if (event.target === compareModal) {
        closeCompare();
    }
}

// Initialize dropdowns from config
window.addEventListener('DOMContentLoaded',()=>{
    // Load privacy mode and history
    loadPrivacyMode();
    loadHistory();
    const langSelect=document.getElementById('languageSelector');
    const currSelect=document.getElementById('currencySelector');
    
    // Populate languages
    Object.keys(EMIConfig.translations).forEach(code=>{
        const lang=EMIConfig.translations[code];
        langSelect.innerHTML+=`<option value="${code}">${lang.flag} ${lang.name}</option>`;
    });
    
    // Populate currencies
    Object.keys(EMIConfig.currencies).forEach(code=>{
        const curr=EMIConfig.currencies[code];
        currSelect.innerHTML+=`<option value="${code}">${curr.flag} ${curr.symbol} ${curr.name}</option>`;
    });
    
    // Set defaults
    langSelect.value=currentLang;
    currSelect.value=currentCurrency;
    
    // Load default values
    document.getElementById('loanAmount').value=EMIConfig.defaults.loanAmount;
    document.getElementById('loanAmountRange').value=EMIConfig.defaults.loanAmount;
    document.getElementById('interest').value=EMIConfig.defaults.interestRate;
    document.getElementById('interestRange').value=EMIConfig.defaults.interestRate;
    document.getElementById('tenure').value=EMIConfig.defaults.tenure;
    document.getElementById('tenureRange').value=EMIConfig.defaults.tenure;
    
    calc();
});

// Switch language
function switchLang(lang){
    currentLang=lang;
    const strings=EMIConfig.translations[lang].strings;
    document.querySelectorAll('[data-lang]').forEach(el=>{
        const key=el.getAttribute('data-lang');
        if(strings[key])el.textContent=strings[key];
    });
    document.querySelectorAll('[data-lang-opt]').forEach(opt=>{
        const key=opt.getAttribute('data-lang-opt');
        if(strings[key])opt.textContent=strings[key];
    });
    if(pieChart||lineChart)calc();
}

// Change currency
function changeCurrency(curr){
    currentCurrency=curr;
    const symbol=EMIConfig.currencies[curr].symbol;
    document.getElementById('currencySymbol').textContent=symbol;
    document.getElementById('currencySymbol2').textContent=symbol;
    calc();
}
function toggleCustomTenure(){const type=document.getElementById('tenureType').value;document.getElementById('customTenure').style.display=type==='custom'?'grid':'none'}
// Sync range sliders with number inputs
document.getElementById("loanAmountRange").addEventListener("input",e=>{document.getElementById("loanAmount").value=e.target.value;calc()});
document.getElementById("loanAmount").addEventListener("input",e=>{document.getElementById("loanAmountRange").value=e.target.value;calc()});
document.getElementById("interestRange").addEventListener("input",e=>{document.getElementById("interest").value=e.target.value;calc()});
document.getElementById("interest").addEventListener("input",e=>{document.getElementById("interestRange").value=e.target.value;calc()});
document.getElementById("tenureRange").addEventListener("input",e=>{document.getElementById("tenure").value=e.target.value;calc()});
document.getElementById("tenure").addEventListener("input",e=>{document.getElementById("tenureRange").value=e.target.value;calc()});
function formatCurrency(a){const symbol=EMIConfig.currencies[currentCurrency].symbol;return symbol+Math.round(a).toLocaleString("en-IN")}
function getTotalPeriods(){const type=document.getElementById('tenureType').value,tenure=parseFloat(document.getElementById('tenure').value)||0;if(type==='custom'){const years=parseFloat(document.getElementById('customYears').value)||0,weeks=parseFloat(document.getElementById('customWeeks').value)||0,days=parseFloat(document.getElementById('customDays').value)||0;return Math.round(years*365+weeks*7+days)}else if(type==='years')return tenure*365;else if(type==='months')return tenure*30;else if(type==='weeks')return tenure*7;else return tenure}
function getPaymentPeriods(){const freq=document.getElementById('paymentFreq').value,totalDays=getTotalPeriods();if(freq==='monthly')return Math.ceil(totalDays/30);else if(freq==='weekly')return Math.ceil(totalDays/7);else return totalDays}
function calc(){const principal=parseFloat(document.getElementById("loanAmount").value)||0,annualRate=parseFloat(document.getElementById("interest").value)||0,paymentFreq=document.getElementById('paymentFreq').value,prepay=parseFloat(document.getElementById("prepayment").value)||0,prepayPeriod=parseInt(document.getElementById("prepaymentMonth").value)||0;if(principal<=0)return;const totalPeriods=getPaymentPeriods();let periodsPerYear=12;if(paymentFreq==='weekly')periodsPerYear=52;else if(paymentFreq==='daily')periodsPerYear=365;const periodRate=annualRate/100/periodsPerYear,payment=principal*periodRate*Math.pow(1+periodRate,totalPeriods)/(Math.pow(1+periodRate,totalPeriods)-1);document.getElementById("emiAmount").textContent=formatCurrency(payment);document.getElementById("emiTenure").textContent=Math.round(totalPeriods);const totalPayment=payment*totalPeriods,totalInterest=totalPayment-principal;document.getElementById("principalAmount").textContent=formatCurrency(principal);document.getElementById("totalInterest").textContent=formatCurrency(totalInterest);document.getElementById("totalPayment").textContent=formatCurrency(totalPayment);generateAmortization(principal,payment,periodRate,totalPeriods,prepay,prepayPeriod);updatePieChart(principal,totalInterest);updateLineChart(principal,payment,periodRate,totalPeriods,prepay,prepayPeriod);
    
    // Save to history (only if privacy mode is OFF)
    const tenureType=document.getElementById('tenureType').value;
    const tenure=parseFloat(document.getElementById('tenure').value)||0;
    saveToHistory({
        loanAmount: principal,
        interestRate: annualRate,
        tenure: tenure,
        tenureType: tenureType,
        paymentFreq: paymentFreq,
        currency: EMIConfig.currencies[currentCurrency].symbol,
        emiAmount: payment,
        totalInterest: totalInterest,
        totalPayment: totalPayment,
        totalPeriods: totalPeriods
    })}
function generateAmortization(principal,payment,rate,periods,prepay,prepayPeriod){const tbody=document.getElementById("amortizationBody");tbody.innerHTML="";let balance=principal;for(let i=1;i<=periods;i++){if(balance<=0)break;const interestPayment=balance*rate;let principalPayment=payment-interestPayment;if(i===prepayPeriod&&prepay>0)principalPayment+=prepay;if(principalPayment>balance)principalPayment=balance;balance-=principalPayment;const row=tbody.insertRow(),highlight=i===prepayPeriod&&prepay>0;row.className=highlight?"highlight":"";row.innerHTML=`<td style="font-weight:600">${i}</td><td>${formatCurrency(payment+(highlight?prepay:0))}</td><td style="color:#667eea;font-weight:600">${formatCurrency(principalPayment)}</td><td style="color:#f5576c;font-weight:600">${formatCurrency(interestPayment)}</td><td style="font-weight:700">${formatCurrency(Math.max(0,balance))}</td>`;if(balance<=0)break}}
function updatePieChart(principal,interest){const ctx=document.getElementById("pieChart").getContext("2d");if(pieChart)pieChart.destroy();const strings=EMIConfig.translations[currentLang].strings;pieChart=new Chart(ctx,{type:"doughnut",data:{labels:[strings.principal,strings.totalInt],datasets:[{data:[principal,interest],backgroundColor:["#667eea","#f5576c"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:a=>{const lbl=a.label||"",val=formatCurrency(a.parsed),total=a.dataset.data.reduce((x,y)=>x+y,0),pct=(a.parsed/total*100).toFixed(1);return lbl+": "+val+" ("+pct+"%)"}}}}}})}
function updateLineChart(principal,payment,rate,periods,prepay,prepayPeriod){const ctx=document.getElementById("lineChart").getContext("2d"),labels=[],principalData=[],interestData=[];let balance=principal;for(let i=1;i<=periods;i++){if(balance<=0)break;const intPay=balance*rate;let prinPay=payment-intPay;if(i===prepayPeriod&&prepay>0)prinPay+=prepay;if(prinPay>balance)prinPay=balance;labels.push(i);principalData.push(prinPay);interestData.push(intPay);balance-=prinPay}if(lineChart)lineChart.destroy();const strings=EMIConfig.translations[currentLang].strings;lineChart=new Chart(ctx,{type:"line",data:{labels:labels,datasets:[{label:strings.principal+" "+strings.payment,data:principalData,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.4},{label:strings.interest+" "+strings.payment,data:interestData,borderColor:"#f5576c",backgroundColor:"rgba(245, 87, 108, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:a=>a.dataset.label+": "+formatCurrency(a.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:a=>EMIConfig.currencies[currentCurrency].symbol+(a/1e3).toFixed(0)+"K"}},x:{title:{display:!0,text:strings.period}}}}})};
function updateLineChart(principal,payment,rate,periods,prepay,prepayPeriod){const ctx=document.getElementById("lineChart").getContext("2d"),labels=[],principalData=[],interestData=[];let balance=principal;for(let i=1;i<=periods;i++){if(balance<=0)break;const intPay=balance*rate;let prinPay=payment-intPay;if(i===prepayPeriod&&prepay>0)prinPay+=prepay;if(prinPay>balance)prinPay=balance;labels.push(i);principalData.push(prinPay);interestData.push(intPay);balance-=prinPay}if(lineChart)lineChart.destroy();lineChart=new Chart(ctx,{type:"line",data:{labels:labels,datasets:[{label:translations[currentLang].principal+" "+translations[currentLang].payment,data:principalData,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.4},{label:translations[currentLang].interest+" "+translations[currentLang].payment,data:interestData,borderColor:"#f5576c",backgroundColor:"rgba(245, 87, 108, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:a=>a.dataset.label+": "+formatCurrency(a.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:a=>"?"+(a/1e3).toFixed(0)+"K"}},x:{title:{display:!0,text:translations[currentLang].period}}}}})}
function printResults(){window.print()}
function downloadPDF(){const element=document.querySelector('.container');const opt={margin:10,filename:'EMI-Calculator-'+new Date().toISOString().split('T')[0]+'.pdf',image:{type:'jpeg',quality:0.98},html2canvas:{scale:2},jsPDF:{unit:'mm',format:'a4',orientation:'portrait'}};html2pdf().set(opt).from(element).save()}
function shareResults(){const emi=document.getElementById('emiAmount').textContent,tenure=document.getElementById('emiTenure').textContent,total=document.getElementById('totalPayment').textContent,strings=EMIConfig.translations[currentLang].strings,text=`${strings.title}\n${strings.payment}: ${emi}\n${strings.periods}: ${tenure}\n${strings.totalPay}: ${total}`;if(navigator.share){navigator.share({title:strings.title,text:text,url:window.location.href}).catch(err=>console.log('Share failed',err))}else{navigator.clipboard.writeText(text).then(()=>alert(currentLang==='hi'?'?????????? ?? ???? ???? ???!':'Copied to clipboard!')).catch(err=>alert('Copy failed'))}}
function exportData(){const table=document.getElementById('scheduleTable');let csv='';table.querySelectorAll('tr').forEach(row=>{const cols=row.querySelectorAll('th, td');const rowData=Array.from(cols).map(col=>'"'+col.textContent.replace(/"/g,'""')+'"').join(',');csv+=rowData+'\n'});const blob=new Blob([csv],{type:'text/csv'});const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='EMI-Schedule-'+new Date().toISOString().split('T')[0]+'.csv';a.click()}
// FAQ Toggle Function
function toggleFAQ(element){
    const faqItem = element.parentElement;
    const answer = faqItem.querySelector('.faq-answer');
    const isActive = element.classList.contains('active');
    
    // Close all other FAQs
    document.querySelectorAll('.faq-question').forEach(q => {
        q.classList.remove('active');
        q.parentElement.querySelector('.faq-answer').classList.remove('show');
    });
    
    // Toggle current FAQ
    if (!isActive) {
        element.classList.add('active');
        answer.classList.add('show');
    }
}

calc();
</script>
</body>
</html>

