<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Kidney Function Calculator - eGFR & CKD Stage Assessment</title>
    <meta name="description" content="Calculate estimated Glomerular Filtration Rate (eGFR) using CKD-EPI formula. Assess kidney function and chronic kidney disease stage. Free medical calculator!">
    <meta name="keywords" content="egfr calculator, kidney function calculator, gfr calculator, chronic kidney disease, ckd stages, creatinine calculator, kidney health, renal function">
    <link rel="canonical" href="https://calculatorloop.com/Health/Disease-Risk-and-Prevention/Kidney-Function-Calculator.html">
    <meta property="og:title" content="Kidney Function Calculator - eGFR & CKD Stage">
    <meta property="og:description" content="Calculate kidney function using eGFR and assess chronic kidney disease stage.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://calculatorloop.com/Health/Disease-Risk-and-Prevention/Kidney-Function-Calculator.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kidney Function Calculator - eGFR Assessment">
    <meta name="twitter:description" content="Calculate eGFR and assess kidney function and CKD stage.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --bg-gradient-start: #667eea;
    --bg-gradient-end: #764ba2;
    --container-bg: #ffffff;
    --text-primary: #1a1a1a;
    --text-secondary: #666;
    --text-tertiary: #555;
    --border-color: #e0e0e0;
    --input-bg: #ffffff;
    --card-bg: #f8f9fa;
    --shadow: rgba(0,0,0,0.15);
}
body.dark-mode {
    --bg-gradient-start: #1a1a2e;
    --bg-gradient-end: #16213e;
    --container-bg: #0f3460;
    --text-primary: #e8e8e8;
    --text-secondary: #b8b8b8;
    --text-tertiary: #a0a0a0;
    --border-color: #2a4663;
    --input-bg: #1a2942;
    --card-bg: #1a2942;
    --shadow: rgba(0,0,0,0.3);
}
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); 
    min-height: 100vh; 
    padding: 10px; 
    line-height: 1.6; 
    transition: background 0.5s ease;
}
.header-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 1000;
}
.back-btn, .dark-mode-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px var(--shadow);
}
.back-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
}
.back-btn:hover {
    transform: translateY(-3px) rotate(-5deg);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
.dark-mode-toggle {
    background: var(--container-bg);
    color: var(--text-primary);
    animation: float 3s ease-in-out infinite;
}
.dark-mode-toggle:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 6px 25px var(--shadow);
}
.dark-mode-toggle i {
    transition: transform 0.5s ease;
}
.dark-mode .dark-mode-toggle i {
    transform: rotate(180deg);
}
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}
.container { 
    max-width: 680px; 
    margin: 0 auto; 
    background: var(--container-bg); 
    border-radius: 16px; 
    box-shadow: 0 8px 32px var(--shadow); 
    padding: 24px; 
    margin-bottom: 20px;
    transition: all 0.3s ease;
}
h1 { 
    color: var(--text-primary); 
    text-align: center; 
    margin-bottom: 8px; 
    font-size: clamp(1.5rem, 5vw, 2rem); 
    font-weight: 700; 
    line-height: 1.2;
}
h2 {
    color: var(--text-primary);
    transition: color 0.3s ease;
}
h3 {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
.subtitle { 
    text-align: center; 
    color: var(--text-secondary); 
    margin-bottom: 24px; 
    font-size: clamp(0.875rem, 3vw, 1rem); 
}
.input-group { 
    margin-bottom: 20px; 
}
label { 
    display: block; 
    margin-bottom: 8px; 
    color: var(--text-tertiary); 
    font-weight: 600; 
    font-size: clamp(0.875rem, 3vw, 0.95rem);
}
input, select, textarea { 
    width: 100%; 
    padding: 12px 14px; 
    border: 2px solid var(--border-color); 
    border-radius: 8px; 
    font-size: clamp(0.9rem, 3vw, 1rem); 
    transition: all 0.3s; 
    font-family: inherit;
    background: var(--input-bg);
    color: var(--text-primary);
}
input:focus, select:focus, textarea:focus { 
    outline: none; 
    border-color: #667eea; 
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
.btn { 
    width: 100%; 
    padding: 14px; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    color: white; 
    border: none; 
    border-radius: 8px; 
    font-size: clamp(1rem, 3.5vw, 1.1rem); 
    font-weight: 600; 
    cursor: pointer; 
    transition: all 0.3s; 
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}
.btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); 
}
.btn:active { 
    transform: translateY(0); 
}
.result { 
    margin-top: 24px; 
    padding: 24px; 
    background: linear-gradient(135deg, var(--card-bg) 0%, var(--card-bg) 100%); 
    border-radius: 12px; 
    display: none;
    transition: all 0.3s ease;
}
.result-value { 
    font-size: clamp(2rem, 8vw, 3rem); 
    color: #667eea; 
    font-weight: 700; 
    text-align: center; 
    margin: 16px 0; 
    word-break: break-word;
}
.result-card { 
    background: var(--input-bg); 
    padding: 16px; 
    border-radius: 8px; 
    margin: 12px 0; 
    box-shadow: 0 2px 8px var(--shadow);
    transition: all 0.3s ease;
}
.result-card h3 { 
    font-size: clamp(1rem, 4vw, 1.2rem); 
    margin-bottom: 10px; 
    color: var(--text-tertiary);
}
.result-card h4 { 
    font-size: clamp(0.9rem, 3.5vw, 1.05rem); 
    margin: 12px 0 8px 0; 
    color: var(--text-tertiary);
}
.result-card p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-secondary); 
    margin: 8px 0; 
    line-height: 1.6;
}
.result-card strong { 
    color: var(--text-tertiary); 
}
.info-box { 
    background: var(--card-bg); 
    border-left: 4px solid #667eea; 
    padding: 16px; 
    margin: 20px 0; 
    border-radius: 8px;
    transition: all 0.3s ease;
}
.info-box h3 { 
    font-size: clamp(1rem, 4vw, 1.15rem); 
    color: var(--text-tertiary); 
    margin-bottom: 8px;
}
.info-box p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-tertiary); 
    line-height: 1.6;
}
.back-link { 
    display: inline-block; 
    margin-top: 16px; 
    color: #667eea; 
    text-decoration: none; 
    font-weight: 600; 
    font-size: clamp(0.9rem, 3vw, 1rem);
}
.back-link:hover { 
    text-decoration: underline; 
}
article p, article ul li {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
/* FAQ Accordion Styles */
.faq-item {
    margin-bottom: 15px;
    background: var(--card-bg);
    border-left: 4px solid #667eea;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}
.faq-question {
    padding: 18px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    transition: all 0.3s ease;
}
.faq-question:hover {
    background: var(--input-bg);
}
.faq-question h3 {
    font-size: clamp(0.95rem, 3.5vw, 1.05rem);
    color: var(--text-tertiary);
    margin: 0;
    flex: 1;
}
.faq-icon {
    font-size: 1.2rem;
    color: #667eea;
    transition: transform 0.3s ease;
    margin-left: 15px;
}
.faq-item.active .faq-icon {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
    padding: 0 20px;
}
.faq-item.active .faq-answer {
    max-height: 1000px;
    padding: 0 20px 18px 20px;
}
.faq-answer p {
    line-height: 1.8;
    color: var(--text-tertiary);
    margin: 0;
}
@media (max-width: 480px) {
    body { padding: 8px; }
    .container { padding: 20px 16px; border-radius: 12px; }
    h1 { margin-bottom: 6px; }
    .subtitle { margin-bottom: 20px; }
    .input-group { margin-bottom: 16px; }
    .btn { padding: 13px; }
    .result { padding: 20px 16px; margin-top: 20px; }
    .result-card { padding: 14px; }
    .info-box { padding: 14px; }
    .header-controls { top: 10px; right: 10px; gap: 8px; }
    .back-btn, .dark-mode-toggle { width: 45px; height: 45px; font-size: 1.1rem; }
}
@media (min-width: 768px) {
    body { padding: 20px; }
    .container { padding: 40px; }
}
    
/* Chat Widget Styles */
.chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}
.chat-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
    position: relative;
}
.chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.chat-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff4757;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    animation: bounce 1s infinite;
}
@keyframes pulse {
    0%, 100% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4); }
    50% { box-shadow: 0 4px 30px rgba(102, 126, 234, 0.7); }
}
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.chat-window {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 350px;
    height: 500px;
    background: var(--container-bg);
    border-radius: 16px;
    box-shadow: 0 8px 40px var(--shadow);
    display: none;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}
.chat-window.active {
    display: flex;
}
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.chat-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 15px;
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.chat-header h4 {
    margin: 0;
    font-size: 1rem;
    color: white;
}
.chat-close {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}
.chat-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}
.chat-message {
    margin-bottom: 15px;
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.chat-message.bot .message-content {
    background: var(--card-bg);
    padding: 12px;
    border-radius: 12px;
    color: var(--text-tertiary);
}
.chat-message.user .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 12px;
    border-radius: 12px;
    color: white;
    margin-left: auto;
    max-width: 80%;
}
.message-content ul {
    margin: 10px 0 0 20px;
    line-height: 1.8;
}
.chat-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
}
.chat-footer input {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: var(--input-bg);
    color: var(--text-primary);
}
.chat-footer button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}
.chat-footer button:hover {
    transform: scale(1.1);
}

/* Analytics Dashboard Styles */
.analytics-toggle {
    position: fixed;
    bottom: 100px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    z-index: 9998;
    animation: slideInRight 0.5s ease;
}
@keyframes slideInRight {
    from { transform: translateX(100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
.analytics-toggle:hover {
    transform: translateX(-5px);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.analytics-dashboard {
    position: fixed;
    top: 0;
    right: -100%;
    width: 450px;
    height: 100vh;
    background: var(--container-bg);
    box-shadow: -5px 0 30px var(--shadow);
    z-index: 10000;
    overflow-y: auto;
    transition: right 0.4s ease;
}
.analytics-dashboard.active {
    right: 0;
}
.analytics-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 10;
}
.analytics-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: white;
}
.analytics-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s;
}
.analytics-close:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
}
.analytics-content {
    padding: 20px;
}
.analytics-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px var(--shadow);
    animation: fadeInUp 0.5s ease;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.analytics-card h4 {
    color: var(--text-tertiary);
    margin-bottom: 15px;
    font-size: 1.1rem;
}
.stat-row {
    display: flex;
    gap: 15px;
    justify-content: space-between;
}
.stat-item {
    flex: 1;
    text-align: center;
    padding: 15px;
    background: var(--input-bg);
    border-radius: 8px;
}
.stat-value {
    font-size: 2rem;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
}
.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.chart-container {
    position: relative;
    height: 200px;
}
.chart-container canvas {
    max-height: 100%;
}

@media (max-width: 480px) {
    .chat-window {
        width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        height: 450px;
    }
    .analytics-dashboard {
        width: 100%;
    }
    .analytics-toggle {
        bottom: 95px;
        font-size: 0.9rem;
        padding: 10px 16px;
    }
    .chat-button {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
    }
}
    </style>
</head>
<body>
<!-- Enhanced Header with Dark Mode and Back Button -->
<div class="header-controls">
    <a href="javascript:history.back()" class="back-btn" title="Go Back">
        <i class="fas fa-arrow-left"></i>
    </a>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        <i class="fas fa-moon"></i>
    </button>
</div>
    <div class="container">
        <h1><i class="fas fa-kidneys"></i> Kidney Function Calculator</h1>
        <p class="subtitle">Calculate eGFR and assess kidney health</p>
        
        <div class="input-group">
            <label><i class="fas fa-birthday-cake"></i> Age</label>
            <input type="number" id="age" value="55" min="18" max="100">
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-venus-mars"></i> Gender</label>
            <select id="gender">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-vial"></i> Serum Creatinine (mg/dL)</label>
            <input type="number" id="creatinine" value="1.2" min="0.1" max="15" step="0.1">
            <small style="color: #666; display: block; margin-top: 5px;">From blood test results</small>
        </div>
        
        <div class="input-group">
            <label><i class="fas fa-palette"></i> Race</label>
            <select id="race">
                <option value="other">White or Other</option>
                <option value="black">Black/African American</option>
            </select>
        </div>
        
        <button class="btn" onclick="calculateKidneyFunction()"><i class="fas fa-calculator"></i> Calculate eGFR</button>
        
        <div class="result" id="result">
            <h2>Kidney Function Assessment</h2>
            <div class="result-value" id="egfrValue">0</div>
            <p style="text-align: center; font-size: 1.1rem; color: #666;">mL/min/1.73m²</p>
            
            <div class="result-card">
                <div id="stageIndicator" class="stage-indicator"></div>
                <p><strong>CKD Stage:</strong> <span id="ckdStage"></span></p>
                <p><strong>Kidney Function:</strong> <span id="functionLevel"></span></p>
                <p><strong>Clinical Action:</strong> <span id="clinicalAction"></span></p>
                <p style="margin-top:15px;" id="interpretation"></p>
            </div>
        </div>
        
        <div class="info-box">
            <h3><i class="fas fa-info-circle"></i> About eGFR</h3>
            <p>Estimated Glomerular Filtration Rate (eGFR) measures how well your kidneys filter waste from blood. It's calculated using the CKD-EPI formula based on creatinine, age, gender, and race. Normal eGFR is 90 or above. Lower values indicate reduced kidney function.</p>
        </div>
        
        
    </div>

    <article class="article-content">
        <h2>Understanding Kidney Function and eGFR</h2>
        <p>Your kidneys perform the vital function of filtering waste products and excess fluids from your blood. The estimated Glomerular Filtration Rate (eGFR) is the most important measure of kidney function, indicating how much blood your kidneys can filter per minute. Understanding your eGFR helps assess kidney health and detect chronic kidney disease (CKD) early.</p>
        
        <h2>What is eGFR?</h2>
        <p>Glomerular Filtration Rate represents the volume of fluid filtered from the kidney's capillaries into Bowman's capsule per unit time. While direct GFR measurement requires complex procedures, eGFR estimates this using simple blood test values. The CKD-EPI (Chronic Kidney Disease Epidemiology Collaboration) equation is the most accurate formula, using serum creatinine, age, gender, and race.</p>
        
        <h3>Normal eGFR Values</h3>
        <p>Normal eGFR is 90 mL/min/1.73m² or above. However, slight decreases with aging are normal. Young healthy adults typically have eGFR of 90-120. After age 40, eGFR naturally declines about 1 mL/min/1.73m² per year. An eGFR of 60-89 in older adults without other kidney disease indicators may be normal for age.</p>
        
        <h2>Chronic Kidney Disease Stages</h2>
        
        <h3>Stage 1: Kidney Damage with Normal eGFR (≥90)</h3>
        <p>Kidneys function normally but show evidence of damage (protein in urine, abnormal imaging, or biopsy findings). Most people have no symptoms. Focus on identifying and treating underlying cause, controlling blood pressure and blood sugar, and preventing progression.</p>
        
        <h3>Stage 2: Mildly Decreased eGFR (60-89)</h3>
        <p>Slight reduction in kidney function with evidence of damage. Usually no symptoms. Important to identify underlying cause, manage risk factors (diabetes, hypertension), and monitor for progression. Most people at this stage don't develop kidney failure with proper management.</p>
        
        <h3>Stage 3a: Mild to Moderate Decrease (45-59)</h3>
        <p>Kidney function moderately reduced. Some people develop symptoms like fatigue, swelling, or changes in urination. Increased risk of cardiovascular disease. Regular monitoring essential. Treatment focuses on slowing progression and managing complications like anemia and bone disease.</p>
        
        <h3>Stage 3b: Moderate to Severe Decrease (30-44)</h3>
        <p>Kidney function significantly reduced. Symptoms more likely including fatigue, swelling, changes in urination frequency, and potentially nausea. High risk of progression to kidney failure. Nephrology referral recommended. Prepare for potential need for dialysis or transplant.</p>
        
        <h3>Stage 4: Severely Decreased (15-29)</h3>
        <p>Severe loss of kidney function. Most people experience symptoms including severe fatigue, nausea, loss of appetite, swelling, shortness of breath, and concentration difficulties. Active preparation for kidney replacement therapy (dialysis or transplant) essential. Nephrologist-guided management crucial.</p>
        
        <h3>Stage 5: Kidney Failure (<15)</h3>
        <p>Kidneys have lost nearly all ability to function effectively. Life-threatening without treatment. Dialysis or kidney transplant necessary for survival. Symptoms severe and affect quality of life significantly. Requires comprehensive nephrology care and often nutritional counseling.</p>
        
        <h2>Understanding Creatinine</h2>
        <p>Creatinine is a waste product from normal muscle metabolism. Healthy kidneys filter creatinine from blood and excrete it in urine. When kidney function declines, creatinine accumulates in blood. Serum creatinine levels reflect kidney function but are influenced by muscle mass, age, gender, race, diet, and certain medications.</p>
        
        <h3>Normal Creatinine Ranges</h3>
        <p>Normal serum creatinine is approximately 0.7-1.3 mg/dL for men and 0.6-1.1 mg/dL for women. However, muscular individuals may have higher creatinine without kidney disease, while elderly or thin individuals may have lower creatinine despite reduced kidney function. This is why eGFR, which accounts for these factors, is more accurate than creatinine alone.</p>
        
        <h2>Causes of Chronic Kidney Disease</h2>
        
        <h3>Diabetes</h3>
        <p>Diabetes is the leading cause of CKD, accounting for about 40% of cases. High blood sugar damages kidney blood vessels over time. Type 1 and Type 2 diabetes both cause diabetic nephropathy. Good blood sugar control significantly reduces CKD risk. All people with diabetes should have kidney function tested annually.</p>
        
        <h3>High Blood Pressure</h3>
        <p>Hypertension is the second leading cause of CKD (about 25% of cases). High pressure damages kidney blood vessels, reducing their filtering ability. CKD also causes high blood pressure, creating a harmful cycle. Blood pressure control is crucial for preventing and slowing CKD progression. Target is typically <130/80 mmHg for people with CKD.</p>
        
        <h3>Glomerulonephritis</h3>
        <p>Group of diseases causing inflammation of kidney filtering units (glomeruli). Can result from infections, autoimmune diseases, or unknown causes. May present as blood or protein in urine, swelling, or high blood pressure. Some types respond to immunosuppressive treatment.</p>
        
        <h3>Polycystic Kidney Disease</h3>
        <p>Genetic disorder causing numerous cysts to grow in kidneys, gradually replacing normal kidney tissue. Most common inherited kidney disease. Autosomal dominant PKD typically manifests in adulthood, while autosomal recessive form appears in infancy or childhood. No cure exists, but blood pressure control helps slow progression.</p>
        
        <h3>Other Causes</h3>
        <p>Prolonged urinary obstruction (kidney stones, enlarged prostate, tumors), recurrent kidney infections, certain medications (NSAIDs, some antibiotics, contrast dyes), toxins (lead, cadmium), and certain autoimmune diseases (lupus, vasculitis) can all cause CKD.</p>
        
        <h2>Risk Factors for Kidney Disease</h2>
        <p>Major risk factors include diabetes, high blood pressure, heart disease, family history of kidney disease, age over 60, obesity, smoking, and certain ethnicities (African American, Hispanic, Native American, Asian). Having one or more risk factors doesn't mean you'll develop CKD, but warrants regular screening.</p>
        
        <h2>Symptoms of Kidney Disease</h2>
        <p>Early CKD typically causes no symptoms—"silent disease." As kidney function declines, symptoms may include fatigue and weakness, difficulty concentrating, poor appetite, trouble sleeping, muscle cramping at night, swollen feet and ankles, puffiness around eyes, dry itchy skin, increased or decreased urination, and blood or foam in urine.</p>
        
        <p>These symptoms are non-specific and can have many causes. Some people with advanced CKD still feel relatively well. This is why screening through blood and urine tests is essential for people with risk factors.</p>
        
        <h2>Preventing Kidney Disease Progression</h2>
        
        <h3>Blood Pressure Control</h3>
        <p>Maintaining blood pressure below 130/80 mmHg is crucial. ACE inhibitors or ARBs are preferred for people with CKD as they protect kidneys beyond blood pressure lowering. Even small blood pressure reductions significantly slow CKD progression.</p>
        
        <h3>Blood Sugar Management</h3>
        <p>For people with diabetes, maintaining HbA1c below 7% (or individualized target) protects kidneys. Intensive blood sugar control in early diabetes significantly reduces kidney disease risk. Even in established diabetic kidney disease, good control slows progression.</p>
        
        <h3>Lifestyle Modifications</h3>
        <p>Maintain healthy weight, exercise regularly (aim for 150 minutes weekly moderate activity), quit smoking (smoking accelerates CKD progression), limit alcohol, and manage stress. These lifestyle factors significantly impact kidney disease progression.</p>
        
        <h3>Dietary Considerations</h3>
        <p>Reduce sodium intake (less than 2,300 mg daily, ideally <2,000 mg with CKD). In advanced CKD, protein restriction may help (0.8-1.0 g/kg body weight daily). Limit phosphorus and potassium in later stages. A renal dietitian can provide personalized guidance.</p>
        
        <h3>Avoid Kidney-Damaging Substances</h3>
        <p>Limit NSAIDs (ibuprofen, naproxen)—use acetaminophen for pain when possible. Avoid unnecessary supplements and herbal remedies (many are processed by kidneys). Contrast dyes used in some imaging tests can damage kidneys—ensure adequate hydration and discuss alternatives with your doctor. Review all medications with healthcare providers.</p>
        
        <h3>Regular Monitoring</h3>
        <p>Follow recommended testing schedule: Stage 1-2 CKD typically yearly; Stage 3 every 3-6 months; Stage 4-5 every 1-3 months. Monitor not just eGFR but also urine protein, electrolytes, blood count, and bone minerals. Early detection of complications allows prompt treatment.</p>
        
        <h2>Complications of Chronic Kidney Disease</h2>
        
        <h3>Cardiovascular Disease</h3>
        <p>CKD significantly increases heart disease and stroke risk. People with CKD are more likely to die from cardiovascular disease than progress to kidney failure. Aggressive management of blood pressure, cholesterol, and diabetes is essential. Consider cardiology evaluation for comprehensive risk reduction.</p>
        
        <h3>Anemia</h3>
        <p>Kidneys produce erythropoietin, stimulating red blood cell production. CKD reduces this, causing anemia (usually Stage 3-4 onward). Symptoms include fatigue, weakness, shortness of breath, and difficulty concentrating. Treatment includes iron supplementation and sometimes erythropoiesis-stimulating agents.</p>
        
        <h3>Bone Disease</h3>
        <p>CKD disrupts calcium, phosphorus, and vitamin D balance, leading to renal osteodystrophy (bone disease). Bones become weak and prone to fracture. Prevention includes phosphorus restriction, phosphate binders, vitamin D supplementation, and medications to normalize calcium and parathyroid hormone levels.</p>
        
        <h3>Fluid and Electrolyte Imbalances</h3>
        <p>Failing kidneys can't properly regulate fluid, sodium, potassium, and acid-base balance. This causes swelling, high blood pressure, heart rhythm abnormalities (from high potassium), and metabolic acidosis. Management includes dietary restrictions, medications, and eventually dialysis.</p>
        
        <h2>When to See a Nephrologist</h2>
        <p>Nephrology referral is recommended for: eGFR <30 (Stage 4-5), eGFR declining >5 mL/min/1.73m² per year, protein in urine (>300 mg/day or ACR >300 mg/g), protein and blood in urine simultaneously, uncontrolled hypertension despite multiple medications, hereditary kidney disease, recurrent kidney stones, or unclear cause of CKD.</p>
        
        <h2>Living with Chronic Kidney Disease</h2>
        <p>Many people with CKD live full, active lives. Key is early detection, understanding your condition, adhering to treatment plans, maintaining healthy lifestyle, and working closely with your healthcare team. Support groups and patient education resources help cope with emotional and practical challenges of CKD.</p>
        
        <p>Even advanced CKD doesn't necessarily mean poor quality of life. Modern dialysis techniques and successful transplant outcomes allow many people to work, travel, and enjoy activities. Preparation and education about treatment options empower better decision-making if kidney replacement therapy becomes necessary.</p>
        
        <h2>Conclusion</h2>
        <p>Understanding your kidney function through eGFR assessment is crucial for maintaining renal health. Regular screening for those with risk factors enables early detection when interventions are most effective. If you have CKD, working proactively with healthcare providers to manage underlying causes, control blood pressure and blood sugar, and make lifestyle modifications can significantly slow progression and prevent complications. Use our calculator to understand your eGFR, but always discuss results and treatment with qualified healthcare professionals.</p>
    </article>

    <section class="faq-section">
        <h2 style="text-align: center; margin-bottom: 30px;">Frequently Asked Questions</h2>
        
        <div class="faq-item">
            <h3>What is a normal eGFR?</h3>
            <p>Normal eGFR is 90 mL/min/1.73m² or higher. Values of 60-89 may be normal for older adults if there's no other evidence of kidney damage. Young healthy adults typically have eGFR of 90-120. eGFR naturally declines about 1 mL/min/1.73m² per year after age 40, so slightly lower values in elderly without other kidney problems may not indicate disease.</p>
        </div>
        
        <div class="faq-item">
            <h3>Can kidney function improve?</h3>
            <p>In early CKD stages caused by treatable conditions (like uncontrolled diabetes or blood pressure), kidney function can stabilize or even improve with aggressive treatment. However, once significant scarring occurs, improvement is unlikely. The goal becomes slowing or stopping further decline. Acute kidney injury (sudden kidney damage) often improves with treatment of underlying cause, unlike chronic kidney disease.</p>
        </div>
        
        <div class="faq-item">
            <h3>How often should I check my kidney function?</h3>
            <p>For people with diabetes or high blood pressure, annual testing is recommended. If you have diagnosed CKD: Stage 1-2 yearly, Stage 3 every 3-6 months, Stage 4-5 every 1-3 months. More frequent testing if eGFR declining rapidly or starting new medications. Discuss appropriate testing schedule with your doctor based on your individual risk factors.</p>
        </div>
        
        <div class="faq-item">
            <h3>What does protein in urine mean?</h3>
            <p>Proteinuria (protein in urine) indicates kidney damage. Normal kidneys prevent protein from leaking into urine. Small amounts of albumin (microalbuminuria, 30-300 mg/day) indicate early kidney damage. Larger amounts suggest more advanced damage. Proteinuria is both a sign of kidney disease and a risk factor for progression. ACE inhibitors or ARBs can reduce proteinuria and slow CKD progression.</p>
        </div>
        
        <div class="faq-item">
            <h3>When do you need dialysis?</h3>
            <p>Dialysis typically becomes necessary when eGFR falls below 10-15 (Stage 5 CKD) and you experience symptoms like severe fatigue, nausea, vomiting, fluid overload, or metabolic imbalances. However, timing varies individually. Some people need dialysis earlier due to severe symptoms or complications, while others with higher functioning kidneys but unmanageable complications may also require it. Decision made collaboratively with nephrologist.</p>
        </div>
        
        <div class="faq-item">
            <h3>Can you prevent kidney disease?</h3>
            <p>Yes, many cases are preventable. Maintain healthy blood pressure and blood sugar, maintain healthy weight, exercise regularly, don't smoke, limit alcohol, stay hydrated, limit NSAIDs, and get screened if you have risk factors. For people with diabetes or hypertension, good control dramatically reduces kidney disease risk. Early detection through screening enables interventions before irreversible damage occurs.</p>
        </div>
        
        <div class="faq-item">
            <h3>Is eGFR accurate for everyone?</h3>
            <p>eGFR is less accurate in people with extreme muscle mass (very muscular or very frail), extremes of body size, malnutrition, limb amputation, or during acute illness. For these populations, collecting 24-hour urine for creatinine clearance or using cystatin C-based equations provides better accuracy. Discuss with your doctor if you fall into these categories.</p>
        </div>
        
        <div class="faq-item">
            <h3>What's the difference between acute and chronic kidney disease?</h3>
            <p>Acute kidney injury (AKI) is sudden loss of kidney function over hours to days, often reversible with treatment of underlying cause (dehydration, medications, infection, obstruction). Chronic kidney disease (CKD) is gradual loss of function over months to years, usually progressive and irreversible. AKI can sometimes lead to CKD if damage is severe. Both require medical attention, but management approaches differ.</p>
        </div>
    </section>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is a normal eGFR?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Normal eGFR is 90 mL/min/1.73m² or higher. Values of 60-89 may be normal for older adults if there's no other evidence of kidney damage. Young healthy adults typically have eGFR of 90-120."
                }
            },
            {
                "@type": "Question",
                "name": "Can kidney function improve?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "In early CKD stages caused by treatable conditions, kidney function can stabilize or even improve with aggressive treatment. However, once significant scarring occurs, improvement is unlikely."
                }
            },
            {
                "@type": "Question",
                "name": "When do you need dialysis?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Dialysis typically becomes necessary when eGFR falls below 10-15 (Stage 5 CKD) and you experience symptoms like severe fatigue, nausea, vomiting, fluid overload, or metabolic imbalances."
                }
            }
        ]
    }
    </script>

    



        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>


        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>



<!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>How to use this calculator</li>
                        <li>Understanding your results</li>
                        <li>Health recommendations</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script>
        function calculateKidneyFunction() {
            const age = parseFloat(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const creatinine = parseFloat(document.getElementById('creatinine').value);
            const race = document.getElementById('race').value;
            
            if (!age || !creatinine) {
                alert('Please enter valid age and creatinine values');
                return;
            }

            // CKD-EPI 2009 Formula
            let k = (gender === 'female') ? 0.7 : 0.9;
            let a = (gender === 'female') ? -0.329 : -0.411;
            let genderFactor = (gender === 'female') ? 1.018 : 1;
            let raceFactor = (race === 'black') ? 1.159 : 1;

            let egfr = 141 * Math.pow(Math.min(creatinine / k, 1), a) * 
                       Math.pow(Math.max(creatinine / k, 1), -1.209) * 
                       Math.pow(0.993, age) * genderFactor * raceFactor;

            egfr = Math.round(egfr);

            // Determine Stage
            let stage = '', description = '', action = '', color = '';
            
            if (egfr >= 90) {
                stage = 'Stage 1';
                description = 'Normal or high kidney function';
                action = 'Screen for risk factors';
                color = '#4caf50';
            } else if (egfr >= 60) {
                stage = 'Stage 2';
                description = 'Mildly decreased kidney function';
                action = 'Estimate progression';
                color = '#8bc34a';
            } else if (egfr >= 45) {
                stage = 'Stage 3a';
                description = 'Mild to moderately decreased function';
                action = 'Treat complications';
                color = '#ffc107';
            } else if (egfr >= 30) {
                stage = 'Stage 3b';
                description = 'Moderate to severely decreased function';
                action = 'Treat complications';
                color = '#ff9800';
            } else if (egfr >= 15) {
                stage = 'Stage 4';
                description = 'Severely decreased kidney function';
                action = 'Prepare for replacement therapy';
                color = '#ff5722';
            } else {
                stage = 'Stage 5';
                description = 'Kidney failure';
                action = 'Replacement therapy (dialysis/transplant)';
                color = '#f44336';
            }

            // Update UI
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            document.getElementById('egfrValue').textContent = egfr;
            document.getElementById('ckdStage').textContent = stage;
            document.getElementById('functionLevel').textContent = description;
            document.getElementById('clinicalAction').textContent = action;
            
            const indicator = document.getElementById('stageIndicator');
            indicator.style.backgroundColor = color;
            indicator.textContent = stage;
            indicator.style.color = 'white';
            indicator.style.padding = '5px 10px';
            indicator.style.borderRadius = '4px';
            indicator.style.display = 'inline-block';
            indicator.style.marginBottom = '10px';

            document.getElementById('interpretation').innerHTML = `
                An eGFR of <strong>${egfr}</strong> places you in <strong>${stage}</strong>. 
                ${description}. Consult a healthcare provider for a comprehensive evaluation.
            `;
            
            if(typeof showActionButtons === 'function') showActionButtons();
        }
        
        // Calculate on page load if values exist
        // calculateKidneyFunction();
    </script>

    <!-- Rich Content Section -->
    <div class="container" style="margin-top: 30px;">
        <article>
            <h2 style="color: #667eea; margin-bottom: 20px;">Understanding Type 2 Diabetes Risk: Complete Prevention Guide</h2>
            
            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">What is Type 2 Diabetes?</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Type 2 diabetes is a chronic metabolic disorder characterized by high blood sugar levels resulting from insulin resistance and relative insulin deficiency. Unlike Type 1 diabetes, which is an autoimmune condition, Type 2 diabetes develops gradually and is largely preventable through lifestyle modifications. It affects how your body processes glucose, the main source of energy for cells.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    According to the International Diabetes Federation, over 537 million adults worldwide have diabetes, with Type 2 accounting for approximately 90% of cases. The condition often develops silently over years, with many people unaware they have prediabetes or early diabetes until complications arise.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Major Risk Factors for Type 2 Diabetes</h3>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Age:</strong> Risk increases significantly after age 45, though younger people are increasingly affected.</li>
                    <li><strong>Obesity/Overweight:</strong> BMI over 25 dramatically increases risk, especially with abdominal obesity.</li>
                    <li><strong>Family History:</strong> Having a parent or sibling with diabetes doubles your risk.</li>
                    <li><strong>Physical Inactivity:</strong> Sedentary lifestyle contributes to insulin resistance.</li>
                    <li><strong>Poor Diet:</strong> High intake of processed foods, sugar, and refined carbohydrates.</li>
                    <li><strong>Hypertension:</strong> Blood pressure over 140/90 mmHg increases risk.</li>
                    <li><strong>Prediabetes:</strong> Fasting glucose 100-125 mg/dL or HbA1c 5.7-6.4%.</li>
                    <li><strong>Gestational Diabetes:</strong> Having diabetes during pregnancy increases future risk.</li>
                    <li><strong>PCOS:</strong> Polycystic ovary syndrome is associated with insulin resistance.</li>
                    <li><strong>Sleep Disorders:</strong> Poor sleep quality and sleep apnea increase risk.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Early Warning Signs of Diabetes</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Many people with Type 2 diabetes experience no symptoms initially. However, common early signs include: increased thirst and frequent urination, unexplained hunger even after eating, fatigue and lack of energy, blurred vision, slow-healing wounds or frequent infections, tingling or numbness in hands or feet, and darkened skin patches (acanthosis nigricans), especially in body folds.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    If you experience these symptoms, especially with multiple risk factors, consult a healthcare provider for blood glucose testing. Early detection and intervention can prevent or delay diabetes complications.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">The Diabetes Prevention Program</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    The landmark Diabetes Prevention Program (DPP) study demonstrated that intensive lifestyle intervention can reduce Type 2 diabetes risk by 58% (71% in people over 60). The intervention focused on three key areas: 7% body weight loss through calorie reduction, 150 minutes of moderate physical activity per week, and ongoing support and education.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    These results show that diabetes is largely preventable, even in high-risk individuals. Small, sustainable lifestyle changes can have profound long-term effects on metabolic health.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Evidence-Based Prevention Strategies</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Weight Management:</strong> Losing just 5-10% of body weight significantly reduces diabetes risk. Focus on gradual, sustainable weight loss through balanced calorie deficit.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Physical Activity:</strong> Aim for 150 minutes of moderate-intensity exercise weekly. Both aerobic exercise and resistance training improve insulin sensitivity. Even breaking up sitting time with short walks helps.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Dietary Changes:</strong> Emphasize whole grains, vegetables, fruits, lean proteins, and healthy fats. Limit refined carbohydrates, sugary beverages, and processed foods. The Mediterranean diet has strong evidence for diabetes prevention.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Sleep Quality:</strong> Aim for 7-9 hours of quality sleep nightly. Poor sleep disrupts hormones that regulate blood sugar.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Stress Management:</strong> Chronic stress elevates cortisol, promoting insulin resistance. Practice stress-reduction techniques like meditation, yoga, or deep breathing.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">When to Get Tested</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    The American Diabetes Association recommends diabetes screening for all adults over 45, regardless of risk factors. Earlier and more frequent testing is recommended for those with: BMI ≥25 with additional risk factors, family history of diabetes, high-risk ethnicity (African American, Hispanic, Native American, Asian American, Pacific Islander), history of gestational diabetes, PCOS, prediabetes diagnosis, or physical inactivity.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Standard tests include fasting plasma glucose (FPG), HbA1c test, and oral glucose tolerance test (OGTT). Regular screening allows early intervention when lifestyle changes are most effective.
                </p>
            </section>
        </article>
    </div>

    <!-- FAQ Section -->
    <div class="container" style="margin-top: 30px;">
        <h2 style="color: #667eea; margin-bottom: 25px; text-align: center;">Diabetes Risk: Frequently Asked Questions</h2>
        
        <div class="faq-item"><div class="faq-question">
            <h3>1. Can Type 2 diabetes be prevented?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes! Research shows that lifestyle modifications can reduce Type 2 diabetes risk by 58-71%. Even in high-risk individuals, maintaining healthy weight, regular exercise, and balanced diet can prevent or significantly delay diabetes onset. The earlier you start, the more effective prevention becomes.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>2. What is prediabetes and why does it matter?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Prediabetes means blood sugar levels are higher than normal but not yet diabetic (fasting glucose 100-125 mg/dL or HbA1c 5.7-6.4%). About 70% of people with prediabetes eventually develop Type 2 diabetes without intervention. However, prediabetes is reversible through lifestyle changes, making it a critical window for prevention.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>3. How much weight loss is needed to reduce diabetes risk?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Losing just 5-10% of body weight significantly reduces diabetes risk. For someone weighing 200 pounds, that's only 10-20 pounds. The Diabetes Prevention Program showed that modest weight loss combined with increased physical activity reduced diabetes incidence by 58%, with even greater effects in older adults.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>4. Does family history mean I'll definitely get diabetes?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                No. While family history increases risk (you're 2-6 times more likely with affected first-degree relatives), it doesn't guarantee diabetes. Genetic predisposition can be significantly modified through lifestyle. Many people with strong family history never develop diabetes through healthy living, while others without family history develop it due to lifestyle factors.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>5. What foods should I avoid to prevent diabetes?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Limit sugary beverages (soda, sweetened tea, energy drinks), refined carbohydrates (white bread, pastries, white rice), processed meats (bacon, sausages, deli meats), fried foods, and foods high in saturated and trans fats. Focus instead on whole grains, vegetables, fruits, lean proteins, nuts, and healthy fats like olive oil.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>6. Can exercise alone prevent diabetes without weight loss?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes! Exercise improves insulin sensitivity independent of weight loss. Regular physical activity helps muscles use glucose more effectively, reduces visceral fat, and improves metabolic health. Even if weight doesn't change, exercise provides significant protection against diabetes. The recommendation is 150 minutes of moderate-intensity exercise weekly.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>7. At what age should I start worrying about diabetes?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                While Type 2 diabetes traditionally affected older adults, it's increasingly common in younger people due to rising obesity rates. Everyone over 45 should be screened. Those with risk factors (overweight, family history, sedentary lifestyle) should be screened earlier, starting in their 30s or even 20s. Prevention is easier than treatment, so early awareness is crucial.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>8. Is medication ever used for diabetes prevention?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes, in specific cases. Metformin may be prescribed for high-risk individuals with prediabetes, particularly those under 60 with BMI ≥35, or women with history of gestational diabetes. However, lifestyle modification remains the first-line prevention strategy. The DPP study showed lifestyle changes were more effective than metformin (58% vs 31% risk reduction).
            </p></div></div>
    </div>

    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Can Type 2 diabetes be prevented?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! Research shows that lifestyle modifications can reduce Type 2 diabetes risk by 58-71%. Even in high-risk individuals, maintaining healthy weight, regular exercise, and balanced diet can prevent or significantly delay diabetes onset."
                }
            },
            {
                "@type": "Question",
                "name": "What is prediabetes and why does it matter?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Prediabetes means blood sugar levels are higher than normal but not yet diabetic. About 70% of people with prediabetes eventually develop Type 2 diabetes without intervention. However, prediabetes is reversible through lifestyle changes."
                }
            },
            {
                "@type": "Question",
                "name": "How much weight loss is needed to reduce diabetes risk?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Losing just 5-10% of body weight significantly reduces diabetes risk. The Diabetes Prevention Program showed that modest weight loss combined with increased physical activity reduced diabetes incidence by 58%."
                }
            }
        ]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Diabetes Risk Calculator",
        "description": "Free Diabetes Risk Calculator based on proven risk factors. Assess your Type 2 diabetes risk with BMI, age, family history, and lifestyle factors.",
        "url": "https://calculatorloop.com/Health/Disease-Risk-and-Prevention/Diabetes-Risk-Calculator.html",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>


<!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>How to use this calculator</li>
                        <li>Understanding your results</li>
                        <li>Health recommendations</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>



<script>
// Chat Widget Functions
let chatOpen = false;

function toggleChat() {
    chatOpen = !chatOpen;
    const chatWindow = document.getElementById('chatWindow');
    if (chatOpen) {
        chatWindow.classList.add('active');
    } else {
        chatWindow.classList.remove('active');
    }
}

function getSmartResponse(userMessage) {
    const message = userMessage.toLowerCase();
    
    // Define chatResponses if not already defined (basic fallback)
    const chatResponses = {
        "usage": { keywords: ["how to", "use", "calculate"], response: "Simply enter your details in the form above and click 'Calculate'. The results will appear instantly below." },
        "results": { keywords: ["result", "score", "meaning"], response: "Your results are calculated based on standard medical formulas. Check the 'Understanding Results' section for more details." },
        "health": { keywords: ["health", "advice", "doctor"], response: "While this tool provides estimates, always consult a healthcare professional for medical advice." },
        "download": { keywords: ["download", "pdf", "save"], response: "You can download your results as a PDF using the 'Download Report' button in the results section." }
    };

    for (const [category, data] of Object.entries(chatResponses)) {
        if (data.keywords.some(keyword => message.includes(keyword))) {
            return data.response;
        }
    }
    
    if (message.includes('thank') || message.includes('thanks') || message.includes('धनयवद')) {
        return "You're welcome! Feel free to ask any questions about the calculator or your health results. I'm here to help! ";
    }
    
    if (message.includes('hello') || message.includes('hi') || message.includes('नमसत')) {
        return "Hello!  I'm your health calculator assistant. Ask me about using the calculator, understanding results, downloading reports, or health recommendations.";
    }
    
    return "I can help you with:\n Using this calculator\n Understanding your results\n Downloading PDF reports\n Sharing results\n Health improvement tips\n When to see a doctor\n\nWhat would you like to know?";
}

function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    if (!message) return;
    
    const chatBody = document.querySelector('.chat-body');
    
    const userMsg = document.createElement('div');
    userMsg.className = 'chat-message user';
    userMsg.innerHTML = `<div class="message-content"><p>${message}</p></div>`;
    chatBody.appendChild(userMsg);
    
    input.value = '';
    chatBody.scrollTop = chatBody.scrollHeight;
    
    setTimeout(() => {
        const botResponse = getSmartResponse(message);
        const botMsg = document.createElement('div');
        botMsg.className = 'chat-message bot';
        botMsg.innerHTML = `<div class="message-content"><p>${botResponse}</p></div>`;
        chatBody.appendChild(botMsg);
        chatBody.scrollTop = chatBody.scrollHeight;
    }, 800);
}

document.addEventListener('DOMContentLoaded', () => {
    const chatInput = document.getElementById('chatInput');
    if (chatInput) {
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    }
});

// Analytics Dashboard Functions
let analyticsOpen = false;
function toggleAnalytics() {
    analyticsOpen = !analyticsOpen;
    const dashboard = document.getElementById('analyticsDashboard');
    if (analyticsOpen) {
        dashboard.classList.add('active');
        setTimeout(() => {
            animateStats();
            initCharts();
        }, 300);
    } else {
        dashboard.classList.remove('active');
    }
}

function animateStats() {
    const stats = document.querySelectorAll('.stat-value');
    stats.forEach(stat => {
        const target = parseInt(stat.dataset.target);
        let current = 0;
        const increment = target / 50;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                stat.textContent = target.toLocaleString();
                clearInterval(timer);
            } else {
                stat.textContent = Math.floor(current).toLocaleString();
            }
        }, 30);
    });
}

function initCharts() {
    const pieCanvas = document.getElementById('pieChart');
    if (pieCanvas && !pieCanvas.dataset.initialized) {
        pieCanvas.dataset.initialized = 'true';
        drawPieChart(pieCanvas);
    }
    
    const lineCanvas = document.getElementById('lineChart');
    if (lineCanvas && !lineCanvas.dataset.initialized) {
        lineCanvas.dataset.initialized = 'true';
        drawLineChart(lineCanvas);
    }
    
    const barCanvas = document.getElementById('barChart');
    if (barCanvas && !barCanvas.dataset.initialized) {
        barCanvas.dataset.initialized = 'true';
        drawBarChart(barCanvas);
    }
}

function drawPieChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 300;
    canvas.height = 200;
    
    const data = [
        { label: 'Low Risk', value: 35, color: '#4caf50' },
        { label: 'Moderate', value: 30, color: '#fbc02d' },
        { label: 'High', value: 25, color: '#ff9800' },
        { label: 'Very High', value: 10, color: '#f44336' }
    ];
    
    let currentAngle = -Math.PI / 2;
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 70;
    
    data.forEach((item, index) => {
        setTimeout(() => {
            const sliceAngle = (item.value / 100) * 2 * Math.PI;
            
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
            ctx.closePath();
            ctx.fillStyle = item.color;
            ctx.fill();
            
            const labelAngle = currentAngle + sliceAngle / 2;
            const labelX = centerX + Math.cos(labelAngle) * (radius + 30);
            const labelY = centerY + Math.sin(labelAngle) * (radius + 30);
            
            ctx.fillStyle = item.color;
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(item.value + '%', labelX, labelY);
            
            currentAngle += sliceAngle;
        }, index * 200);
    });
}

function drawLineChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 200;
    
    const data = [120, 145, 132, 168, 155, 180, 142];
    const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
    
    const padding = 30;
    const chartWidth = canvas.width - padding * 2;
    const chartHeight = canvas.height - padding * 2;
    const max = Math.max(...data);
    
    ctx.strokeStyle = '#667eea';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padding, padding);
    ctx.lineTo(padding, canvas.height - padding);
    ctx.lineTo(canvas.width - padding, canvas.height - padding);
    ctx.stroke();
    
    let progress = 0;
    function animate() {
        if (progress >= 1) return;
        progress += 0.02;
        
        ctx.clearRect(padding + 1, 0, chartWidth, canvas.height - padding);
        
        ctx.strokeStyle = '#764ba2';
        ctx.lineWidth = 3;
        ctx.beginPath();
        
        data.forEach((value, index) => {
            const x = padding + (chartWidth / (data.length - 1)) * index;
            const y = canvas.height - padding - (value / max) * chartHeight * progress;
            
            if (index === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
            
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.arc(x, y, 4, 0, Math.PI * 2);
            ctx.fill();
            
            if (progress > 0.9) {
                ctx.fillStyle = '#666';
                ctx.font = '11px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(labels[index], x, canvas.height - padding + 15);
            }
        });
        
        ctx.stroke();
        requestAnimationFrame(animate);
    }
    animate();
}

function drawBarChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 200;
    
    const data = [
        { label: '18-30', value: 45 },
        { label: '31-45', value: 78 },
        { label: '46-60', value: 92 },
        { label: '60+', value: 65 }
    ];
    
    const padding = 30;
    const barWidth = (canvas.width - padding * 2) / data.length - 10;
    const maxValue = Math.max(...data.map(d => d.value));
    
    let progress = 0;
    function animate() {
        if (progress >= 1) return;
        progress += 0.02;
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        data.forEach((item, index) => {
            const x = padding + index * (barWidth + 10);
            const barHeight = ((item.value / maxValue) * (canvas.height - padding * 2)) * progress;
            const y = canvas.height - padding - barHeight;
            
            const gradient = ctx.createLinearGradient(0, y, 0, canvas.height - padding);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(x, y, barWidth, barHeight);
            
            if (progress > 0.9) {
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(item.label, x + barWidth / 2, canvas.height - padding + 15);
                ctx.fillText(item.value, x + barWidth / 2, y - 5);
            }
        });
        
        requestAnimationFrame(animate);
    }
    animate();
}

// Download PDF functionality
function downloadPDF() {
    const resultValue = document.getElementById('resultValue') || document.querySelector('.result-value');
    const resultDetails = document.getElementById('resultDetails') || document.querySelector('.result-card');
    
    if (!resultValue) {
        alert('Please calculate your results first!');
        return;
    }
    
    const calculatorTitle = document.querySelector('h1').textContent;
    const result = resultValue.textContent;
    const details = resultDetails ? resultDetails.innerText : '';
    
    const pdfContent = `
${calculatorTitle}
${'='.repeat(50)}

Result: ${result}

${details}

Generated on: ${new Date().toLocaleDateString()}
Source: CalculatorLoop.com

Note: This is an educational tool. Consult healthcare 
professionals for medical advice.
    `;
    
    const blob = new Blob([pdfContent], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${calculatorTitle.replace(/\s+/g, '-')}-Report.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    
    showToast(' Report downloaded successfully!', 'success');
}

// Share functionality
let shareMenuOpen = false;
function toggleShareMenu() {
    shareMenuOpen = !shareMenuOpen;
    const menu = document.getElementById('shareMenu');
    if (shareMenuOpen) {
        menu.classList.add('active');
    } else {
        menu.classList.remove('active');
    }
}

function shareWhatsApp() {
    const result = document.querySelector('.result-value')?.textContent || 'Check this out!';
    const calculatorTitle = document.querySelector('h1').textContent;
    const text = `${calculatorTitle}\nMy Result: ${result}\n\nCalculate yours: ${window.location.href}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
    toggleShareMenu();
}

function shareTwitter() {
    const calculatorTitle = document.querySelector('h1').textContent;
    const text = `I just used ${calculatorTitle} - Get your health insights now!`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
    toggleShareMenu();
}

function shareFacebook() {
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
    toggleShareMenu();
}

function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        showToast(' Link copied to clipboard!', 'success');
        toggleShareMenu();
    });
}

function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4caf50' : '#667eea'};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        z-index: 10001;
        animation: slideInRight 0.3s ease;
        font-weight: 600;
    `;
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => document.body.removeChild(toast), 300);
    }, 3000);
}

function showActionButtons() {
    const actionBtns = document.getElementById('actionButtons');
    if (actionBtns) {
        actionBtns.style.display = 'flex';
    }
}

document.addEventListener('click', (e) => {
    const shareMenu = document.getElementById('shareMenu');
    const shareBtn = document.querySelector('.share-btn');
    if (shareMenu && shareMenuOpen && !shareMenu.contains(e.target) && !shareBtn.contains(e.target)) {
        toggleShareMenu();
    }
});
</script>


</body>
</html>
