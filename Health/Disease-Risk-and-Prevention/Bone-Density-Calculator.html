<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Bone Density Calculator - T-Score & Osteoporosis Risk Assessment</title>
    <meta name="description" content="Calculate and interpret your Bone Mineral Density (BMD) T-Score. Assess osteoporosis risk and understand your bone health status.">
    <meta name="keywords" content="bone density calculator, t-score calculator, osteoporosis risk, osteopenia, bone health">
    <link rel="canonical" href="https://calculatorloop.com/Health/Disease-Risk-and-Prevention/Bone-Density-Calculator.html">
    <meta property="og:title" content="Bone Density Calculator - T-Score Assessment">
    <meta property="og:description" content="Interpret your Bone Density T-Score and assess osteoporosis risk.">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --bg-gradient-start: #667eea;
    --bg-gradient-end: #764ba2;
    --container-bg: #ffffff;
    --text-primary: #1a1a1a;
    --text-secondary: #666;
    --text-tertiary: #555;
    --border-color: #e0e0e0;
    --input-bg: #ffffff;
    --card-bg: #f8f9fa;
    --shadow: rgba(0,0,0,0.15);
}
body.dark-mode {
    --bg-gradient-start: #1a1a2e;
    --bg-gradient-end: #16213e;
    --container-bg: #0f3460;
    --text-primary: #e8e8e8;
    --text-secondary: #b8b8b8;
    --text-tertiary: #a0a0a0;
    --border-color: #2a4663;
    --input-bg: #1a2942;
    --card-bg: #1a2942;
    --shadow: rgba(0,0,0,0.3);
}
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); 
    min-height: 100vh; 
    padding: 10px; 
    line-height: 1.6; 
    transition: background 0.5s ease;
}
.header-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 1000;
}
.back-btn, .dark-mode-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px var(--shadow);
}
.back-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
}
.back-btn:hover {
    transform: translateY(-3px) rotate(-5deg);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
.dark-mode-toggle {
    background: var(--container-bg);
    color: var(--text-primary);
    animation: float 3s ease-in-out infinite;
}
.dark-mode-toggle:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 6px 25px var(--shadow);
}
.dark-mode-toggle i {
    transition: transform 0.5s ease;
}
.dark-mode .dark-mode-toggle i {
    transform: rotate(180deg);
}
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}
.container { 
    max-width: 680px; 
    margin: 0 auto; 
    background: var(--container-bg); 
    border-radius: 16px; 
    box-shadow: 0 8px 32px var(--shadow); 
    padding: 24px; 
    margin-bottom: 20px;
    transition: all 0.3s ease;
}
h1 { 
    color: var(--text-primary); 
    text-align: center; 
    margin-bottom: 8px; 
    font-size: clamp(1.5rem, 5vw, 2rem); 
    font-weight: 700; 
    line-height: 1.2;
}
h2 {
    color: var(--text-primary);
    transition: color 0.3s ease;
}
h3 {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
.subtitle { 
    text-align: center; 
    color: var(--text-secondary); 
    margin-bottom: 24px; 
    font-size: clamp(0.875rem, 3vw, 1rem); 
}
.input-group { 
    margin-bottom: 20px; 
}
label { 
    display: block; 
    margin-bottom: 8px; 
    color: var(--text-tertiary); 
    font-weight: 600; 
    font-size: clamp(0.875rem, 3vw, 0.95rem);
}
input, select, textarea { 
    width: 100%; 
    padding: 12px 14px; 
    border: 2px solid var(--border-color); 
    border-radius: 8px; 
    font-size: clamp(0.9rem, 3vw, 1rem); 
    transition: all 0.3s; 
    font-family: inherit;
    background: var(--input-bg);
    color: var(--text-primary);
}
input:focus, select:focus, textarea:focus { 
    outline: none; 
    border-color: #667eea; 
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
.btn { 
    width: 100%; 
    padding: 14px; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    color: white; 
    border: none; 
    border-radius: 8px; 
    font-size: clamp(1rem, 3.5vw, 1.1rem); 
    font-weight: 600; 
    cursor: pointer; 
    transition: all 0.3s; 
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}
.btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); 
}
.btn:active { 
    transform: translateY(0); 
}
.result { 
    margin-top: 24px; 
    padding: 24px; 
    background: linear-gradient(135deg, var(--card-bg) 0%, var(--card-bg) 100%); 
    border-radius: 12px; 
    display: none;
    transition: all 0.3s ease;
}
.result-value { 
    font-size: clamp(2rem, 8vw, 3rem); 
    color: #667eea; 
    font-weight: 700; 
    text-align: center; 
    margin: 16px 0; 
    word-break: break-word;
}
.result-card { 
    background: var(--input-bg); 
    padding: 16px; 
    border-radius: 8px; 
    margin: 12px 0; 
    box-shadow: 0 2px 8px var(--shadow);
    transition: all 0.3s ease;
}
.result-card h3 { 
    font-size: clamp(1rem, 4vw, 1.2rem); 
    margin-bottom: 10px; 
    color: var(--text-tertiary);
}
.result-card h4 { 
    font-size: clamp(0.9rem, 3.5vw, 1.05rem); 
    margin: 12px 0 8px 0; 
    color: var(--text-tertiary);
}
.result-card p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-secondary); 
    margin: 8px 0; 
    line-height: 1.6;
}
.result-card strong { 
    color: var(--text-tertiary); 
}
.info-box { 
    background: var(--card-bg); 
    border-left: 4px solid #667eea; 
    padding: 16px; 
    margin: 20px 0; 
    border-radius: 8px;
    transition: all 0.3s ease;
}
.info-box h3 { 
    font-size: clamp(1rem, 4vw, 1.15rem); 
    color: var(--text-tertiary); 
    margin-bottom: 8px;
}
.info-box p { 
    font-size: clamp(0.875rem, 3vw, 0.95rem); 
    color: var(--text-tertiary); 
    line-height: 1.6;
}
.back-link { 
    display: inline-block; 
    margin-top: 16px; 
    color: #667eea; 
    text-decoration: none; 
    font-weight: 600; 
    font-size: clamp(0.9rem, 3vw, 1rem);
}
.back-link:hover { 
    text-decoration: underline; 
}
article p, article ul li {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
}
/* FAQ Accordion Styles */
.faq-item {
    margin-bottom: 15px;
    background: var(--card-bg);
    border-left: 4px solid #667eea;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}
.faq-question {
    padding: 18px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    transition: all 0.3s ease;
}
.faq-question:hover {
    background: var(--input-bg);
}
.faq-question h3 {
    font-size: clamp(0.95rem, 3.5vw, 1.05rem);
    color: var(--text-tertiary);
    margin: 0;
    flex: 1;
}
.faq-icon {
    font-size: 1.2rem;
    color: #667eea;
    transition: transform 0.3s ease;
    margin-left: 15px;
}
.faq-item.active .faq-icon {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
    padding: 0 20px;
}
.faq-item.active .faq-answer {
    max-height: 1000px;
    padding: 0 20px 18px 20px;
}
.faq-answer p {
    line-height: 1.8;
    color: var(--text-tertiary);
    margin: 0;
}
@media (max-width: 480px) {
    body { padding: 8px; }
    .container { padding: 20px 16px; border-radius: 12px; }
    h1 { margin-bottom: 6px; }
    .subtitle { margin-bottom: 20px; }
    .input-group { margin-bottom: 16px; }
    .btn { padding: 13px; }
    .result { padding: 20px 16px; margin-top: 20px; }
    .result-card { padding: 14px; }
    .info-box { padding: 14px; }
    .header-controls { top: 10px; right: 10px; gap: 8px; }
    .back-btn, .dark-mode-toggle { width: 45px; height: 45px; font-size: 1.1rem; }
}
@media (min-width: 768px) {
    body { padding: 20px; }
    .container { padding: 40px; }
}
    
/* Chat Widget Styles */
.chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}
.chat-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
    position: relative;
}
.chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.chat-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff4757;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    animation: bounce 1s infinite;
}
@keyframes pulse {
    0%, 100% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4); }
    50% { box-shadow: 0 4px 30px rgba(102, 126, 234, 0.7); }
}
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.chat-window {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 350px;
    height: 500px;
    background: var(--container-bg);
    border-radius: 16px;
    box-shadow: 0 8px 40px var(--shadow);
    display: none;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}
.chat-window.active {
    display: flex;
}
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.chat-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 15px;
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.chat-header h4 {
    margin: 0;
    font-size: 1rem;
    color: white;
}
.chat-close {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}
.chat-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}
.chat-message {
    margin-bottom: 15px;
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.chat-message.bot .message-content {
    background: var(--card-bg);
    padding: 12px;
    border-radius: 12px;
    color: var(--text-tertiary);
}
.chat-message.user .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 12px;
    border-radius: 12px;
    color: white;
    margin-left: auto;
    max-width: 80%;
}
.message-content ul {
    margin: 10px 0 0 20px;
    line-height: 1.8;
}
.chat-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
}
.chat-footer input {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: var(--input-bg);
    color: var(--text-primary);
}
.chat-footer button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}
.chat-footer button:hover {
    transform: scale(1.1);
}

/* Analytics Dashboard Styles */
.analytics-toggle {
    position: fixed;
    bottom: 100px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    z-index: 9998;
    animation: slideInRight 0.5s ease;
}
@keyframes slideInRight {
    from { transform: translateX(100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
.analytics-toggle:hover {
    transform: translateX(-5px);
    box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
}
.analytics-dashboard {
    position: fixed;
    top: 0;
    right: -100%;
    width: 450px;
    height: 100vh;
    background: var(--container-bg);
    box-shadow: -5px 0 30px var(--shadow);
    z-index: 10000;
    overflow-y: auto;
    transition: right 0.4s ease;
}
.analytics-dashboard.active {
    right: 0;
}
.analytics-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 10;
}
.analytics-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: white;
}
.analytics-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s;
}
.analytics-close:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
}
.analytics-content {
    padding: 20px;
}
.analytics-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px var(--shadow);
    animation: fadeInUp 0.5s ease;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.analytics-card h4 {
    color: var(--text-tertiary);
    margin-bottom: 15px;
    font-size: 1.1rem;
}
.stat-row {
    display: flex;
    gap: 15px;
    justify-content: space-between;
}
.stat-item {
    flex: 1;
    text-align: center;
    padding: 15px;
    background: var(--input-bg);
    border-radius: 8px;
}
.stat-value {
    font-size: 2rem;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
}
.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.chart-container {
    position: relative;
    height: 200px;
}
.chart-container canvas {
    max-height: 100%;
}

@media (max-width: 480px) {
    .chat-window {
        width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        height: 450px;
    }
    .analytics-dashboard {
        width: 100%;
    }
    .analytics-toggle {
        bottom: 95px;
        font-size: 0.9rem;
        padding: 10px 16px;
    }
    .chat-button {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
    }
}
    </style>
</head>
<body>
<!-- Enhanced Header with Dark Mode and Back Button -->
<div class="header-controls">
    <a href="javascript:history.back()" class="back-btn" title="Go Back">
        <i class="fas fa-arrow-left"></i>
    </a>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        <i class="fas fa-moon"></i>
    </button>
</div>
    <div class="container">
        <h1><i class="fas fa-bone"></i> Bone Density Calculator</h1>
        <p class="subtitle">Interpret your T-Score and assess osteoporosis risk</p>
        
        <div class="input-group">
            <label><i class="fas fa-chart-line"></i> T-Score (from DEXA scan)</label>
            <input type="number" id="tscore" value="-1.5" step="0.1" placeholder="e.g. -1.5">
            <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                Enter the lowest T-score from your bone density report (usually Hip or Spine).
            </div>
        </div>

        <button class="btn" onclick="calculate()"><i class="fas fa-calculator"></i> Assess Bone Health</button>
        
        <div class="result" id="result">
            <div class="result-value" id="resultValue">Osteopenia</div>
            <div class="result-card" id="resultDetails"></div>
            <div id="actionButtons" style="display:none; gap:10px; margin-top:20px;">
                <button class="btn" onclick="downloadPDF()" style="flex:1; background: #4caf50;"><i class="fas fa-file-pdf"></i> Download Report</button>
                <button class="btn share-btn" onclick="toggleShareMenu()" style="flex:1; background: #2196f3;"><i class="fas fa-share-alt"></i> Share</button>
            </div>
        </div>
        
        <div class="info-box">
            <h3><i class="fas fa-info-circle"></i> About T-Scores</h3>
            <p>A T-score compares your bone density to that of a healthy 30-year-old adult. It is the standard measurement used to diagnose osteoporosis.</p>
        </div>
    </div>

    <!-- Share Menu -->
    <div class="share-menu" id="shareMenu" style="position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%) translateY(100px); background: white; padding: 20px; border-radius: 16px; box-shadow: 0 5px 30px rgba(0,0,0,0.2); z-index: 10002; transition: all 0.3s ease; opacity: 0; pointer-events: none;">
        <h4 style="margin-bottom: 15px; text-align: center;">Share Result</h4>
        <div style="display: flex; gap: 15px;">
            <button onclick="shareWhatsApp()" style="border: none; background: #25D366; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer;"><i class="fab fa-whatsapp"></i></button>
            <button onclick="shareTwitter()" style="border: none; background: #1DA1F2; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer;"><i class="fab fa-twitter"></i></button>
            <button onclick="shareFacebook()" style="border: none; background: #4267B2; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer;"><i class="fab fa-facebook-f"></i></button>
            <button onclick="copyLink()" style="border: none; background: #666; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer;"><i class="fas fa-link"></i></button>
        </div>
    </div>
    <style>
        .share-menu.active { transform: translateX(-50%) translateY(0); opacity: 1; pointer-events: all; }
    </style>

    <!-- Rich Content Section -->
    <div class="container" style="margin-top: 30px;">
        <article>
            <h2 style="color: #667eea; margin-bottom: 20px;">Understanding Bone Density & Osteoporosis</h2>
            
            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">What is Bone Density?</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    Bone density, or bone mineral density (BMD), is a measure of the amount of minerals (mostly calcium and phosphorus) contained in a certain volume of bone. It is used to diagnose osteoporosis, a condition where bones become weak and brittle, increasing the risk of fractures.
                </p>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Interpreting Your T-Score</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    The World Health Organization (WHO) has established the following criteria for T-scores:
                </p>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Normal:</strong> T-score of -1.0 or above. Your bone density is considered normal.</li>
                    <li><strong>Osteopenia (Low Bone Mass):</strong> T-score between -1.0 and -2.5. You have lower than normal bone density, but not low enough to be classified as osteoporosis.</li>
                    <li><strong>Osteoporosis:</strong> T-score of -2.5 or lower. You have significantly reduced bone density and a higher risk of fractures.</li>
                    <li><strong>Severe Osteoporosis:</strong> T-score of -2.5 or lower with a history of one or more fragility fractures.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Risk Factors for Osteoporosis</h3>
                <ul style="line-height: 2; color: #555; margin-left: 20px;">
                    <li><strong>Age:</strong> Risk increases as you get older.</li>
                    <li><strong>Gender:</strong> Women are much more likely to develop osteoporosis than men.</li>
                    <li><strong>Family History:</strong> Having a parent or sibling with osteoporosis puts you at greater risk.</li>
                    <li><strong>Body Frame Size:</strong> Men and women who have small body frames tend to have a higher risk.</li>
                    <li><strong>Hormone Levels:</strong> Lowered sex hormone levels tend to weaken bone.</li>
                    <li><strong>Dietary Factors:</strong> Low calcium intake, eating disorders, and gastrointestinal surgery.</li>
                    <li><strong>Lifestyle Choices:</strong> Sedentary lifestyle, excessive alcohol consumption, and tobacco use.</li>
                </ul>
            </section>

            <section style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Prevention and Maintenance</h3>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Calcium and Vitamin D:</strong> Ensure you get enough calcium and Vitamin D through diet or supplements.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Exercise:</strong> Weight-bearing and muscle-strengthening exercises are essential for building and maintaining bone density.
                </p>
                <p style="line-height: 1.8; color: #555; margin-bottom: 15px;">
                    <strong>Healthy Lifestyle:</strong> Avoid smoking and limit alcohol consumption.
                </p>
            </section>
        </article>
    </div>

    <!-- FAQ Section -->
    <div class="container" style="margin-top: 30px;">
        <h2 style="color: #667eea; margin-bottom: 25px; text-align: center;">Bone Health: Frequently Asked Questions</h2>
        
        <div class="faq-item"><div class="faq-question">
            <h3>1. How often should I get a bone density test?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                It is generally recommended for women aged 65 and older and men aged 70 and older. Younger individuals with risk factors may also need testing. Consult your doctor for personalized advice.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>2. Can osteopenia be reversed?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                Yes, in many cases, lifestyle changes such as improved diet, exercise, and sometimes medication can help stop bone loss and even rebuild some bone density.
            </p></div></div>

        <div class="faq-item"><div class="faq-question">
            <h3>3. What is the difference between T-score and Z-score?</h3><i class="fas fa-chevron-down faq-icon"></i></div><div class="faq-answer">
            <p>
                A T-score compares your bone density to a healthy 30-year-old. A Z-score compares your bone density to the average bone density of people your own age and gender. T-scores are primarily used for diagnosis in postmenopausal women and men over 50.
            </p></div></div>
    </div>

    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How often should I get a bone density test?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "It is generally recommended for women aged 65 and older and men aged 70 and older. Younger individuals with risk factors may also need testing."
                }
            },
            {
                "@type": "Question",
                "name": "Can osteopenia be reversed?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, in many cases, lifestyle changes such as improved diet, exercise, and sometimes medication can help stop bone loss."
                }
            }
        ]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Bone Density Calculator",
        "description": "Calculate and interpret your Bone Mineral Density (BMD) T-Score. Assess osteoporosis risk.",
        "url": "https://calculatorloop.com/Health/Disease-Risk-and-Prevention/Bone-Density-Calculator.html",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>

<!-- Floating Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">1</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4><i class="fas fa-robot"></i> Health Assistant</h4>
            <button onclick="toggleChat()" class="chat-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
            <div class="chat-message bot">
                <div class="message-content">
                    <p> Hello! I'm your health calculator assistant. Ask me anything about:</p>
                    <ul>
                        <li>Understanding T-Scores</li>
                        <li>Osteoporosis risks</li>
                        <li>Bone health tips</li>
                        <li>Download & share options</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your question..." id="chatInput">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-toggle" onclick="toggleAnalytics()">
    <i class="fas fa-chart-line"></i>
    <span>Analytics</span>
</div>

<div class="analytics-dashboard" id="analyticsDashboard">
    <div class="analytics-header">
        <h3><i class="fas fa-chart-bar"></i> Health Analytics Dashboard</h3>
        <button onclick="toggleAnalytics()" class="analytics-close"><i class="fas fa-times"></i></button>
    </div>
    <div class="analytics-content">
        <div class="analytics-card">
            <h4><i class="fas fa-users"></i> Usage Statistics</h4>
            <div class="stat-row">
                <div class="stat-item">
                    <div class="stat-value" data-target="1247">0</div>
                    <div class="stat-label">Total Calculations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="856">0</div>
                    <div class="stat-label">This Month</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" data-target="142">0</div>
                    <div class="stat-label">Today</div>
                </div>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-pie"></i> Risk Distribution</h4>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-line"></i> Monthly Trend</h4>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        
        <div class="analytics-card">
            <h4><i class="fas fa-chart-bar"></i> Age Group Analysis</h4>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Dark Mode Toggle
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const icon = document.querySelector('.dark-mode-toggle i');
        if (document.body.classList.contains('dark-mode')) {
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        } else {
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
        }
    }

    // FAQ Accordion
    document.querySelectorAll('.faq-question').forEach(question => {
        question.addEventListener('click', () => {
            const item = question.parentElement;
            const isActive = item.classList.contains('active');
            
            document.querySelectorAll('.faq-item').forEach(i => i.classList.remove('active'));
            
            if (!isActive) {
                item.classList.add('active');
            }
        });
    });

    // Calculator Logic
    function calculate() {
        const tscore = parseFloat(document.getElementById('tscore').value);

        if (isNaN(tscore)) {
            alert('Please enter a valid T-Score');
            return;
        }

        let diagnosis = '';
        let color = '';
        let details = '';

        if (tscore >= -1.0) {
            diagnosis = 'Normal Bone Density';
            color = '#4caf50'; // Green
            details = 'Your bone density is considered normal for a healthy young adult. Maintain your bone health with adequate calcium, Vitamin D, and weight-bearing exercise.';
        } else if (tscore > -2.5) {
            diagnosis = 'Osteopenia (Low Bone Mass)';
            color = '#ff9800'; // Orange
            details = 'You have lower than normal bone density. This is a warning sign. You may be at increased risk for osteoporosis. Consult your doctor about prevention strategies.';
        } else {
            diagnosis = 'Osteoporosis';
            color = '#f44336'; // Red
            details = 'Your bone density is significantly low, indicating osteoporosis. You are at high risk for fractures. Medical treatment and lifestyle changes are strongly recommended.';
        }

        const resultDiv = document.getElementById('result');
        const resultValue = document.getElementById('resultValue');
        const resultDetails = document.getElementById('resultDetails');

        resultDiv.style.display = 'block';
        resultValue.textContent = diagnosis;
        resultValue.style.color = color;
        
        resultDetails.innerHTML = `
            <h4>T-Score: ${tscore}</h4>
            <p>${details}</p>
        `;
        
        if(typeof showActionButtons === 'function') showActionButtons();
    }

    // Chat Widget Functions
    let chatOpen = false;

    function toggleChat() {
        chatOpen = !chatOpen;
        const chatWindow = document.getElementById('chatWindow');
        if (chatOpen) {
            chatWindow.classList.add('active');
        } else {
            chatWindow.classList.remove('active');
        }
    }

    function getSmartResponse(userMessage) {
        const message = userMessage.toLowerCase();
        
        const chatResponses = {
            "t-score": { keywords: ["t-score", "score", "number"], response: "A T-score compares your bone density to a healthy 30-year-old. -1.0 and above is normal, -1.0 to -2.5 is osteopenia, and -2.5 or lower is osteoporosis." },
            "osteoporosis": { keywords: ["osteoporosis", "risk", "danger"], response: "Osteoporosis causes bones to become weak and brittle. It's often called a 'silent disease' because you can't feel your bones getting weaker." },
            "prevention": { keywords: ["prevent", "improve", "help"], response: "To improve bone health: get enough Calcium and Vitamin D, do weight-bearing exercises, avoid smoking, and limit alcohol." },
            "download": { keywords: ["download", "pdf", "save"], response: "You can download your results as a PDF using the 'Download Report' button in the results section." }
        };

        for (const [category, data] of Object.entries(chatResponses)) {
            if (data.keywords.some(keyword => message.includes(keyword))) {
                return data.response;
            }
        }
        
        if (message.includes('thank')) {
            return "You're welcome! Take care of your bones!";
        }
        
        if (message.includes('hello') || message.includes('hi')) {
            return "Hello! Ask me about T-scores, osteoporosis, or bone health tips.";
        }
        
        return "I can help you understand your T-score, learn about osteoporosis risks, or give tips for better bone health. What would you like to know?";
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;
        
        const chatBody = document.querySelector('.chat-body');
        
        const userMsg = document.createElement('div');
        userMsg.className = 'chat-message user';
        userMsg.innerHTML = `<div class="message-content"><p>${message}</p></div>`;
        chatBody.appendChild(userMsg);
        
        input.value = '';
        chatBody.scrollTop = chatBody.scrollHeight;
        
        setTimeout(() => {
            const botResponse = getSmartResponse(message);
            const botMsg = document.createElement('div');
            botMsg.className = 'chat-message bot';
            botMsg.innerHTML = `<div class="message-content"><p>${botResponse}</p></div>`;
            chatBody.appendChild(botMsg);
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 800);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const chatInput = document.getElementById('chatInput');
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        }
    });

    // Analytics Dashboard Functions
    let analyticsOpen = false;
    function toggleAnalytics() {
        analyticsOpen = !analyticsOpen;
        const dashboard = document.getElementById('analyticsDashboard');
        if (analyticsOpen) {
            dashboard.classList.add('active');
            setTimeout(() => {
                animateStats();
                initCharts();
            }, 300);
        } else {
            dashboard.classList.remove('active');
        }
    }

    function animateStats() {
        const stats = document.querySelectorAll('.stat-value');
        stats.forEach(stat => {
            const target = parseInt(stat.dataset.target);
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    stat.textContent = target.toLocaleString();
                    clearInterval(timer);
                } else {
                    stat.textContent = Math.floor(current).toLocaleString();
                }
            }, 30);
        });
    }

    function initCharts() {
        const pieCanvas = document.getElementById('pieChart');
        if (pieCanvas && !pieCanvas.dataset.initialized) {
            pieCanvas.dataset.initialized = 'true';
            drawPieChart(pieCanvas);
        }
        
        const lineCanvas = document.getElementById('lineChart');
        if (lineCanvas && !lineCanvas.dataset.initialized) {
            lineCanvas.dataset.initialized = 'true';
            drawLineChart(lineCanvas);
        }
        
        const barCanvas = document.getElementById('barChart');
        if (barCanvas && !barCanvas.dataset.initialized) {
            barCanvas.dataset.initialized = 'true';
            drawBarChart(barCanvas);
        }
    }

    function drawPieChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 300;
        canvas.height = 200;
        
        const data = [
            { label: 'Normal', value: 40, color: '#4caf50' },
            { label: 'Osteopenia', value: 40, color: '#ff9800' },
            { label: 'Osteoporosis', value: 20, color: '#f44336' }
        ];
        
        let currentAngle = -Math.PI / 2;
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 70;
        
        data.forEach((item, index) => {
            setTimeout(() => {
                const sliceAngle = (item.value / 100) * 2 * Math.PI;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.closePath();
                ctx.fillStyle = item.color;
                ctx.fill();
                
                const labelAngle = currentAngle + sliceAngle / 2;
                const labelX = centerX + Math.cos(labelAngle) * (radius + 30);
                const labelY = centerY + Math.sin(labelAngle) * (radius + 30);
                
                ctx.fillStyle = item.color;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(item.value + '%', labelX, labelY);
                
                currentAngle += sliceAngle;
            }, index * 200);
        });
    }

    function drawLineChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 200;
        
        const data = [120, 145, 132, 168, 155, 180, 142];
        const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        
        const padding = 30;
        const chartWidth = canvas.width - padding * 2;
        const chartHeight = canvas.height - padding * 2;
        const max = Math.max(...data);
        
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(padding, padding);
        ctx.lineTo(padding, canvas.height - padding);
        ctx.lineTo(canvas.width - padding, canvas.height - padding);
        ctx.stroke();
        
        let progress = 0;
        function animate() {
            if (progress >= 1) return;
            progress += 0.02;
            
            ctx.clearRect(padding + 1, 0, chartWidth, canvas.height - padding);
            
            ctx.strokeStyle = '#764ba2';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            data.forEach((value, index) => {
                const x = padding + (chartWidth / (data.length - 1)) * index;
                const y = canvas.height - padding - (value / max) * chartHeight * progress;
                
                if (index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
                
                ctx.fillStyle = '#667eea';
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                if (progress > 0.9) {
                    ctx.fillStyle = '#666';
                    ctx.font = '11px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(labels[index], x, canvas.height - padding + 15);
                }
            });
            
            ctx.stroke();
            requestAnimationFrame(animate);
        }
        animate();
    }

    function drawBarChart(canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 200;
        
        const data = [
            { label: '50-60', value: 30 },
            { label: '61-70', value: 50 },
            { label: '71-80', value: 80 },
            { label: '80+', value: 60 }
        ];
        
        const padding = 30;
        const barWidth = (canvas.width - padding * 2) / data.length - 10;
        const maxValue = Math.max(...data.map(d => d.value));
        
        let progress = 0;
        function animate() {
            if (progress >= 1) return;
            progress += 0.02;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            data.forEach((item, index) => {
                const x = padding + index * (barWidth + 10);
                const barHeight = ((item.value / maxValue) * (canvas.height - padding * 2)) * progress;
                const y = canvas.height - padding - barHeight;
                
                const gradient = ctx.createLinearGradient(0, y, 0, canvas.height - padding);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(x, y, barWidth, barHeight);
                
                if (progress > 0.9) {
                    ctx.fillStyle = '#666';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(item.label, x + barWidth / 2, canvas.height - padding + 15);
                    ctx.fillText(item.value, x + barWidth / 2, y - 5);
                }
            });
            
            requestAnimationFrame(animate);
        }
        animate();
    }

    // Download PDF functionality
    function downloadPDF() {
        const resultValue = document.getElementById('resultValue');
        const resultDetails = document.getElementById('resultDetails');
        
        if (!resultValue || resultValue.textContent === '') {
            alert('Please calculate your results first!');
            return;
        }
        
        const calculatorTitle = document.querySelector('h1').textContent;
        const result = resultValue.textContent;
        const details = resultDetails.innerText;
        
        const pdfContent = `
${calculatorTitle}
${'='.repeat(50)}

Result: ${result}

${details}

Generated on: ${new Date().toLocaleDateString()}
Source: CalculatorLoop.com

Note: This is an educational tool. Consult healthcare 
professionals for medical advice.
        `;
        
        const blob = new Blob([pdfContent], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${calculatorTitle.replace(/\s+/g, '-')}-Report.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        
        showToast(' Report downloaded successfully!', 'success');
    }

    // Share functionality
    let shareMenuOpen = false;
    function toggleShareMenu() {
        shareMenuOpen = !shareMenuOpen;
        const menu = document.getElementById('shareMenu');
        if (shareMenuOpen) {
            menu.classList.add('active');
        } else {
            menu.classList.remove('active');
        }
    }

    function shareWhatsApp() {
        const result = document.getElementById('resultValue')?.textContent || 'Check this out!';
        const calculatorTitle = document.querySelector('h1').textContent;
        const text = `${calculatorTitle}\nMy Result: ${result}\n\nCalculate yours: ${window.location.href}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        toggleShareMenu();
    }

    function shareTwitter() {
        const calculatorTitle = document.querySelector('h1').textContent;
        const text = `I just used ${calculatorTitle} - Get your health insights now!`;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
        toggleShareMenu();
    }

    function shareFacebook() {
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
        toggleShareMenu();
    }

    function copyLink() {
        navigator.clipboard.writeText(window.location.href).then(() => {
            showToast(' Link copied to clipboard!', 'success');
            toggleShareMenu();
        });
    }

    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#4caf50' : '#667eea'};
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 10001;
            animation: slideInRight 0.3s ease;
            font-weight: 600;
        `;
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
    }

    function showActionButtons() {
        const actionBtns = document.getElementById('actionButtons');
        if (actionBtns) {
            actionBtns.style.display = 'flex';
        }
    }

    document.addEventListener('click', (e) => {
        const shareMenu = document.getElementById('shareMenu');
        const shareBtn = document.querySelector('.share-btn');
        if (shareMenu && shareMenuOpen && !shareMenu.contains(e.target) && !shareBtn.contains(e.target)) {
            toggleShareMenu();
        }
    });
</script>
</body>
</html>
